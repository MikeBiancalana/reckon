{"id":"reckon-03f","title":"TUI: Align hints with help and add section-specific hints","status":"closed","priority":2,"issue_type":"bug","assignee":"chadd","created_at":"2026-01-02T17:11:19.714884239-05:00","created_by":"chadd","updated_at":"2026-01-03T12:28:27.130153595-05:00","closed_at":"2026-01-03T12:28:27.130153595-05:00","close_reason":"Completed in PR #40"}
{"id":"reckon-06d","title":"CLI task list: use compact tabular format by default","description":"## Problem\n\nThe CLI `rk task list` output takes too much vertical space when there are more than 3-5 tasks. Each task currently consumes 4-5 lines in the default verbose format:\n\n```\n[1] [active] Task Title Here\n  ID: abc123def456\n  Created: 2026-01-04\n  Tags: work, urgent\n\n[2] [done] Another Task\n  ID: xyz789uvw012\n  Created: 2026-01-02\n  Tags: personal\n```\n\nWith 10 tasks, this is 40-50 lines of output - too much scrolling.\n\n## Current Implementation\n\n**File**: `internal/cli/task.go` lines 61-118\n\nThree output modes exist:\n1. **Default (verbose)**: 4-5 lines per task (ID, Created, Tags on separate lines)\n2. **Compact** (`--compact` flag): Single line per task, but loses useful info\n3. **JSON** (`--json` flag): Raw JSON array\n\nThe verbose output is rendered in `taskListCmd.RunE` (lines 105-114) using `fmt.Printf()`.\n\n## Desired Behavior\n\nReplace default output with a columnar/tabular format:\n\n```\nID         STATUS   CREATED     TAGS          TITLE\nabc123de   active   2026-01-04  work,urgent   Task Title Here\nxyz789uv   done     2026-01-02  personal      Another Task\ndef456gh   active   2026-01-03  -             Third task with no tags\n```\n\nFeatures:\n- Column headers for clarity\n- Truncated ID (first 8 chars) to save space\n- Aligned columns for readability\n- Single line per task\n- Tags joined with commas, or `-` if none\n- Title can wrap or truncate based on terminal width\n\n## Implementation Options\n\n1. **Use `text/tabwriter`** from Go stdlib for auto-aligned columns\n2. **Use `tablewriter`** library (github.com/olekukonko/tablewriter) for more features\n3. **Manual formatting** with `fmt.Sprintf` and fixed widths\n\n## Acceptance Criteria\n\n- [ ] Default output is tabular (no `--compact` flag needed)\n- [ ] Column headers are shown\n- [ ] One task per line\n- [ ] All useful fields visible (ID, status, created, tags, title)\n- [ ] Old verbose format available via `--verbose` or `-v` flag (optional)\n- [ ] `--json` output unchanged\n- [ ] Terminal width respected (truncate title if needed)\n\n## Files to Modify\n\n- `internal/cli/task.go`:\n  - Lines 61-118: `taskListCmd` - change default rendering\n  - Add `--verbose` flag if preserving old format\n  - Remove or repurpose `--compact` flag\n\n## Testing\n\n- Test output with 0, 1, 5, 20 tasks\n- Test tasks with no tags\n- Test tasks with long titles\n- Test narrow terminal widths","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T17:55:59.713991268-05:00","created_by":"chadd","updated_at":"2026-01-10T16:29:52.290985654-05:00","closed_at":"2026-01-10T16:29:52.290985654-05:00","close_reason":"Closed"}
{"id":"reckon-0e5","title":"Create TaskRepository for DB operations","description":"Create repository for task database operations.\n\n## File to Create\n\n`internal/journal/task_repository.go`\n\n## Methods to Implement\n\n```go\ntype TaskRepository struct {\n    db *sql.DB\n}\n\nfunc NewTaskRepository(db *sql.DB) *TaskRepository\n\n// SaveTask saves a task and its notes to the database\nfunc (r *TaskRepository) SaveTask(task *Task) error\n\n// SaveTasks saves multiple tasks (bulk operation)\nfunc (r *TaskRepository) SaveTasks(tasks []Task) error\n\n// GetAllTasks retrieves all tasks with their notes\nfunc (r *TaskRepository) GetAllTasks() ([]Task, error)\n\n// GetTaskByID retrieves a single task by ID\nfunc (r *TaskRepository) GetTaskByID(id string) (*Task, error)\n\n// DeleteTask deletes a task and its notes\nfunc (r *TaskRepository) DeleteTask(id string) error\n\n// DeleteTaskNote deletes a specific note\nfunc (r *TaskRepository) DeleteTaskNote(noteID string) error\n```\n\n## Implementation Details\n\n- Use transactions for operations affecting multiple tables\n- When saving task, also save/update notes\n- When loading tasks, join with task_notes and populate Notes slice\n- Sort notes by position when loading\n- Follow existing repository patterns from `internal/journal/repository.go`\n- Use prepared statements where appropriate\n\n## SQL Operations\n\n- INSERT/UPDATE tasks table\n- INSERT/UPDATE task_notes table (with task_id FK)\n- SELECT with JOIN for loading tasks with notes\n- DELETE with CASCADE for task removal\n\n## Acceptance Criteria\n\n- SaveTask persists task and all notes\n- GetAllTasks returns tasks with notes properly nested\n- GetTaskByID returns single task with notes\n- DeleteTask removes task and cascades to notes\n- DeleteTaskNote removes specific note\n- Transactions used for multi-table operations\n\n## Dependencies\n\nRequires: Task/TaskNote models and DB schema\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 2, Step 3.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:46:28.690148201-05:00","updated_at":"2025-12-28T16:36:09.824491611-05:00","closed_at":"2025-12-28T11:52:54.552414492-05:00","close_reason":"TaskRepository implemented with comprehensive CRUD operations, transactions, CASCADE deletes, and full test coverage. Code reviewed and approved. PR #15 merged to main.","dependencies":[{"issue_id":"reckon-0e5","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:41.579731137-05:00","created_by":"daemon"}]}
{"id":"reckon-0oj","title":"Multi-day tasks: TUI cannot expand to show details, CLI list shows no details, task details from CLI not saved to markdown files","description":"User reports that multi-day tasks cannot be expanded in the TUI to show details. The CLI task list command shows no details (only basic metadata). Task details entered via CLI (log entries) do not appear in the markdown files for the tasks. Investigation shows that the code has separate systems for journal tasks (expandable in TUI) and multi-day tasks (accessed via Ctrl+T picker). The CLI task show command outputs the markdown content, and logging should update the files, but user reports it doesn't work.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T12:52:17.652487595-05:00","created_by":"chadd","updated_at":"2026-01-10T13:13:28.435806894-05:00","closed_at":"2026-01-10T13:13:28.435806894-05:00","close_reason":"Closed"}
{"id":"reckon-15k","title":"TTY detection stub always returns true in review.go","description":"The isTerminal() function in internal/cli/review.go:172-176 always returns true, making the interactive mode check meaningless. If someone pipes output or redirects to a file, the program will still try to read from stdin, potentially causing hangs. Fix: Use golang.org/x/term.IsTerminal() or remove the check entirely.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T20:21:13.680400149-05:00","created_by":"chadd","updated_at":"2026-01-08T21:10:39.603391198-05:00","closed_at":"2026-01-08T21:10:39.603391198-05:00","close_reason":"Fixed TTY detection: replaced stub with proper term.IsTerminal(), added nil check, validates both stdin and stdout"}
{"id":"reckon-18e","title":"Remove unused legacy task package (internal/task)","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-10T12:05:55.678135538-05:00","created_by":"chadd","updated_at":"2026-01-10T12:05:55.678135538-05:00"}
{"id":"reckon-1l8","title":"Phase 3: Time Tracking","description":"Track time spent on meetings, breaks, and optionally tasks. Calculate daily time summaries.\n\n**Requires Phase 2**: Uses task infrastructure for task-level time tracking.\n\n**Time Entry Formats** (in log):\n```\n- 10:30 [meeting:standup] 30m       # meeting with duration\n- 12:00 [break] 45m                  # break with duration\n- 14:00 [task:abc123] Started work   # task entry (duration calculated from next entry or end of day)\n```\n\n**Features to Implement**:\n\n1. **Duration Parsing**\n   - Extend log entry parser to extract Xm or Xh duration\n   - Store in duration_minutes field\n\n2. **Time Calculation Service** (internal/time/)\n   - CalculateDaySummary(date): aggregate time by category\n   - For tasks without explicit duration, calculate from timestamps\n   - Categories: meetings, breaks, tasks (by task), untracked\n\n3. **Daily Summary Component** (internal/tui/components/summary.go)\n   - Shows time breakdown at bottom of journal view\n   - Toggle with 's' key\n   - Format: \"Meetings: 1h30m | Tasks: 4h15m | Breaks: 45m | Untracked: 1h30m\"\n\n4. **Optional Start/Stop Timer**\n   - rk start \u003ctask-id\u003e - log \"Started work on [task]\"\n   - rk stop - log \"Stopped\" (duration auto-calculated)\n   - TUI: Ctrl+S to start/stop timer on current task\n\n5. **CLI Commands**:\n   - rk summary - output today's time breakdown\n   - rk summary --week - output week's time breakdown\n   - rk start \u003ctask-id\u003e - start timer on task\n   - rk stop - stop current timer\n\n**Acceptance Criteria**:\n- Log entries with 30m duration are parsed and stored\n- [meeting:name] Xm entries are categorized as meetings\n- [break] Xm entries are categorized as breaks\n- rk summary outputs time breakdown for today\n- TUI shows time summary (toggle with 's')\n- Task time calculated from log entry timestamps\n- Start/stop timer commands work","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T16:48:37.245472509-05:00","updated_at":"2026-01-02T10:47:38.754435733-05:00","closed_at":"2026-01-02T10:47:38.754435733-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-1l8","depends_on_id":"reckon-9cn","type":"blocks","created_at":"2025-12-22T16:49:06.430378979-05:00","created_by":"daemon"}],"pinned":true}
{"id":"reckon-2a9","title":"TUI: Show current date in UI","description":"User can navigate between dates with h/l keys but has no visual confirmation of what date they're viewing.\n\nCurrent state is tracked in m.currentDate but not displayed anywhere.\n\nShould show current date in:\n- Option 1: Status bar (bottom)\n- Option 2: Title area (top)\n- Option 3: Both\n\nConsider also showing if it's 'Today' vs the actual date.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:53:12.522004806-05:00","updated_at":"2025-12-22T19:49:41.09159723-05:00","closed_at":"2025-12-22T19:49:41.09159723-05:00","close_reason":"Implemented date display in TUI status bar. Shows 'Today' or formatted date (Mon, Jan 2, 2006) with smart spacing alongside keyboard hints."}
{"id":"reckon-2gu","title":"Space key does not toggle task completion in TUI","description":"Space key does not toggle task completion in TUI despite being in Tasks section. Enter key works for expanding tasks with notes, but space key has no effect. Code analysis shows the delegation should work, but something is preventing the TaskToggleMsg from being processed or the task status from updating. Debug output added previously showed the message flow, but the issue persists.","status":"in_progress","priority":1,"issue_type":"bug","assignee":"chadd","created_at":"2026-01-10T16:11:59.312644593-05:00","created_by":"chadd","updated_at":"2026-01-10T16:12:04.218642283-05:00"}
{"id":"reckon-2rs","title":"TUI: Implement task edit functionality (currently disabled)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:56:03.698904664-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:03.698904664-05:00"}
{"id":"reckon-34m","title":"Implement stale task review for journal task system","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-10T12:05:55.456506696-05:00","created_by":"chadd","updated_at":"2026-01-10T12:05:55.456506696-05:00"}
{"id":"reckon-3dc","title":"Implement integration tests for core functionality","description":"Create comprehensive integration test suite for existing functionality including CLI commands, database operations, file system integration, and TUI workflows.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T09:00:53.529841865-05:00","updated_at":"2025-12-29T14:52:52.472432382-05:00","closed_at":"2025-12-28T16:43:18.407952083-05:00"}
{"id":"reckon-3e9","title":"Phase 1.10: Implement file watcher for external changes","description":"Implement file watching using fsnotify to detect external changes to journal files.\n\n**Features**:\n- Watch ~/.reckon/journal/ directory\n- Debounce changes (100ms)\n- Re-index changed files to SQLite\n- Notify TUI to reload if current journal changed\n\n**Files**:\n- internal/sync/watcher.go\n- Integration with TUI model for live reload","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T17:17:32.866318663-05:00","updated_at":"2025-12-23T20:25:36.703764063-05:00","closed_at":"2025-12-23T20:25:36.703764063-05:00","close_reason":"Closed"}
{"id":"reckon-40n","title":"Redesign TUI model for new layout and components","description":"Redesign main TUI model to support 40-40-18 layout with new components.\n\n## File to Modify\n\n`internal/tui/model.go`\n\n## Struct Changes\n\n**Add fields:**\n```go\ntaskService  *journal.TaskService\ntaskList     *components.TaskList\nscheduleView *components.ScheduleView\ntextEntryBar *components.TextEntryBar\ntasks        []journal.Task  // cached tasks\n```\n\n**Remove fields:**\n```go\ninputMode    bool   // REMOVE - replaced by text entry bar focus\ninputType    string // REMOVE - replaced by text entry bar mode\ntextInput    textinput.Model // REMOVE - replaced by text entry bar\n```\n\n**Modify Section enum (add):**\n```go\nSectionTasks    Section = 3\nSectionSchedule Section = 4\n```\n\n## Init() Changes\n\n- Load tasks: Add `loadTasks()` tea.Cmd\n- Initialize text entry bar: `textEntryBar: components.NewTextEntryBar()`\n\n## View() Rewrite\n\n```go\nfunc (m *Model) View() string {\n    // Calculate dimensions\n    dims := layout.CalculatePaneDimensions(m.width, m.height)\n    \n    // Get pane views\n    logsView := m.logView.View()  // existing\n    tasksView := m.taskList.View()  // NEW\n    \n    // Stack right sidebar\n    m.scheduleView.SetSize(dims.RightWidth, dims.ScheduleHeight)\n    m.intentionList.SetSize(dims.RightWidth, dims.IntentionsHeight)\n    m.winsView.SetSize(dims.RightWidth, dims.WinsHeight)\n    \n    rightSidebar := lipgloss.JoinVertical(\n        lipgloss.Top,\n        m.scheduleView.View(),\n        m.intentionList.View(),\n        m.winsView.View(),\n    )\n    \n    // Join main panes horizontally\n    borderStyle := lipgloss.NewStyle().BorderRight(true)\n    content := lipgloss.JoinHorizontal(\n        lipgloss.Top,\n        borderStyle.Render(logsView),\n        borderStyle.Render(tasksView),\n        rightSidebar,\n    )\n    \n    // Add text entry bar\n    textEntry := m.textEntryBar.View()\n    \n    // Add status bar\n    status := m.statusBar.View()\n    \n    return content + \"\\n\" + textEntry + \"\\n\" + status\n}\n```\n\n## Update() Changes\n\n**Remove input mode handling** (lines 132-148)\n\n**Add keyboard shortcuts:**\n- `t`: Set text entry mode to task, focus\n- `n`: Add note to selected task (if in tasks section)\n\n**Modify existing shortcuts:**\n- `i`: Set text entry mode to intention, focus\n- `w`: Set text entry mode to win, focus\n- `L`: Set text entry mode to log, focus\n\n**Handle text entry:**\n- `enter`: Submit based on mode, blur text entry\n- `esc`: Blur text entry, clear mode\n\n**Delegate to components:**\n- When textEntryBar is focused, delegate to it\n- When in Tasks section, delegate to taskList\n\n**Add message handlers:**\n```go\ncase tasksLoadedMsg:\n    m.tasks = msg.tasks\n    m.taskList = components.NewTaskList(msg.tasks)\n    return m, nil\n\ncase taskToggledMsg:\n    return m, m.loadTasks()\n\ncase taskAddedMsg:\n    return m, m.loadTasks()\n```\n\n## New Message Types\n\n```go\ntype tasksLoadedMsg struct {\n    tasks []journal.Task\n}\n\ntype taskToggledMsg struct{}\ntype taskAddedMsg struct{}\ntype noteAddedMsg struct{}\n```\n\n## New Helper Functions\n\n```go\nfunc (m *Model) loadTasks() tea.Cmd {\n    return func() tea.Msg {\n        tasks, err := m.taskService.GetAllTasks()\n        if err != nil {\n            return errMsg{err}\n        }\n        return tasksLoadedMsg{tasks}\n    }\n}\n\nfunc (m *Model) submitTextEntry() tea.Cmd {\n    value := m.textEntryBar.GetValue()\n    if value == \"\" {\n        return nil\n    }\n    \n    mode := m.textEntryBar.mode\n    \n    return func() tea.Msg {\n        var err error\n        switch mode {\n        case components.ModeTask:\n            err = m.taskService.AddTask(value)\n            if err != nil {\n                return errMsg{err}\n            }\n            return taskAddedMsg{}\n        case components.ModeIntention:\n            err = m.service.AddIntention(m.currentJournal, value)\n            // ... existing logic\n        // ... other modes\n        }\n    }\n}\n```\n\n## Acceptance Criteria\n\n- Model uses new components (TaskList, ScheduleView, TextEntryBar)\n- View() renders 40-40-18 layout\n- Keyboard shortcuts focus text entry bar\n- Text entry submits correctly based on mode\n- Tasks load and display\n- Schedule items load and display\n- Removed input mode logic\n- Proper message handling for tasks\n\n## Dependencies\n\nRequires: All UI components (Layout, TaskList, ScheduleView, TextEntryBar)\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 4, Step 5.1-5.5)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:49:20.221850015-05:00","updated_at":"2025-12-29T16:28:52.121926992-05:00","closed_at":"2025-12-29T16:28:52.121926992-05:00","close_reason":"Implemented in PR #27 - TUI model redesigned for 40-40-18 layout with new components","dependencies":[{"issue_id":"reckon-40n","depends_on_id":"reckon-jaq","type":"blocks","created_at":"2025-12-23T19:49:42.153852581-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-ujt","type":"blocks","created_at":"2025-12-23T19:49:42.197948105-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-8id","type":"blocks","created_at":"2025-12-23T19:49:42.243092603-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-zx7","type":"blocks","created_at":"2025-12-23T19:49:42.288120014-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-fcm","type":"blocks","created_at":"2025-12-23T19:49:42.328686036-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-82m","type":"blocks","created_at":"2025-12-23T19:49:42.383409007-05:00","created_by":"daemon"}],"pinned":true}
{"id":"reckon-440","title":"Add task file storage methods","description":"Add file system operations for tasks.md.\n\n## File to Modify\n\n`internal/storage/filesystem.go`\n\n## Methods to Add\n\n1. `GetTasksPath() (string, error)`:\n   - Return path to tasks.md in reckon directory\n   - Pattern: `~/.reckon/tasks.md`\n   - Use existing helper for getting reckon directory\n\n2. `ReadTasksFile() (string, FileInfo, error)`:\n   - Read content from tasks.md\n   - Return content, file info (for last modified), and error\n   - Return empty string if file doesn't exist (not an error)\n\n3. `WriteTasksFile(content string) error`:\n   - Write content to tasks.md\n   - Create file if it doesn't exist\n   - Use atomic write if possible (write to temp, rename)\n\n## Implementation Details\n\n- Follow existing patterns from journal file operations\n- Use `os.UserHomeDir()` to get home directory\n- Handle file not existing gracefully (create on first write)\n- Ensure directory exists before writing\n\n## Acceptance Criteria\n\n- GetTasksPath returns correct path (~/.reckon/tasks.md)\n- ReadTasksFile reads existing file\n- ReadTasksFile returns empty content (no error) if file doesn't exist\n- WriteTasksFile creates file if needed\n- WriteTasksFile overwrites existing file\n\n## Dependencies\n\nNone (just file operations)\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 2.4)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:45:57.302327655-05:00","updated_at":"2025-12-23T21:50:52.194995862-05:00","closed_at":"2025-12-23T21:50:52.194995862-05:00","close_reason":"Closed"}
{"id":"reckon-4ay","title":"Wire up TaskService in main.go","description":"Wire up TaskService in application initialization.\n\n## File to Modify\n\n`cmd/rk/main.go` (or wherever TUI is initialized)\n\n## Changes\n\n**Create TaskService instance:**\n```go\n// After creating journal service...\ntaskRepo := journal.NewTaskRepository(db)\ntaskService := journal.NewTaskService(taskRepo, filesystem)\n```\n\n**Pass to TUI model:**\n```go\n// Modify NewModel call\nmodel := tui.NewModel(journalService, taskService)\n```\n\n**Update TUI NewModel signature:**\nIn `internal/tui/model.go`:\n```go\nfunc NewModel(service *journal.Service, taskService *journal.TaskService) *Model {\n    // ...\n    return \u0026Model{\n        service:     service,\n        taskService: taskService,\n        // ...\n    }\n}\n```\n\n## Implementation Details\n\n- TaskService requires TaskRepository and Filesystem\n- Same DB connection used for both services\n- Initialization order: DB → Filesystem → Repos → Services → TUI\n\n## Acceptance Criteria\n\n- TaskService properly initialized\n- Passed to TUI model\n- TUI can call taskService methods\n- No initialization errors\n\n## Dependencies\n\nRequires: TaskService, TaskRepository, TUI model with taskService field\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 5, Step 6.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:49:20.606271676-05:00","updated_at":"2025-12-28T15:30:18.919006553-05:00","closed_at":"2025-12-28T15:30:18.919006553-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-4ay","depends_on_id":"reckon-fcm","type":"blocks","created_at":"2025-12-23T19:49:42.669218521-05:00","created_by":"daemon"},{"issue_id":"reckon-4ay","depends_on_id":"reckon-40n","type":"blocks","created_at":"2025-12-23T19:49:42.72207231-05:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"reckon-4ay","author":"chadd","text":"Ticket completed successfully. Note: There are two task systems in this codebase: 1) task.Service for CLI commands (Phase 2), 2) journal.TaskService for TUI redesign (Phase 1). This creates complexity when wiring services. Current approach needs refinement to handle dual task systems properly, but for now task functionality works in CLI and TUI redesign dependencies are unblocked.","created_at":"2025-12-28T20:30:09Z"}]}
{"id":"reckon-4l1","title":"Initialize journal.TaskService in CLI to fix task pane not showing tasks","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T11:55:35.319102025-05:00","created_by":"chadd","updated_at":"2026-01-02T11:56:35.574823572-05:00","closed_at":"2026-01-02T11:56:35.574823572-05:00","close_reason":"Closed"}
{"id":"reckon-5aq","title":"Fix tasks not showing in task pane: Initialize journal.TaskService in TUI model","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T12:04:52.862518368-05:00","created_by":"chadd","updated_at":"2026-01-02T12:06:26.147123402-05:00","closed_at":"2026-01-02T12:06:26.147123402-05:00","close_reason":"Closed"}
{"id":"reckon-5q5","title":"Phase 4: Zettelkasten Notes","description":"Implement a knowledge base with searchable notes. Notes use wiki-style [[slug]] links and support full-text search via SQLite FTS5.\n\n**Requires Phase 1**: Uses parser, storage infrastructure. Independent of tasks.\n\n**Note File Format** (notes/\u003cslug\u003e.md):\n```markdown\n---\ntitle: Git interactive rebase workflow\ncreated: 2025-01-12\ntags: [git, workflow]\n---\n\nTo squash the last 3 commits:\n    git rebase -i HEAD~3\n\nChange 'pick' to 'squash' for commits to combine.\n\n## See Also\n- [[git-bisect-workflow]]\n- [[git-cherry-pick]]\n```\n\n**SQLite Additions**:\n```sql\nCREATE TABLE notes (slug TEXT PRIMARY KEY, title TEXT, created TEXT, file_path TEXT);\nCREATE TABLE note_tags (slug TEXT, tag TEXT, PRIMARY KEY (slug, tag));\nCREATE VIRTUAL TABLE notes_fts USING fts5(slug, title, content, tags);\n```\n\n**Features to Implement**:\n\n1. **Note Domain Model** (internal/note/)\n   - Note struct: slug, title, created, tags, content, links (extracted [[slug]] refs)\n   - NoteService: Create, GetBySlug, Search, ListByTag, ListAll\n\n2. **Note Parser/Writer** (internal/parser/)\n   - Parse frontmatter (title, created, tags)\n   - Extract [[slug]] links from content\n   - Slug generation from title (lowercase, hyphenated)\n\n3. **FTS5 Indexing** (internal/storage/)\n   - Index note content in FTS5 table on save/rebuild\n   - Search returns ranked results\n\n4. **Note Search Component** (internal/tui/components/note_search.go)\n   - Text input for search query\n   - Results list with title and snippet\n   - Enter to view note\n\n5. **Note View Component** (internal/tui/components/note_view.go)\n   - Display note content (markdown rendered or plain)\n   - [[slug]] links are navigable (Enter to follow)\n   - 'e' to edit in $EDITOR\n\n6. **Tag Browser** (internal/tui/components/tag_browser.go)\n   - List all tags with note counts\n   - Select tag to filter notes\n\n7. **Note Creation Flow**\n   - TUI: Ctrl+N in notes mode opens creation form\n   - CLI: rk note new \"title\" creates note, opens in $EDITOR\n\n8. **TUI Integration**\n   - New mode: Notes (switch with Ctrl+K or 'n' from main view)\n   - Notes mode shows: search bar, tag filter, note list, note preview\n\n9. **CLI Commands**:\n   - rk note new \"title\" - create note, output path, open in $EDITOR\n   - rk note search \"query\" - full-text search, output matching notes\n   - rk note list - list all notes (--tag filter)\n   - rk note show \u003cslug\u003e - output note content\n\n**Acceptance Criteria**:\n- Can create notes from TUI and CLI\n- Notes are stored as markdown in ~/.reckon/notes/\u003cslug\u003e.md\n- rk note search \"query\" returns FTS5 results\n- TUI has notes mode with search, tag filter, note list\n- [[slug]] links are detected and navigable in TUI\n- Tags are indexed and browsable\n- rk rebuild includes notes in FTS5 index","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-22T16:48:38.366620991-05:00","updated_at":"2026-01-02T10:52:32.143768392-05:00","dependencies":[{"issue_id":"reckon-5q5","depends_on_id":"reckon-a39","type":"blocks","created_at":"2025-12-22T16:49:06.731839147-05:00","created_by":"daemon"}],"pinned":true}
{"id":"reckon-6bd","title":"Fix Task Expansion in TUI (Enter Key)","description":"Users cannot expand tasks to view notes when pressing Enter in the task pane. Root cause: Potential issues with key binding not firing, tasks lacking notes, or cursor jumping masking the expansion. Solution: Add logging to confirm Enter key events; verify tasks have notes; fix cursor preservation in UpdateTasks() to prevent selection jumping; ensure buildTaskItems() rebuilds UI properly. Files: task_list.go, model.go. Test: Enter should immediately show/hide notes without cursor movement.","status":"closed","priority":1,"issue_type":"task","assignee":"chadd","created_at":"2026-01-10T14:54:45.925210366-05:00","created_by":"chadd","updated_at":"2026-01-10T15:06:03.473426774-05:00","closed_at":"2026-01-10T15:06:03.473426774-05:00","close_reason":"Completed in PR #60"}
{"id":"reckon-6ql","title":"Log Entry Notes Feature","description":"Add ability to attach notes to log entries for detailed context tracking.\n\n## Overview\nNotes stored inline in journal markdown as nested bullets (following TaskNote pattern). \nTUI supports adding, viewing (collapsible), and deleting notes.\nDesign allows future upgrade to zettelkasten cards.\n\n## User Requirements\n- Hybrid approach: Simple text notes now, structured for future zettelkasten\n- Interface: TUI (press 'n') and manual markdown editing\n- Storage: Inline in journal markdown as nested bullets\n- Independent notes per log entry\n\n## Example Markdown\n```\n- 17:16 Helping Drew with data issue\n  - [note-id] Called Drew about db performance\n  - [note-id] Applied index on email column\n```\n\n## Success Criteria\n✅ Notes stored inline in journal markdown\n✅ Notes indexed in SQLite\n✅ TUI: add ('n'), collapse ('enter'), delete ('d')\n✅ Manual markdown edits parsed correctly\n✅ Notes persist across restarts\n✅ All tests pass\n\n## Plan\nDetailed plan: ~/.claude/plans/swift-soaring-firefly.md","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-06T11:05:42.698223745-05:00","created_by":"chadd","updated_at":"2026-01-10T13:41:46.538019301-05:00","closed_at":"2026-01-10T13:41:46.538019301-05:00","close_reason":"Completed in PR #59"}
{"id":"reckon-7hf","title":"Test backward compatibility and create migration guide","description":"Test backward compatibility with existing journals and document migration.\n\n## Testing Tasks\n\n**1. Test with existing journals:**\n- Open journal files created before this change\n- Verify Intentions, Wins, Logs still parse and display\n- Verify no errors or data loss\n\n**2. Test adding Schedule to old journals:**\n- Open old journal\n- Add schedule item via TUI\n- Verify ## Schedule section added correctly\n- Verify file still readable\n\n**3. Test empty state:**\n- Start with no tasks.md\n- Add first task via TUI\n- Verify tasks.md created correctly\n\n**4. Test database migration:**\n- Verify new tables created automatically\n- No errors on first run with new schema\n\n**5. Test edge cases:**\n- Very long task text\n- Task with many notes\n- Empty schedule section\n- Journal with only some sections\n\n## Create Migration Guide\n\n**File to create:** `docs/migration-tui-redesign.md`\n\n**Content:**\n```markdown\n# TUI Redesign Migration Guide\n\n## What's New\n\n- New 40-40-18 layout (Logs | Tasks | Sidebar)\n- Tasks: General todo list with nested notes\n- Schedule: Upcoming items in daily journals\n- Always-visible text entry bar\n\n## For Existing Users\n\n### Automatic Changes\n\n- New database tables created automatically\n- Existing journals unchanged and fully compatible\n- No data migration needed\n\n### New Files\n\n- `~/.reckon/tasks.md` - Created on first task add\n\n### New Keyboard Shortcuts\n\n- `t` - Add task\n- `n` - Add note to selected task\n- `enter` - Expand/collapse task (in Tasks section)\n\n### Updated Sections\n\nDaily journals now support optional `## Schedule` section:\n\\```markdown\n## Schedule\n\n- 09:00 Morning standup\n- 14:00 Client meeting\n\\```\n\n## Rollback\n\nIf needed, you can roll back without data loss:\n- Old journal files remain valid\n- New tables are separate (won't affect old code)\n- Can delete `tasks.md` if desired\n```\n\n## Acceptance Criteria\n\n- Existing journals open without errors\n- Schedule section can be added to old journals\n- New database schema applies without manual intervention\n- tasks.md created on demand\n- Migration guide documented\n- Edge cases tested\n- No data loss scenarios\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 5, Step 6.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:49:21.263353227-05:00","updated_at":"2025-12-29T14:52:52.474526742-05:00","closed_at":"2025-12-28T16:46:28.247931354-05:00","dependencies":[{"issue_id":"reckon-7hf","depends_on_id":"reckon-4ay","type":"blocks","created_at":"2025-12-23T19:49:42.827359803-05:00","created_by":"daemon"},{"issue_id":"reckon-7hf","depends_on_id":"reckon-95p","type":"blocks","created_at":"2025-12-23T19:49:42.881070621-05:00","created_by":"daemon"}]}
{"id":"reckon-7pa","title":"Make text left-justified in TUI panes: Change centerView alignment from center to left/top","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T12:04:53.231928706-05:00","created_by":"chadd","updated_at":"2026-01-02T12:06:27.404100573-05:00","closed_at":"2026-01-02T12:06:27.404100573-05:00","close_reason":"Closed"}
{"id":"reckon-82m","title":"Extend JournalService for schedule items","description":"Extend journal service to support schedule items.\n\n## File to Modify\n\n`internal/journal/service.go`\n\n## Methods to Add\n\n```go\n// AddScheduleItem adds a schedule item to the journal\nfunc (s *Service) AddScheduleItem(j *Journal, timeStr string, content string) error\n\n// DeleteScheduleItem removes a schedule item from the journal\nfunc (s *Service) DeleteScheduleItem(j *Journal, itemID string) error\n```\n\n## Method to Modify\n\n`GetByDate(date string) (*Journal, error)`:\n- Load schedule items from DB via repository\n- Populate j.ScheduleItems\n\n`save(j *Journal) error`:\n- Save schedule items to DB via repository\n\n## Implementation Details\n\n**AddScheduleItem:**\n1. Parse timeStr (HH:MM format, or empty)\n2. Create ScheduleItem with generated ID\n3. Set position = len(j.ScheduleItems)\n4. Append to j.ScheduleItems\n5. Call save()\n\n**DeleteScheduleItem:**\n1. Find item in j.ScheduleItems by ID\n2. Remove from slice\n3. Re-index positions\n4. Call save()\n\n**GetByDate modification:**\n- After loading journal, query schedule items from DB\n- Set j.ScheduleItems\n\n**save modification:**\n- After saving file, persist schedule items to DB\n\n## Acceptance Criteria\n\n- AddScheduleItem creates and persists schedule item\n- DeleteScheduleItem removes and updates positions\n- GetByDate loads schedule items from DB\n- save() persists schedule items to DB\n- Integration with existing save/load flow\n\n## Dependencies\n\nRequires: ScheduleItem model, journal parser/writer extensions, repository methods for schedule\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 2, Step 3.2)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:46:29.317097543-05:00","updated_at":"2025-12-29T14:52:52.477276367-05:00","closed_at":"2025-12-28T19:49:33.975421035-05:00","close_reason":"JournalService extended with comprehensive schedule item support including AddScheduleItem, DeleteScheduleItem, repository methods, validation, and optimizations. All critical and high-priority code review issues addressed. 9+ comprehensive tests passing. PR #23 merged to main.","dependencies":[{"issue_id":"reckon-82m","depends_on_id":"reckon-mpn","type":"blocks","created_at":"2025-12-23T19:49:41.764099934-05:00","created_by":"daemon"},{"issue_id":"reckon-82m","depends_on_id":"reckon-aww","type":"blocks","created_at":"2025-12-23T19:49:41.814528668-05:00","created_by":"daemon"}]}
{"id":"reckon-86e","title":"Interactive review ignores reason/note input","description":"In internal/cli/review.go, the 'w' (waiting) and 'n' (note) actions read user input via fmt.Scanln but: 1) Error from Scanln is ignored, 2) The reason variable for 'w' is read but never saved (should be logged), 3) Same for note in 'n' - it's read but AppendLog doesn't receive it.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T21:42:24.548695034-05:00","created_by":"chadd","updated_at":"2026-01-08T21:36:14.385468605-05:00","closed_at":"2026-01-08T21:36:14.385468605-05:00","close_reason":"Closed"}
{"id":"reckon-8fg","title":"CLI: Compact task output + JSON mode","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:19.21736486-05:00","created_by":"chadd","updated_at":"2026-01-03T12:27:26.711220194-05:00","closed_at":"2026-01-03T12:27:26.711220194-05:00","close_reason":"Completed in PR #39","dependencies":[{"issue_id":"reckon-8fg","depends_on_id":"reckon-g1y","type":"blocks","created_at":"2026-01-02T17:11:30.357459398-05:00","created_by":"chadd"}]}
{"id":"reckon-8id","title":"Create ScheduleView component","description":"Create ScheduleView Bubble Tea component for displaying schedule items.\n\n## File to Create\n\n`internal/tui/components/schedule_view.go`\n\n## Component Structure\n\n```go\ntype ScheduleView struct {\n    items  []journal.ScheduleItem\n    width  int\n    height int\n}\n\nfunc NewScheduleView(items []journal.ScheduleItem) *ScheduleView\nfunc (sv *ScheduleView) Update(msg tea.Msg) (*ScheduleView, tea.Cmd)\nfunc (sv *ScheduleView) View() string\nfunc (sv *ScheduleView) SetSize(width, height int)\nfunc (sv *ScheduleView) UpdateSchedule(items []journal.ScheduleItem)\n```\n\n## Rendering\n\n- Title: \"Schedule\" (styled with lipgloss)\n- Format: `HH:MM Content` or just `Content` (if no time)\n- Simple list (no interaction needed initially)\n- Truncate long content with \"...\" if needed\n- Show empty state: \"No schedule items\"\n\n## Implementation Details\n\n- Simpler than TaskList (no selection/interaction)\n- Sort items by time before rendering\n- Use lipgloss for styling (consistent with other components)\n- Handle items with and without time\n- Follow pattern from `internal/tui/components/wins_view.go`\n\n## Styling\n\n```go\nscheduleStyle = lipgloss.NewStyle().\n    Foreground(lipgloss.Color(\"39\")).\n    Bold(true)\n\nitemStyle = lipgloss.NewStyle().\n    Foreground(lipgloss.Color(\"252\"))\n```\n\n## Acceptance Criteria\n\n- Displays schedule items with time (HH:MM format)\n- Displays items without time\n- Shows title \"Schedule\"\n- Handles empty schedule\n- Truncates long text to fit width\n- Sorted by time\n\n## Dependencies\n\nRequires: ScheduleItem model\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 3, Step 4.2)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:47:16.121646485-05:00","updated_at":"2025-12-28T16:31:11.962218688-05:00","closed_at":"2025-12-28T16:31:11.962218688-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-8id","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:42.105679818-05:00","created_by":"daemon"}]}
{"id":"reckon-8ji","title":"Add bordered boxes around main layout panes (Logs, Tasks)","description":"Modify renderNewLayout() in internal/tui/model.go to wrap the Logs and Tasks panes in bordered boxes.\n\n**Current behavior:**\n- Only borderRight styling applied\n- No full boxes around sections\n- Components don't visually fill their space\n\n**Desired behavior:**\n- Each pane (Logs, Tasks) wrapped in lipgloss bordered box\n- Use lipgloss.NewStyle().Border(lipgloss.NormalBorder())\n- Set explicit Width() and Height() on box styles to match calculated pane dimensions\n- Boxes should fill the entire allocated space even when content is minimal\n\n**Implementation:**\n- In model.go:renderNewLayout(), wrap logsView in bordered box with dims.LogsWidth and dims.LogsHeight\n- Wrap tasksView in bordered box with dims.TasksWidth and dims.TasksHeight\n- Use lipgloss.Place() if needed to ensure content is positioned properly within the box\n\n**Acceptance Criteria:**\n- Logs pane has visible border on all sides\n- Tasks pane has visible border on all sides\n- Boxes maintain their dimensions regardless of content","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:20.936554628-05:00","created_by":"chadd","updated_at":"2026-01-02T10:58:23.504817647-05:00","closed_at":"2026-01-02T10:58:23.504817647-05:00","close_reason":"Implemented bordered boxes around Logs and Tasks panes. PR #33 created and ready for merge.","pinned":true}
{"id":"reckon-8kq","title":"Improve CLI log entry UX with inline mini-TUI","description":"## Problem\n\nThe interactive log entry CLI (`rk log` without arguments) has poor UX:\n- No obvious way to complete the interaction\n- User must use Ctrl-D to finish, which is not intuitive\n- Plain stdin input with no visual feedback or guidance\n\n## Desired Behavior\n\nReplace the current stdin-based input with a small-scale inline TUI that:\n1. Does NOT clear or fill the terminal (unlike the full TUI)\n2. Renders a compact input box in the lower portion of the terminal\n3. Shows clear instructions for completing entry (e.g., \"Enter to submit, Esc to cancel\")\n4. Returns to the normal terminal state after completion\n\nThink of it like a mini prompt overlay, not a full-screen takeover.\n\n## Current Implementation\n\n- **CLI command**: `internal/cli/log.go` - currently uses simple stdin for input\n- **TUI text entry**: `internal/tui/components/text_entry_bar.go` - has the text input component using Charmbracelet's textinput library\n- Uses Bubble Tea framework for TUI\n\n## Technical Approach Options\n\n1. **Inline Bubble Tea Program**: Create a minimal Bubble Tea program that only renders 2-3 lines at the bottom of the terminal without clearing existing content. Use `tea.WithAltScreen(false)` to avoid fullscreen mode.\n\n2. **Charmbracelet Huh Forms**: The `huh` library provides inline form inputs that don't take over the terminal. Could use `huh.NewInput()` for a cleaner experience.\n\n3. **Simple ANSI Box**: Use lipgloss to render a styled input box, combined with a custom input handler that shows the box inline.\n\n## Acceptance Criteria\n\n- [ ] `rk log` (no args) opens an inline input prompt\n- [ ] Input box shows at current cursor position or bottom of visible terminal\n- [ ] Clear visual indication of how to submit (Enter) and cancel (Esc)\n- [ ] Terminal content above the input remains visible\n- [ ] After submission, terminal returns to normal state (no clearing)\n- [ ] Existing `rk log \"message\"` non-interactive mode still works\n\n## Files to Modify\n\n- `internal/cli/log.go` - Add inline TUI mode when no message argument provided\n- Possibly create new component in `internal/tui/components/` if reusable\n\n## Testing\n\n- Test inline input appears without clearing terminal\n- Test Enter submits and logs the entry\n- Test Esc cancels without logging\n- Test non-interactive mode (`rk log \"message\"`) still works","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T17:19:58.121826734-05:00","created_by":"chadd","updated_at":"2026-01-10T11:50:01.072903123-05:00","closed_at":"2026-01-10T11:50:01.072903123-05:00","close_reason":"Completed in PR #50"}
{"id":"reckon-8ug","title":"TUI: Status bar hints are context-insensitive","description":"The status bar shows the same hints regardless of current section or mode.\n\nCurrent: All hints shown all the time\n  'q:quit tab:switch i:intention w:win L:log h/l:nav t:today ?:help enter:toggle'\n\nIssues:\n- enter:toggle only works in Intentions section, not Wins or Logs\n- Hints don't change based on focused section\n- Input mode shows separate prompt but could be integrated\n\nImprovements:\n1. Show section-specific hints based on focusedSection\n2. Update hints in input mode to show editing keys\n3. Consider showing section name in status bar\n\nExample for Intentions section:\n  'Intentions | q:quit tab:switch enter:toggle j/k:nav i:add h/l:day t:today'\n\nThis helps users understand context-specific actions.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T19:27:13.560455554-05:00","updated_at":"2025-12-29T14:52:52.478972889-05:00","closed_at":"2025-12-28T16:41:08.442936109-05:00"}
{"id":"reckon-90o","title":"Refactor: Extract shared collapse/expand behavior from task_list and log_view","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T16:56:10.263539023-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:10.263539023-05:00"}
{"id":"reckon-90q","title":"TUI: Remove unused logInput field","description":"Model has an unused field that's never initialized or used.\n\nLocation: internal/tui/model.go:34\n\n\nThis was likely leftover from an earlier implementation approach. Should be removed to clean up the code.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T18:53:21.96824436-05:00","updated_at":"2025-12-22T19:34:34.825145269-05:00","closed_at":"2025-12-22T19:34:34.825145269-05:00","close_reason":"Fixed: Removed unused inputText field, now using textInput throughout."}
{"id":"reckon-92t","title":"Phase 5: Periodic Review","description":"Surface stale tasks and prompt the user to triage them. Helps maintain a clean task list and prevents tasks from being forgotten.\n\n**Requires Phase 2**: Uses task infrastructure to query stale tasks.\n\n**Features to Implement**:\n\n1. **Stale Task Query** (internal/task/)\n   - FindStaleTasks(days int): tasks with no log entries in N days\n   - Default: 7 days for active, 30 days for waiting\n   - Exclude 'someday' tasks from stale detection\n\n2. **Review TUI Mode** (internal/tui/components/review.go)\n   - List of stale tasks with last activity date\n   - For each task, quick actions:\n     - 'd' - mark done\n     - 's' - move to someday\n     - 'w' - mark waiting (prompts for reason)\n     - 'n' - add note/update\n     - 'x' - delete task\n     - Space - skip to next\n   - Batch mode: review all stale tasks in sequence\n\n3. **Weekly Review Prompt**\n   - Track last_review_date in config/db\n   - On first launch of the week (Monday), show prompt: \"You have X stale tasks. Review now? (y/n)\"\n   - 'y' enters review mode, 'n' dismisses until next week\n\n4. **Review Summary**\n   - After review session, show summary: \"Reviewed X tasks: Y done, Z deferred, W deleted\"\n\n5. **CLI Commands**:\n   - rk review - launch review mode (or output stale tasks if not TTY)\n   - rk review --list - just list stale tasks without interactive mode\n\n**Acceptance Criteria**:\n- rk review shows tasks with no activity in 7+ days\n- Can mark tasks done/waiting/someday from review mode\n- Can delete tasks from review mode\n- Weekly prompt appears on first Monday launch\n- Review summary shows what was triaged\n- rk review --list outputs stale tasks for scripting","status":"closed","priority":3,"issue_type":"feature","assignee":"chadd","created_at":"2025-12-22T16:48:50.894281259-05:00","updated_at":"2026-01-03T12:37:40.952574444-05:00","closed_at":"2026-01-03T12:37:40.952574444-05:00","close_reason":"Completed in PR #43","dependencies":[{"issue_id":"reckon-92t","depends_on_id":"reckon-9cn","type":"blocks","created_at":"2025-12-22T16:49:06.988538091-05:00","created_by":"daemon"}]}
{"id":"reckon-95p","title":"Update help view and documentation for new TUI","description":"Update help view to reflect new keyboard shortcuts and layout.\n\n## File to Modify\n\n`internal/tui/model.go` (helpView() function)\n\n## New Help Text\n\n```\nHelp - Key Bindings:\n\nNavigation:\n  h, ←       Previous day\n  l, →       Next day\n  t          Jump to today\n  tab        Next section\n  shift+tab  Previous section\n  j, k       Navigate within section\n\nActions:\n  t          Add task\n  i          Add intention\n  w          Add win\n  L          Add log entry\n  n          Add note to selected task (Tasks section)\n  space      Toggle task/intention (Tasks/Intentions section)\n  enter      Expand/collapse task (Tasks section)\n\nText Entry:\n  enter      Submit entry\n  esc        Cancel entry\n  any key    Type character\n\nGeneral:\n  q, ctrl+c  Quit\n  ?          Toggle help\n\nSections:\n  - Logs: Activity log with timestamps\n  - Tasks: General todo list with collapsible notes\n  - Schedule: Upcoming items for the day\n  - Intentions: 1-3 focus tasks for today\n  - Wins: Daily accomplishments\n\nPress ? to exit help.\n```\n\n## Also Update\n\n- README.md: Update screenshots/description if present\n- AGENTS.md: No changes needed (workflow unchanged)\n\n## Acceptance Criteria\n\n- Help text shows all new shortcuts\n- Describes new sections (Tasks, Schedule)\n- Explains text entry bar usage\n- Accurate key bindings\n- Clear section descriptions\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 5)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:49:20.929976834-05:00","updated_at":"2025-12-29T19:45:37.393673874-05:00","closed_at":"2025-12-29T19:45:37.393673874-05:00","close_reason":"Implemented in PR #28 - updated help view and README for new TUI","dependencies":[{"issue_id":"reckon-95p","depends_on_id":"reckon-40n","type":"blocks","created_at":"2025-12-23T19:49:42.772986217-05:00","created_by":"daemon"}],"pinned":true}
{"id":"reckon-9cl","title":"TUI: Replace magic number with constant in section cycling","description":"Section cycling uses magic number 3 that's not obvious or maintainable.\n\nLocation: internal/tui/model.go:134\n\n\nShould either:\n1. Define constant: \n2. Calculate from actual sections\n3. Use an enum/iota-based approach\n\nMakes code more maintainable if sections are added/removed.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T18:53:25.43575798-05:00","updated_at":"2025-12-22T19:34:35.125603476-05:00","closed_at":"2025-12-22T19:34:35.125603476-05:00","close_reason":"Fixed: Now using SectionCount constant instead of magic number 3."}
{"id":"reckon-9cn","title":"Phase 2: Task Management","description":"Add multi-day task tracking. Tasks are separate markdown files with their own log history. Log entries can be linked to tasks and appear in both the task file and daily journal.\n\n**Requires Phase 1**: Uses parser, storage, and TUI infrastructure from Phase 1.\n\n**Task File Format** (tasks/\u003cid\u003e.md):\n```markdown\n---\nid: abc123\ntitle: API refactor for v2 endpoints\ncreated: 2025-01-10\nstatus: active\ntags: [backend, api]\n---\n\n## Description\nRefactor the v2 endpoints to use the new middleware pattern.\n\n## Log\n\n### 2025-01-10\n- 14:00 Created task, outlined approach\n\n### 2025-01-14\n- 09:00 Resumed work\n```\n\n**Task Statuses**: active, done, waiting, someday\n\n**SQLite Additions**:\n```sql\nCREATE TABLE tasks (id TEXT PRIMARY KEY, title TEXT, status TEXT, created TEXT, file_path TEXT);\nCREATE TABLE task_tags (task_id TEXT, tag TEXT, PRIMARY KEY (task_id, tag));\nCREATE TABLE task_log_entries (id TEXT PRIMARY KEY, task_id TEXT, date TEXT, timestamp TEXT, content TEXT);\n```\n\n**Features to Implement**:\n\n1. **Task Domain Model** (internal/task/)\n   - Task struct with id, title, status, created, tags, description, log entries\n   - TaskService: Create, GetByID, List (filter by status/tags), UpdateStatus, AppendLog\n\n2. **Task Parser/Writer** (internal/parser/)\n   - Parse task frontmatter (id, title, created, status, tags array)\n   - Parse description section\n   - Parse log section (grouped by date)\n\n3. **Dual-Write Logic**\n   - When logging to a task, entry goes to BOTH:\n     - Task file under appropriate date header\n     - Daily journal with [task:id] prefix\n   - TaskService coordinates this\n\n4. **Task Picker Component** (internal/tui/components/task_picker.go)\n   - Fuzzy-searchable list of active tasks\n   - Used when starting work on a task or logging to specific task\n\n5. **Two-Pane TUI Layout**\n   - Left pane: daily journal (existing)\n   - Right pane: current task (when selected)\n   - Tab switches between panes\n   - Ctrl+T opens task picker\n\n6. **Task Creation Flow**\n   - From TUI: Ctrl+N opens task creation form (title, tags)\n   - From CLI: rk task new \"title\" --tags=backend,api\n   - Can also promote an intention to a task\n\n7. **CLI Commands**:\n   - rk task new \"title\" - create task, outputs task ID\n   - rk task list - list active tasks (--status, --tag filters)\n   - rk task show \u003cid\u003e - output task details\n   - rk task log \u003cid\u003e \"msg\" - append to task log (also adds to today's journal)\n   - rk task done \u003cid\u003e - mark task complete\n\n**Acceptance Criteria**:\n- Can create tasks from TUI and CLI\n- Task picker allows fuzzy search of active tasks\n- Two-pane view shows journal and current task\n- Logging to task writes to both task file and daily journal\n- rk task list shows active tasks\n- rk task log \u003cid\u003e \"msg\" works from CLI\n- Task status transitions work (active → done/waiting/someday)\n- Can filter tasks by tag","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T16:47:07.626775343-05:00","updated_at":"2025-12-24T09:59:51.742318005-05:00","closed_at":"2025-12-24T09:59:51.742318005-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-9cn","depends_on_id":"reckon-a39","type":"blocks","created_at":"2025-12-22T16:49:06.147251564-05:00","created_by":"daemon"}]}
{"id":"reckon-9cx","title":"CLI: Interactive input mode for log/task commands","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:18.215463516-05:00","created_by":"chadd","updated_at":"2026-01-03T12:22:59.436470387-05:00","closed_at":"2026-01-03T12:22:59.436470387-05:00","close_reason":"Completed in PR #37","dependencies":[{"issue_id":"reckon-9cx","depends_on_id":"reckon-iat","type":"blocks","created_at":"2026-01-02T17:11:30.031312079-05:00","created_by":"chadd"}]}
{"id":"reckon-9n6","title":"Create task file parser and writer","description":"Create parser and writer for tasks.md file with support for nested notes.\n\n## Files to Create\n\n1. `internal/journal/task_parser.go`:\n   - `ParseTasksFile(content string) ([]Task, error)` - Parse tasks.md content\n   - `WriteTasksFile(tasks []Task) string` - Serialize tasks to markdown\n   \n## File Format\n\n```markdown\n# Tasks\n\n- [ ] task-id-1 Task 1 text\n- [ ] task-id-2 Task 2 text\n  - note-id-1 Note for task 2\n  - note-id-2 Another note\n- [x] task-id-3 Completed task\n```\n\n## Implementation Details\n\n- Parse checkbox status: `[ ]` (open), `[x]` (done)\n- Support nested notes with 2-space indentation\n- Extract task ID from the line (embedded in text for now)\n- Generate IDs using xid (consistent with existing code)\n- Sort by position when writing\n- Follow existing parser patterns from `internal/journal/parser.go`\n\n## Acceptance Criteria\n\n- Parses tasks with checkboxes and status\n- Parses nested notes with 2-space indentation\n- Writes tasks with proper formatting and indentation\n- Handles empty tasks list\n- Handles tasks with no notes\n\n## Dependencies\n\nRequires: Task and TaskNote models from previous ticket\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 2.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:43:46.317036065-05:00","updated_at":"2025-12-27T20:20:04.12685438-05:00","closed_at":"2025-12-27T20:20:04.12685438-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-9n6","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:41.441764884-05:00","created_by":"daemon"}]}
{"id":"reckon-9pr","title":"Fix vertical space filling for bordered panes - content not centering properly within allocated height","description":"## Problem\nThe bordered panes (Logs, Tasks, Schedule, Intentions, Wins) have visible borders but are not filling their full allocated vertical height. Content appears to be floating at the top of each pane with empty space below.\n\nAdditionally, the 3 rightmost panes (Schedule, Intentions, Wins) are not sharing vertical space evenly - they use a 30-35-35 split instead of equal thirds.\n\n## Root Cause\nCurrent implementation in renderNewLayout() has incorrect lipgloss usage:\n- Setting Width/Height on border styles doesn't pad content to fill space\n- Double placement with lipgloss.Place() is redundant and ineffective\n- Content needs to be explicitly centered within the allocated inner dimensions before applying borders\n\n## Solution\nRefactor renderNewLayout() to properly fill vertical space:\n1. For each pane, calculate inner dimensions (allocated_width - 2, allocated_height - 2)\n2. Use lipgloss.Place(inner_width, inner_height, Center, Center, content) to center content within inner space\n3. Apply border style to the placed content: lipgloss.NewStyle().Border().Render(placed_content)\n4. Update right sidebar layout to use equal thirds (33.3% each) for Schedule, Intentions, Wins panes\n\n## Files to Change\n- internal/tui/model.go: renderNewLayout() function\n- internal/tui/layout.go: Update CalculatePaneDimensions() to use equal thirds for right sidebar\n\n## Acceptance Criteria\n- All 5 panes (Logs, Tasks, Schedule, Intentions, Wins) fill their full allocated vertical height\n- Content is centered within each bordered pane\n- No empty space visible below content in any pane\n- Empty state messages are centered in the middle of their panes\n- Borders remain visible and properly sized\n- Right sidebar panes share vertical space evenly (equal thirds: Schedule, Intentions, Wins)","notes":"Depends on reckon-uf8 (Ensure all components fill allocated vertical space)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:31:05.535825764-05:00","created_by":"chadd","updated_at":"2026-01-02T11:40:10.875800551-05:00","closed_at":"2026-01-02T11:40:10.875800551-05:00","close_reason":"Closed"}
{"id":"reckon-9ts","title":"Add Log Expansion in TUI (Enter Key)","description":"Users expect to expand logs like tasks to view notes, but Enter/Space do nothing in log view. Root cause: Expansion logic not implemented for logs. Solution: Add expansion logic similar to tasks: toggle collapsedMap, rebuild items, show notes under expanded entries; update help text. Files: log_view.go. Test: Enter on logs should show/hide notes like tasks.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T14:54:51.145410384-05:00","created_by":"chadd","updated_at":"2026-01-10T14:54:51.145410384-05:00"}
{"id":"reckon-a1y","title":"TUI: Inconsistent error handling in date navigation","description":"Date parsing errors in navigation functions are silently ignored.\n\nLocations:\n- internal/tui/model.go:240 (prevDay)\n- internal/tui/model.go:247 (nextDay)\n\nBoth functions use:\n  date, _ := time.Parse(...)\n\nIf m.currentDate is corrupted or invalid, these will fail silently and navigation will break in confusing ways.\n\nShould either:\n1. Return errors to be handled by caller\n2. Log the error\n3. Fall back to today's date\n\nRelated to reckon-re2 (general error handling improvements).","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T19:27:13.206070635-05:00","updated_at":"2025-12-29T14:52:52.482144748-05:00","closed_at":"2025-12-29T14:44:40.127567619-05:00","close_reason":"Fixed in PR #25 - added error handling with fallback to today's date"}
{"id":"reckon-a21","title":"Implement data model and database schema for log notes","description":"Foundation: Add LogNote struct and database schema.\n\n## Files to Modify\n- `internal/journal/models.go` - Add LogNote struct, update LogEntry\n- `internal/storage/database.go` - Add log_notes table and index\n\n## Changes\n\n### models.go (after line 141)\nAdd LogNote struct:\n```go\ntype LogNote struct {\n    ID       string\n    Text     string\n    Position int\n    // Future: NoteSlug string for zettelkasten\n}\n\nfunc NewLogNote(text string, position int) *LogNote\n```\n\nUpdate LogEntry (line 67-75):\n- Add `Notes []LogNote` field\n- Initialize in NewLogEntry constructor\n\n### database.go\nAdd after task_notes table (line 67):\n```sql\nCREATE TABLE IF NOT EXISTS log_notes (\n    id TEXT PRIMARY KEY,\n    log_entry_id TEXT NOT NULL,\n    text TEXT NOT NULL,\n    position INTEGER NOT NULL,\n    FOREIGN KEY (log_entry_id) REFERENCES log_entries(id) ON DELETE CASCADE\n);\n```\n\nAdd index (line 119):\n```sql\nCREATE INDEX IF NOT EXISTS idx_log_notes_entry ON log_notes(log_entry_id);\n```\n\n## Testing\n- Verify LogNote constructor generates unique IDs\n- Verify database schema creates without errors\n- Verify foreign key cascade deletion works","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:20.123553193-05:00","created_by":"chadd","updated_at":"2026-01-06T15:31:23.838588306-05:00","closed_at":"2026-01-06T15:31:23.838588306-05:00","close_reason":"Implemented LogNote struct, database schema, and comprehensive tests. Foundation complete for repository and parser layers."}
{"id":"reckon-a39","title":"Phase 1: Daily Journal MVP","description":"Implement the core daily journaling system - the foundation of Reckon. This creates a TUI for viewing/editing daily journals and CLI commands for scripting.\n\n**Storage Model**:\n- Data directory: ~/.reckon/\n- Journal files: ~/.reckon/journal/YYYY-MM-DD.md\n- SQLite index: ~/.reckon/reckon.db\n- Markdown is source of truth; SQLite is rebuildable via rk rebuild\n\n**Journal File Format** (journal/2025-01-15.md):\n```markdown\n---\ndate: 2025-01-15\n---\n\n## Intentions\n- [ ] Open task (unchecked)\n- [x] Completed task (checked)\n- [\u003e] Carried from previous day\n\n## Wins\n- Something accomplished\n\n## Log\n- 09:00 Started day\n- 10:30 [meeting:standup] 30m\n- 14:00 [task:abc123] Working on feature\n```\n\n**SQLite Schema**:\n```sql\nCREATE TABLE journals (date TEXT PRIMARY KEY, file_path TEXT, last_modified INTEGER);\nCREATE TABLE intentions (id TEXT PRIMARY KEY, journal_date TEXT, text TEXT, status TEXT, carried_from TEXT, position INTEGER);\nCREATE TABLE log_entries (id TEXT PRIMARY KEY, journal_date TEXT, timestamp TEXT, content TEXT, task_id TEXT, entry_type TEXT, duration_minutes INTEGER, position INTEGER);\nCREATE TABLE wins (id TEXT PRIMARY KEY, journal_date TEXT, text TEXT, position INTEGER);\n```\n\n**Features to Implement**:\n\n1. **Project Setup**\n   - Initialize Go module, create directory structure per plan\n   - Dependencies: bubbletea, lipgloss, bubbles, cobra, goldmark, fsnotify, xid, modernc.org/sqlite\n\n2. **Config \u0026 Paths** (internal/config/)\n   - DataDir(), JournalDir(), DatabasePath() helpers\n   - Auto-create directories on first run\n\n3. **Domain Models** (internal/journal/)\n   - Journal, Intention (open/done/carried), LogEntry (log/meeting/break), Win\n   - ID generation using xid\n\n4. **Markdown Parser** (internal/parser/)\n   - Parse YAML frontmatter (date)\n   - Parse sections by H2 headers (Intentions, Wins, Log)\n   - Parse intention markers: [ ], [x], [\u003e]\n   - Parse log entries: timestamp, optional [meeting:name], [task:id], duration 30m\n\n5. **Markdown Writer** (internal/parser/)\n   - Serialize Journal back to markdown format\n   - Round-trip must preserve content\n\n6. **Storage Layer** (internal/storage/)\n   - Filesystem: read/write markdown files\n   - SQLite: connection with WAL mode, migrations, repository pattern\n\n7. **Journal Service** (internal/journal/service.go)\n   - GetToday(), GetByDate(date), AppendLog(content), AddIntention(text), ToggleIntention(id), AddWin(text)\n   - Dual-write: update markdown file AND SQLite\n   - Auto-carry: when opening a new day, copy open intentions from yesterday as [\u003e]\n\n8. **CLI Commands** (internal/cli/)\n   - rk log \"msg\" - append timestamped entry to today's log\n   - rk today - output today's journal to stdout (for LLM piping)\n   - rk week - output last 7 days to stdout\n   - rk rebuild - delete and regenerate SQLite from all markdown files\n\n9. **TUI** (internal/tui/)\n   - Main model with state: currentDate, currentJournal, focusedSection\n   - Components: IntentionList (navigable, Enter to toggle), WinsView, LogView, LogInput (text input)\n   - Statusbar with keybinding hints\n   - Key bindings: Tab (cycle sections), i (add intention), l (add log), w (add win), h/Left (prev day), l/Right (next day, max today), t (jump to today), ? (help), q (quit)\n   - Past days are read-only (no editing)\n\n10. **File Watcher** (internal/sync/)\n    - Watch ~/.reckon/journal/ for external changes\n    - Debounce 100ms, re-index changed files to SQLite\n    - Notify TUI to reload if current journal changed\n\n**Acceptance Criteria**:\n- rk launches TUI showing today's journal (creates empty if none exists)\n- Can navigate sections with Tab, add intentions with 'i', log entries with 'l', wins with 'w'\n- Can toggle intentions done with Enter\n- Can navigate to previous days with h/l (read-only)\n- rk log \"test\" appends to today's journal from CLI\n- rk today outputs journal content to stdout\n- rk rebuild regenerates SQLite from markdown files\n- External file edits are detected and TUI refreshes\n- Opening a new day auto-carries open intentions with [\u003e] marker\n\n**Key Files**:\n- cmd/rk/main.go - entry point\n- internal/journal/service.go - core business logic\n- internal/parser/journal_parser.go - markdown parsing\n- internal/tui/model.go - TUI state management","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T16:47:05.957692427-05:00","updated_at":"2025-12-24T08:39:49.140948786-05:00","closed_at":"2025-12-24T08:39:49.140948786-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-a39","depends_on_id":"reckon-l7d","type":"blocks","created_at":"2025-12-22T17:17:43.596222613-05:00","created_by":"daemon"},{"issue_id":"reckon-a39","depends_on_id":"reckon-3e9","type":"blocks","created_at":"2025-12-22T17:17:43.638904395-05:00","created_by":"daemon"}]}
{"id":"reckon-add","title":"TUI: Implement help mode or remove hint from status bar","description":"Status bar shows help hint but help mode is not implemented.\n\nLocation: internal/tui/model.go:145-147\n\nThe question mark key currently does nothing, but the status bar advertises it.\n\nOptions:\n1. Implement help overlay showing all keybindings\n2. Remove the help hint from status bar\n\nEither way, the current state confuses users who press question mark expecting help.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:53:43.877771907-05:00","updated_at":"2025-12-22T19:42:38.182449664-05:00","closed_at":"2025-12-22T19:42:38.182449664-05:00","close_reason":"Closed"}
{"id":"reckon-awc","title":"TUI: Fix state mutation bug in submitInput","description":"State reset happens inside the tea.Cmd function instead of in model update, causing potential race conditions.\n\nLocation: internal/tui/model.go:290-293\n\n\n\nThe state changes should happen in the Update() function, not in the command. This violates Bubble Tea's architecture and could cause state corruption.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T18:53:02.329065842-05:00","updated_at":"2025-12-22T19:34:34.186455204-05:00","closed_at":"2025-12-22T19:34:34.186455204-05:00","close_reason":"Fixed: State mutation has been properly moved to Update function. Also completed full migration to bubbles/textinput component, removing hybrid state that would have caused input bugs."}
{"id":"reckon-aww","title":"Extend journal writer for Schedule section","description":"Extend journal writer to output ## Schedule section.\n\n## File to Modify\n\n`internal/journal/writer.go`\n\n## Changes\n\nAdd Schedule section between frontmatter and Intentions (insert after line ~16):\n\n```go\n// Write Schedule section\nsb.WriteString(\"## Schedule\\n\\n\")\nif len(j.ScheduleItems) \u003e 0 {\n    sortedSchedule := make([]ScheduleItem, len(j.ScheduleItems))\n    copy(sortedSchedule, j.ScheduleItems)\n    sort.Slice(sortedSchedule, func(i, j int) bool {\n        return sortedSchedule[i].Position \u003c sortedSchedule[j].Position\n    })\n    \n    for _, item := range sortedSchedule {\n        if !item.Time.IsZero() {\n            timeStr := item.Time.Format(\"15:04\")\n            sb.WriteString(fmt.Sprintf(\"- %s %s\\n\", timeStr, item.Content))\n        } else {\n            sb.WriteString(fmt.Sprintf(\"- %s\\n\", item.Content))\n        }\n    }\n}\nsb.WriteString(\"\\n\")\n```\n\n## Format\n\n```markdown\n## Schedule\n\n- 09:00 Morning standup\n- 14:00 Client meeting\n- Review PR\n\n## Intentions\n...\n```\n\n## Implementation Details\n\n- Sort by position before writing\n- Format time as HH:MM (15:04)\n- Omit time if Time.IsZero()\n- Follow existing patterns (see Intentions/Wins/Log sections)\n- Include section even if empty (with blank line)\n\n## Acceptance Criteria\n\n- Writes ## Schedule section before Intentions\n- Formats time as HH:MM when present\n- Omits time when not set\n- Sorts by position\n- Handles empty schedule list\n\n## Dependencies\n\nRequires: ScheduleItem model and journal parser extension\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 2.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:45:56.859539502-05:00","updated_at":"2025-12-28T16:36:09.966788961-05:00","closed_at":"2025-12-28T16:27:56.535164277-05:00","close_reason":"Schedule section writer implemented with proper time formatting, position sorting, empty handling, and comprehensive test coverage including round-trip verification. Code review grade: 9/10 (Excellent). PR #19 merged to main.","dependencies":[{"issue_id":"reckon-aww","depends_on_id":"reckon-mpn","type":"blocks","created_at":"2025-12-23T19:49:41.534559055-05:00","created_by":"daemon"}]}
{"id":"reckon-bdh","title":"Enable schedule add/delete in CLI and TUI","description":"## Problem\n\nUsers cannot add or delete schedule items despite the feature being fully implemented in the backend.\n\n1. **CLI**: Commands exist in `internal/cli/schedule.go` but are NOT registered in root.go\n2. **TUI**: Schedule section is read-only - can view items but cannot add/edit/delete\n\n## Current Implementation\n\n### Backend (Complete)\n- **Model**: `ScheduleItem` struct with ID, Time, Content, Position\n- **Service**: Full CRUD via `AddScheduleItem()`, `DeleteScheduleItem()`, `GetScheduleItems()`\n- **Database**: SQLite table `schedule_items` with proper schema\n- **Tests**: Comprehensive test coverage in `internal/journal/schedule_test.go`\n\n### CLI (Implemented but Disconnected)\n**File**: `internal/cli/schedule.go`\n\nCommands that exist but aren't accessible:\n- `rk schedule add [time] \u003ccontent\u003e` - Add item (time optional, HH:MM format)\n- `rk schedule list` - Display today's schedule\n- `rk schedule delete \u003cindex\u003e` - Remove item by index\n\n**Why disconnected**: `GetScheduleCommand()` is not called in `internal/cli/root.go`\n\n### TUI (Display Only)\n**File**: `internal/tui/components/schedule_view.go`\n\n- ScheduleView renders items in right sidebar\n- Items sorted by time (timed first, then untimed)\n- Section navigable via Tab key\n- NO keyboard handlers for add/edit/delete\n\n## Desired Behavior\n\n### CLI\n1. Register schedule command in root.go\n2. Users can run:\n   - `rk schedule add 09:00 \"Morning standup\"`\n   - `rk schedule add \"Review PRs\"` (no time)\n   - `rk schedule list`\n   - `rk schedule delete 1`\n\n### TUI\n1. When Schedule section is focused:\n   - `a` or `s` key opens text entry for adding item\n   - `d` key deletes selected item (with confirmation)\n   - `Enter` could edit selected item (optional)\n2. Update status bar hints for Schedule section\n\n## Implementation Details\n\n### CLI Fix (Simple)\n**File**: `internal/cli/root.go` around line 52\n\nAdd:\n```go\nRootCmd.AddCommand(GetScheduleCommand())\n```\n\n### TUI Changes\n**Files to modify**:\n\n1. `internal/tui/model.go`:\n   - Add `ModeSchedule` constant to entry modes\n   - In key handler, when `SectionSchedule` focused and `a` pressed: activate text entry\n   - Add delete handler for schedule items\n   - Wire up submit callback for schedule mode\n\n2. `internal/tui/components/text_entry_bar.go`:\n   - Add `ModeSchedule` to mode enum if not present\n   - Set prompt to \"Add schedule item (HH:MM content): \" or similar\n\n3. `internal/tui/components/status_bar.go`:\n   - Add hints for Schedule section: `a:add d:delete`\n\n### Time Parsing\nThe service already handles time parsing:\n- Accepts \"HH:MM\" or \"HH:MM:SS\" format\n- Empty string for untimed items\n- User could enter \"09:00 Meeting\" or just \"Meeting\"\n\n## Acceptance Criteria\n\n### CLI\n- [ ] `rk schedule add` works with time and content\n- [ ] `rk schedule add` works with content only (no time)\n- [ ] `rk schedule list` shows today's items\n- [ ] `rk schedule delete \u003cindex\u003e` removes item\n\n### TUI\n- [ ] Can add schedule item when Schedule section focused\n- [ ] Can delete schedule item when Schedule section focused\n- [ ] Hints show available commands for Schedule section\n- [ ] Items persist after restart\n\n## Files to Modify\n\n- `internal/cli/root.go` - Register GetScheduleCommand() (1 line)\n- `internal/tui/model.go` - Add keyboard handlers and mode support\n- `internal/tui/components/text_entry_bar.go` - Add ModeSchedule\n- `internal/tui/components/status_bar.go` - Update hints\n\n## Testing\n\n- Test CLI add with time\n- Test CLI add without time  \n- Test CLI delete\n- Test TUI add via keyboard\n- Test TUI delete via keyboard\n- Verify persistence after restart","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T18:22:17.199840219-05:00","created_by":"chadd","updated_at":"2026-01-10T13:21:18.661958525-05:00","closed_at":"2026-01-10T13:21:18.661958525-05:00","close_reason":"Closed"}
{"id":"reckon-bxr","title":"CLI/TUI: View and edit task details","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:20.200364001-05:00","created_by":"chadd","updated_at":"2026-01-03T12:30:49.647414578-05:00","closed_at":"2026-01-03T12:30:49.647414578-05:00","close_reason":"Completed in PR #41","dependencies":[{"issue_id":"reckon-bxr","depends_on_id":"reckon-g1y","type":"blocks","created_at":"2026-01-02T17:11:30.728597899-05:00","created_by":"chadd"}]}
{"id":"reckon-c9u","title":"Journal task_service_test.go tests failing","description":"Multiple tests in internal/journal/task_service_test.go are failing with 'task not found' errors. Tests affected: TestAddTask, TestToggleTask_OpenToDone, TestToggleTask_DoneToOpen, TestAddTaskNote, TestAddTaskNote_MultipleNotes, TestService_DeleteTaskNote.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T21:42:24.284897997-05:00","created_by":"chadd","updated_at":"2026-01-10T11:35:51.710377647-05:00","closed_at":"2026-01-10T11:35:51.710377647-05:00","close_reason":"Fixed failing tests by updating to use new task file format with YAML frontmatter"}
{"id":"reckon-csz","title":"TUI Redesign: Work-Focused Daylog View","description":"Redesign the TUI from 3-column equal layout to work-focused 4-pane layout:\n- Left (40%): Logs\n- Center (40%): Tasks with collapsible notes\n- Right (18%): Stacked Schedule/Intentions/Wins\n\nNew features:\n- Tasks: General todo list with nested notes (global tasks.md file)\n- Schedule: Upcoming items in daily journals (new ## Schedule section)\n- Text entry bar: Always visible at bottom (replaces modal input)\n\nUX decisions:\n- Text entry always visible with context-aware prompt\n- Completed tasks shown with strikethrough\n- Keys (t/i/w/L) focus text entry bar\n\nKeep Bubble Tea framework. Maintain backward compatibility.\n\nDesign reference: docs/daylog_view_sketch_2025-12-23_19-26.png\nImplementation plan: ~/.claude/plans/recursive-strolling-treehouse.md","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-23T19:42:56.156816028-05:00","updated_at":"2025-12-29T19:46:16.304897304-05:00","closed_at":"2025-12-29T19:46:16.304897304-05:00","close_reason":"Epic complete - all sub-tasks done: layout, components, documentation","dependencies":[{"issue_id":"reckon-csz","depends_on_id":"reckon-7hf","type":"blocks","created_at":"2025-12-23T19:49:42.937957968-05:00","created_by":"daemon"}]}
{"id":"reckon-def","title":"TUI: start with Logs section focused instead of Intentions","description":"## Problem\n\nThe TUI currently starts with the Intentions section focused. The Logs section is more frequently used and should be the default focus on startup.\n\n## Current Implementation\n\n**File**: `internal/tui/model.go`\n\nThe initial focused section is set when creating the TUI model. Look for:\n- `activeSection` or `focusedSection` field initialization\n- `SectionIntentions` constant being set as default\n- `New()` or `NewModel()` function that initializes the model\n\nThe section constants are likely defined as:\n```go\nconst (\n    SectionIntentions Section = iota\n    SectionWins\n    SectionTasks\n    SectionSchedule\n    SectionLogs\n)\n```\n\n## Desired Behavior\n\nWhen the TUI starts, the Logs section should be focused instead of Intentions:\n- Log entries visible and navigable immediately\n- Status bar hints show Logs section commands\n- User can immediately add log entries with `L` key\n\n## Implementation\n\nFind where `activeSection` (or similar) is initialized and change from `SectionIntentions` to `SectionLogs`.\n\nLikely a one-line change in `internal/tui/model.go`:\n\n```go\n// Before\nactiveSection: SectionIntentions,\n\n// After\nactiveSection: SectionLogs,\n```\n\n## Acceptance Criteria\n\n- [ ] TUI opens with Logs section focused\n- [ ] Log entries are immediately navigable\n- [ ] Status bar shows Logs section hints on startup\n- [ ] Tab navigation still works to move between sections\n\n## Files to Modify\n\n- `internal/tui/model.go` - Change initial `activeSection` value\n\n## Testing\n\n- Launch TUI and verify Logs section is highlighted/focused\n- Verify Tab key still cycles through sections correctly\n- Verify all section-specific commands work after navigation","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-04T18:24:00.853381173-05:00","created_by":"chadd","updated_at":"2026-01-04T18:24:00.853381173-05:00"}
{"id":"reckon-dqf","title":"Change TaskService to read tasks from individual files in tasks directory","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-02T14:22:26.602957515-05:00","created_by":"chadd","updated_at":"2026-01-02T14:23:58.082357814-05:00","closed_at":"2026-01-02T14:23:58.082357814-05:00","close_reason":"Closed"}
{"id":"reckon-e0f","title":"Add Task, TaskNote, ScheduleItem models and DB schema","description":"Add new data models to support tasks and schedule items.\n\n## Files to Modify\n\n1. `internal/journal/models.go`:\n   - Add `Task` struct: ID, Text, Status (TaskStatus), Notes ([]TaskNote), Position, CreatedAt\n   - Add `TaskNote` struct: ID, Text, Position\n   - Add `ScheduleItem` struct: ID, Time (time.Time), Content, Position\n   - Add `TaskStatus` enum: open, done, archived\n   - Add constructor functions: NewTask, NewTaskNote, NewScheduleItem\n   - Extend `Journal` struct: Add `ScheduleItems []ScheduleItem` field\n\n2. `internal/storage/database.go`:\n   - Add `tasks` table schema: id (PK), text, status, position, created_at\n   - Add `task_notes` table schema: id (PK), task_id (FK), text, position\n   - Add `schedule_items` table schema: id (PK), journal_date (FK), time, content, position\n   - Add indices for performance\n\n## Acceptance Criteria\n\n- Task, TaskNote, ScheduleItem structs defined with all fields\n- TaskStatus enum with open/done/archived values\n- Journal struct includes ScheduleItems field\n- Database schema includes all three new tables with proper foreign keys\n- Constructor functions implemented for all new types\n\n## Context\n\nThis is the foundation for the TUI redesign. Tasks are global (stored in tasks.md), while schedule items are per-journal.\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 1.1-1.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:43:45.949909205-05:00","updated_at":"2025-12-27T19:29:25.321760017-05:00","closed_at":"2025-12-27T19:29:25.321760017-05:00","close_reason":"Implementation already completed - all structs and DB schema in place","comments":[{"id":1,"issue_id":"reckon-e0f","author":"chadd","text":"Completed implementation of Task, TaskNote, ScheduleItem models and database schema. All acceptance criteria met.","created_at":"2025-12-24T01:09:44Z"}]}
{"id":"reckon-e30","title":"CLI/TUI: Add schedule items","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:20.693671559-05:00","created_by":"chadd","updated_at":"2026-01-03T12:35:50.037908857-05:00","closed_at":"2026-01-03T12:35:50.037908857-05:00","close_reason":"Completed in PR #42"}
{"id":"reckon-eg7","title":"TUI: Implement weighted multi-section vertical split view with borders","description":"Replace tabbed interface with vertical panes: Intentions (25%) | Wins (25%) | Logs (50%) with borders between sections. This allows viewing multiple entries from all categories simultaneously, addressing the 'one at a time' display issue.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T20:15:06.269898711-05:00","updated_at":"2025-12-22T20:15:52.863085031-05:00","closed_at":"2025-12-22T20:15:52.863085031-05:00","close_reason":"Closed"}
{"id":"reckon-egt","title":"UX: Explore separate pane for task notes display","description":"Current state: Notes appear as indented items below tasks in the task list. For lengthy notes, this can clutter the task list and make it hard to scan.\n\nProposal: Display notes in a separate pane, potentially splitting the Tasks column vertically - tasks on top, selected task's notes below. This would:\n- Keep task list clean and scannable\n- Give notes more room for longer content\n- Make it clearer which notes belong to which task\n- Allow for better note formatting/wrapping\n\nConsider: How to handle the split when no task is selected, or selected task has no notes.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T17:00:39.522553372-05:00","created_by":"chadd","updated_at":"2026-01-10T17:00:39.522553372-05:00"}
{"id":"reckon-eps","title":"TUI: Implement multi-section split view","description":"Currently only one section (Intentions/Wins/Logs) is visible at a time. User must tab between them.\n\nWould be more useful to see all sections simultaneously in a split-pane layout.\n\nSuggested layout:\n\n\nThis is a bigger UX change - may want user feedback first.","status":"closed","priority":3,"issue_type":"feature","assignee":"chadd","created_at":"2025-12-22T18:53:15.105609805-05:00","updated_at":"2026-01-03T12:39:24.455288929-05:00","closed_at":"2026-01-03T12:39:24.455288929-05:00","close_reason":"Completed in PR #44"}
{"id":"reckon-f4h","title":"Review codebase for simplification and maintainability refactoring opportunities","description":"Perform a comprehensive review of the codebase to identify opportunities for:\n\n1. **Code simplification**\n   - Remove dead code or unused functions\n   - Simplify overly complex logic\n   - Reduce duplication (DRY principle)\n\n2. **Maintainability improvements**\n   - Improve code organization and structure\n   - Ensure consistent patterns across similar components\n   - Identify areas where abstractions could help (or hurt)\n\n3. **Technical debt**\n   - Find TODO/FIXME comments that should be addressed\n   - Identify stub implementations (like isTerminal returning true)\n   - Check for inconsistent error handling patterns\n\n4. **Dependency hygiene**\n   - Verify all imports are necessary\n   - Check for opportunities to reduce dependency footprint\n\nDocument findings and create follow-up tickets for any significant refactoring work identified.","status":"closed","priority":3,"issue_type":"task","assignee":"chadd","created_at":"2026-01-08T22:18:39.069963596-05:00","created_by":"chadd","updated_at":"2026-01-10T12:26:55.69926363-05:00","closed_at":"2026-01-10T12:26:55.69926363-05:00","close_reason":"Completed in PR #54"}
{"id":"reckon-fcm","title":"Create TaskService for task management","description":"Create service layer for task business logic.\n\n## File to Create\n\n`internal/journal/task_service.go`\n\n## Methods to Implement\n\n```go\ntype TaskService struct {\n    repo       *TaskRepository\n    filesystem *storage.Filesystem\n    parser     *TaskParser // or use functions directly\n}\n\nfunc NewTaskService(repo *TaskRepository, fs *storage.Filesystem) *TaskService\n\n// GetAllTasks loads tasks from file and DB (file is source of truth)\nfunc (s *TaskService) GetAllTasks() ([]Task, error)\n\n// AddTask creates a new task\nfunc (s *TaskService) AddTask(text string) error\n\n// ToggleTask toggles task status (open \u003c-\u003e done)\nfunc (s *TaskService) ToggleTask(taskID string) error\n\n// AddTaskNote adds a note to a task\nfunc (s *TaskService) AddTaskNote(taskID, noteText string) error\n\n// DeleteTaskNote removes a note from a task\nfunc (s *TaskService) DeleteTaskNote(taskID, noteID string) error\n\n// save (private) persists tasks to file and DB\nfunc (s *TaskService) save(tasks []Task) error\n```\n\n## Implementation Flow\n\n**GetAllTasks:**\n1. Read tasks.md via filesystem.ReadTasksFile()\n2. Parse content via ParseTasksFile()\n3. Return tasks\n\n**AddTask:**\n1. Load all tasks\n2. Create new Task with generated ID, position = len(tasks)\n3. Append to list\n4. save()\n\n**ToggleTask:**\n1. Load all tasks\n2. Find task by ID\n3. Toggle status (open → done, done → open)\n4. save()\n\n**save (private):**\n1. Write to file: WriteTasksFile() + filesystem.WriteTasksFile()\n2. Write to DB: repo.SaveTasks() (for indexing/querying)\n3. Both must succeed (consider transaction)\n\n## Implementation Details\n\n- File is source of truth, DB is index/cache\n- Always load from file, save to both\n- Use xid for generating IDs (consistent with rest of codebase)\n- Position based on array index\n\n## Acceptance Criteria\n\n- GetAllTasks loads from file and returns parsed tasks\n- AddTask creates task with generated ID and saves\n- ToggleTask flips status and persists\n- AddTaskNote adds note to correct task\n- save() writes to both file and DB\n\n## Dependencies\n\nRequires: TaskRepository, task parser, file storage methods\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 2, Step 3.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:46:28.973211094-05:00","updated_at":"2025-12-28T14:43:59.974091177-05:00","closed_at":"2025-12-28T14:38:01.310252041-05:00","close_reason":"TaskService implemented with file-first architecture, comprehensive CRUD operations, XID format support, and full test coverage (17 tests). Code reviewed and approved (Grade: A-). PR #16 merged to main.","dependencies":[{"issue_id":"reckon-fcm","depends_on_id":"reckon-0e5","type":"blocks","created_at":"2025-12-23T19:49:41.619258416-05:00","created_by":"daemon"},{"issue_id":"reckon-fcm","depends_on_id":"reckon-9n6","type":"blocks","created_at":"2025-12-23T19:49:41.663695107-05:00","created_by":"daemon"},{"issue_id":"reckon-fcm","depends_on_id":"reckon-440","type":"blocks","created_at":"2025-12-23T19:49:41.716188743-05:00","created_by":"daemon"}]}
{"id":"reckon-g1y","title":"CLI/TUI: Human-friendly sequential task IDs","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:18.653711699-05:00","created_by":"chadd","updated_at":"2026-01-03T12:24:48.78880849-05:00","closed_at":"2026-01-03T12:24:48.78880849-05:00","close_reason":"Completed in PR #38"}
{"id":"reckon-hwo","title":"TUI: Add minimum terminal size validation","description":"Components receive size updates but don't validate minimum dimensions.\n\nIf terminal is too small, the UI may break or render incorrectly.\n\nShould:\n1. Define minimum usable dimensions (e.g., 80x24)\n2. Check on WindowSizeMsg\n3. Show 'Terminal too small' message if below minimum\n4. Gracefully handle resize events\n\nLocations: internal/tui/model.go:72-87","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T18:53:27.040093904-05:00","updated_at":"2025-12-23T21:16:45.521766447-05:00","closed_at":"2025-12-23T21:16:45.521766447-05:00","close_reason":"Closed"}
{"id":"reckon-iat","title":"CLI: Add stdin support with - argument","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:17.726868053-05:00","created_by":"chadd","updated_at":"2026-01-03T12:17:44.527525797-05:00","closed_at":"2026-01-03T12:17:44.527525797-05:00","close_reason":"Completed in PR #36"}
{"id":"reckon-jaq","title":"Create Layout manager for pane dimensions","description":"Create layout manager to calculate pane dimensions for 40-40-18 split.\n\n## File to Create\n\n`internal/tui/layout.go`\n\n## Types to Define\n\n```go\ntype PaneDimensions struct {\n    // Left pane (Logs)\n    LogsWidth  int\n    LogsHeight int\n    \n    // Center pane (Tasks)\n    TasksWidth  int\n    TasksHeight int\n    \n    // Right sidebar (total)\n    RightWidth  int\n    RightHeight int\n    \n    // Right sidebar (stacked components)\n    ScheduleHeight    int  // ~30% of right height\n    IntentionsHeight  int  // ~35% of right height\n    WinsHeight        int  // ~35% of right height\n    \n    // Bottom bars\n    TextEntryHeight int  // Fixed: 3 lines\n    StatusHeight    int  // Fixed: 1 line\n}\n```\n\n## Function to Implement\n\n```go\n// CalculatePaneDimensions computes pane sizes based on terminal dimensions\nfunc CalculatePaneDimensions(termWidth, termHeight int) PaneDimensions\n```\n\n## Calculation Logic\n\n```\nAvailable height = termHeight - textEntryHeight(3) - statusHeight(1)\nPane height = available height\n\nLeft width = termWidth * 0.40\nCenter width = termWidth * 0.40\nRight width = termWidth - left - center (remaining ~18%)\n\nRight sidebar vertical split:\n- Schedule: rightHeight * 0.30\n- Intentions: rightHeight * 0.35\n- Wins: rightHeight * 0.35\n```\n\n## Implementation Details\n\n- Handle minimum sizes (don't allow negative dimensions)\n- Round widths appropriately\n- Ensure sum of widths equals termWidth\n- Ensure sum of right sidebar heights equals rightHeight\n\n## Acceptance Criteria\n\n- Returns correct 40-40-18 split for various terminal sizes\n- Right sidebar properly divided into 30-35-35 vertically\n- Handles edge cases (very small terminals)\n- Sum of widths = termWidth\n- Text entry and status bars have fixed heights\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 3, Step 4.4)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:47:15.49382489-05:00","updated_at":"2025-12-27T19:28:34.61723802-05:00","closed_at":"2025-12-27T19:28:34.61723802-05:00","close_reason":"Closed"}
{"id":"reckon-k36","title":"UX: Make pane focus more visually obvious in TUI","description":"Current state: Blue border indicates focus but is subtle. Initial focus is on Logs, not Tasks. Users may not realize they need to Tab to Tasks pane before Space/Enter work. Consider: brighter focus color, section title highlighting, or onboarding hint.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:56:47.302354174-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:47.302354174-05:00"}
{"id":"reckon-k3h","title":"TUI: Add deletion and editing for entries","description":"Currently users can only add intentions/wins/logs, not delete or edit them.\n\nMissing functionality:\n- Delete intentions (d key?)\n- Edit intention text  \n- Delete wins\n- Edit wins\n- Delete log entries\n- Edit log entries\n\nThis is important for fixing typos or removing accidental entries.\n\nConsider keybindings:\n- d: delete selected item (with confirmation)\n- e: edit selected item\n- or use vim-style dd for delete","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-22T18:53:28.306539005-05:00","updated_at":"2025-12-29T16:05:55.873505529-05:00","closed_at":"2025-12-29T16:05:55.873505529-05:00","close_reason":"Implemented in PR #26 - added d/e keys for delete/edit with confirmation","pinned":true}
{"id":"reckon-l7d","title":"Phase 1.9: Build TUI for journal viewing and editing","description":"Implement the interactive TUI using Bubble Tea for viewing and editing daily journals.\n\n**Features**:\n- Main model with state: currentDate, currentJournal, focusedSection\n- Components: IntentionList (navigable, Enter to toggle), WinsView, LogView, LogInput\n- Statusbar with keybinding hints\n- Key bindings:\n  - Tab: cycle sections\n  - i: add intention\n  - l: add log entry  \n  - w: add win\n  - h/Left: prev day (read-only for past)\n  - l/Right: next day (max today)\n  - t: jump to today\n  - ?: help\n  - q: quit\n\n**Files**:\n- internal/tui/model.go - main TUI state\n- internal/tui/components/ - individual components\n- Update cmd/rk/main.go to launch TUI by default","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T17:17:32.642850579-05:00","updated_at":"2025-12-22T18:21:06.065014288-05:00","closed_at":"2025-12-22T18:21:06.065014288-05:00","close_reason":"Closed"}
{"id":"reckon-llr","title":"Cleanup: Remove duplicate cursor restoration logic in UpdateTasks","description":"task_list.go UpdateTasks has duplicate cursor restoration at lines 275-283 and 289-297. Consolidate into single block.","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-10T16:58:04.546272232-05:00","created_by":"chadd","updated_at":"2026-01-10T16:58:04.546272232-05:00"}
{"id":"reckon-m82","title":"Cleanup: Remove stale TODO comments about tags implementation","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-10T16:57:14.336095865-05:00","created_by":"chadd","updated_at":"2026-01-10T16:57:14.336095865-05:00"}
{"id":"reckon-mjn","title":"TUI: Add note count badge to collapsed tasks","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:56:03.511028012-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:03.511028012-05:00"}
{"id":"reckon-mpn","title":"Extend journal parser for Schedule section","description":"Extend journal parser to handle new ## Schedule section.\n\n## File to Modify\n\n`internal/journal/parser.go`\n\n## Changes\n\n1. Add `SectionSchedule` to Section enum (line ~44-51)\n2. Update section header matching in ParseJournal (line ~88-101):\n   - Add case for \"schedule\" → SectionSchedule\n3. Add parseScheduleItem function:\n   - Pattern: `- HH:MM Content` OR `- Content` (time optional)\n   - Return *ScheduleItem with ID, Time, Content, Position\n   - Use existing time parsing helper (parseTime)\n4. Add schedule parsing in main loop (line ~109-128):\n   - case SectionSchedule: parse schedule items\n\n## Format Examples\n\n```markdown\n## Schedule\n\n- 09:00 Morning standup\n- 14:00 Client meeting\n- Review PR (no time)\n```\n\n## Implementation Details\n\n- Time is optional (may be empty)\n- Follow existing parsing patterns (see parseIntention, parseLogEntry)\n- Handle empty Schedule section gracefully\n- Use xid for IDs (consistent with rest of codebase)\n\n## Acceptance Criteria\n\n- Parses ## Schedule section header\n- Parses schedule items with time (HH:MM format)\n- Parses schedule items without time\n- Handles empty Schedule section\n- Backward compatible: journals without Schedule section still parse\n\n## Dependencies\n\nRequires: ScheduleItem model from models ticket\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 2.2)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:43:46.721829762-05:00","updated_at":"2025-12-28T16:36:05.385263344-05:00","closed_at":"2025-12-28T16:00:20.555530421-05:00","close_reason":"Schedule section parser implemented with support for timed/untimed items, comprehensive edge case handling, package-level regex optimization, and detailed documentation. Initial grade A-, improved to A after applying code review recommendations. PR #18 merged to main.","dependencies":[{"issue_id":"reckon-mpn","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:41.485883279-05:00","created_by":"daemon"}]}
{"id":"reckon-nnt","title":"SQL injection vulnerability in FindStaleTasks using fmt.Sprintf","description":"In internal/task/repository.go:189, FindStaleTasks uses fmt.Sprintf(query, days) to inject the days parameter into SQL. While days is an int (low risk), this is a dangerous pattern. Fix: Use parameterized query with date('now', '-' || ? || ' days') syntax.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T20:21:13.954628742-05:00","created_by":"chadd","updated_at":"2026-01-04T18:58:59.421119104-05:00","closed_at":"2026-01-04T18:58:59.421119104-05:00","close_reason":"Fixed SQL injection vulnerability by replacing fmt.Sprintf with parameterized query. Code reviewed and approved. PR #45 merged."}
{"id":"reckon-no2","title":"Add bordered boxes to right sidebar subsections (Schedule, Intentions, Wins)","description":"Modify renderNewLayout() in internal/tui/model.go to wrap each right sidebar subsection in bordered boxes.\n\n**Current behavior:**\n- Schedule, Intentions, and Wins are simply joined vertically\n- No visual separation between subsections\n- Difficult to distinguish where one section ends and another begins\n\n**Desired behavior:**\n- Each subsection (Schedule, Intentions, Wins) wrapped in its own bordered box\n- Use lipgloss.NewStyle().Border(lipgloss.NormalBorder())\n- Set explicit dimensions: dims.RightWidth for width, respective heights for each\n- Clear visual separation between all three subsections\n\n**Implementation:**\n- In model.go:renderNewLayout(), wrap scheduleView in box with dims.RightWidth x dims.ScheduleHeight\n- Wrap intentionsView in box with dims.RightWidth x dims.IntentionsHeight\n- Wrap winsView in box with dims.RightWidth x dims.WinsHeight\n- Stack the three bordered boxes vertically\n\n**Acceptance Criteria:**\n- Schedule subsection has visible border on all sides\n- Intentions subsection has visible border on all sides\n- Wins subsection has visible border on all sides\n- Each box maintains its calculated height\n- Three boxes stack cleanly in the right column","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:21.252862203-05:00","created_by":"chadd","updated_at":"2026-01-02T11:16:45.835259095-05:00","closed_at":"2026-01-02T11:16:45.835259095-05:00","close_reason":"Implemented bordered boxes for right sidebar (Schedule, Intentions, Wins) as part of merge resolution for reckon-8ji. Used simple border wrapping without double subtraction.","pinned":true}
{"id":"reckon-nxa","title":"TUI: Add empty state messages for sections","description":"When sections are empty, users see blank screens with no guidance.\n\nShould show helpful messages like:\n- Intentions: 'No intentions yet - press i to add one'\n- Wins: 'No wins yet - press w to add one'  \n- Logs: 'No log entries yet - press L to add one'\n\nThis helps new users understand how to interact with the app.\n\nLocations:\n- internal/tui/components/intention_list.go\n- internal/tui/components/wins_view.go\n- internal/tui/components/log_view.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:53:15.606800377-05:00","updated_at":"2025-12-23T16:53:36.10283095-05:00","closed_at":"2025-12-23T16:53:36.10283095-05:00","close_reason":"Closed"}
{"id":"reckon-ob9","title":"Write tests for log notes feature","description":"Comprehensive unit and integration tests for log notes.\n\n## Test Files to Create/Update\n- `internal/journal/models_test.go`\n- `internal/journal/parser_test.go`\n- `internal/journal/writer_test.go`\n- `internal/journal/repository_test.go`\n- `internal/journal/service_test.go`\n\n## Test Cases\n\n### Unit Tests\n- LogNote constructor generates unique IDs\n- Parse log entry with multiple notes\n- Parse note with ID: `[abc123] Note text`\n- Parse note without ID: `Note text` (auto-generate)\n- Write log entry with notes to markdown\n- Round-trip: parse → write → parse maintains data\n- extractNoteID() handles edge cases\n\n### Integration Tests\n- Create journal with log entry\n- Add note via service\n- Save to markdown file\n- Read back from markdown\n- Verify notes preserved with correct IDs\n- Delete log entry → cascade delete notes\n- Multiple notes maintain position/order\n\n### Edge Cases\n- Log entry with no notes\n- Empty note text\n- Special characters in notes\n- Very long note text\n- Note ID collision (XIDs prevent this)\n\n## Manual Testing Checklist\n- [ ] Add log entry, add note via TUI\n- [ ] Toggle expand/collapse\n- [ ] Delete note\n- [ ] Manually edit markdown, restart app\n- [ ] Multiple notes per entry\n- [ ] Notes persist across restarts","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:21.273307613-05:00","created_by":"chadd","updated_at":"2026-01-06T11:06:21.273307613-05:00","dependencies":[{"issue_id":"reckon-ob9","depends_on_id":"reckon-r65","type":"blocks","created_at":"2026-01-06T11:06:31.446740837-05:00","created_by":"chadd"}]}
{"id":"reckon-oky","title":"CLI task new: add interactive mode with title and description prompts","description":"## Problem\n\nThe CLI `rk task new` command is non-interactive and only accepts title as positional argument. Adding a description requires a separate `rk task edit \u003cid\u003e --description \"...\"` command, which is cumbersome.\n\nCurrent usage:\n```bash\nrk task new \"My task\"           # Creates task, no description\nrk task edit abc123 --description \"Details here\"  # Separate command needed\n```\n\n## Current Implementation\n\n**File**: `internal/cli/task.go` lines 31-58\n\n```go\nvar taskNewCmd = \u0026cobra.Command{\n    Use:   \"new [title]\",\n    Short: \"Create a new task\",\n    Args:  cobra.MinimumNArgs(1),\n    RunE: func(cmd *cobra.Command, args []string) error {\n        title := strings.Join(args, \" \")\n        task, err := taskService.Create(title, taskNewTagsFlag)\n        // ... outputs success message\n    },\n}\n```\n\n**Flags**: Only `--tags` supported at creation time\n\n**Service**: `internal/task/service.go` - `Create()` accepts title and tags, not description\n\n## Desired Behavior\n\nAdd an interactive mode when `rk task new` is run without arguments:\n\n```bash\n$ rk task new\nTask title: Build user authentication\nDescription (optional, Enter to skip): \n\u003e Implement JWT-based auth with refresh tokens.\n\u003e Include password reset flow.\n\u003e (blank line to finish)\n\n✓ Created task: abc123def456\n  Title: Build user authentication\n```\n\nFeatures:\n1. **Title prompt**: Single-line input (required)\n2. **Description prompt**: Multi-line input (optional, blank line or Ctrl-D to finish)\n3. **Same inline TUI style** as proposed for `rk log` (reckon-8kq) - compact, doesn't clear terminal\n\n## Implementation Options\n\n### Option 1: Charmbracelet Huh Forms\nUse the `huh` library for inline forms:\n```go\nform := huh.NewForm(\n    huh.NewGroup(\n        huh.NewInput().Title(\"Task title\").Value(\u0026title),\n        huh.NewText().Title(\"Description (optional)\").Value(\u0026description),\n    ),\n)\n```\n\n### Option 2: Bubble Tea Mini-Program\nSimilar approach to reckon-8kq (log inline TUI):\n- Small Bubble Tea program that doesn't clear terminal\n- Title input followed by multi-line description input\n- Enter on empty line finishes description\n\n### Option 3: Simple Stdin Prompts\nBasic `fmt.Print`/`bufio.Scanner` approach:\n- Less polished but simpler\n- Could work as MVP\n\n## Acceptance Criteria\n\n- [ ] `rk task new` (no args) enters interactive mode\n- [ ] Title prompt shown and required\n- [ ] Description prompt shown and optional\n- [ ] Multi-line description supported (blank line or Ctrl-D to finish)\n- [ ] Task created with both title and description\n- [ ] `rk task new \"title\"` still works (non-interactive, no description)\n- [ ] `rk task new \"title\" --tags \"a,b\"` still works\n- [ ] Terminal content above prompt remains visible (inline, not fullscreen)\n\n## Files to Modify\n\n- `internal/cli/task.go`:\n  - Modify `taskNewCmd` to detect no-args case\n  - Add interactive prompt logic\n  - Call service with title and description\n\n- `internal/task/service.go`:\n  - Modify `Create()` to accept optional description parameter\n  - OR add new `CreateWithDescription()` method\n\n- Potentially create shared inline-prompt component if implementing for both this and reckon-8kq\n\n## Related Tickets\n\n- **reckon-8kq**: Improve CLI log entry UX with inline mini-TUI (same UX pattern)\n- **reckon-z08**: Make task details easier to view and add (related but different scope)\n\nConsider implementing a shared inline-prompt component that both tickets can use.\n\n## Testing\n\n- Test interactive mode creates task with title only\n- Test interactive mode creates task with title and description\n- Test multi-line description input\n- Test empty description (just Enter)\n- Test Ctrl-D/Ctrl-C cancellation\n- Test non-interactive mode still works\n- Test with --tags flag in non-interactive mode","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T18:22:22.225459873-05:00","created_by":"chadd","updated_at":"2026-01-10T11:37:37.281968213-05:00","closed_at":"2026-01-10T11:37:37.281968213-05:00","close_reason":"Completed in PR #48"}
{"id":"reckon-oy6","title":"Fix: UpdateTask accepts tags parameter but never saves them","description":"task_service.go:264 - UpdateTask accepts tags []string but line 281 has stale TODO and tags are never assigned to the task. Tags parameter is validated but discarded.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-10T16:57:14.17459034-05:00","created_by":"chadd","updated_at":"2026-01-10T16:57:14.17459034-05:00"}
{"id":"reckon-px1","title":"Add color indication for focused pane in TUI","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T14:22:28.073610501-05:00","created_by":"chadd","updated_at":"2026-01-02T14:24:00.325632972-05:00","closed_at":"2026-01-02T14:24:00.325632972-05:00","close_reason":"Closed"}
{"id":"reckon-qrw","title":"Implement markdown parser and writer for log notes","description":"Parse and write log notes as nested bullets in journal markdown.\n\n## Files to Modify\n- `internal/journal/parser.go` - Parse nested note bullets\n- `internal/journal/writer.go` - Write notes as nested bullets\n\n## Changes\n\n### parser.go (lines 131-135)\nUpdate log section parsing to detect 2-space indented bullets:\n```go\ncase SectionLog:\n    if strings.HasPrefix(line, \"  - \") \u0026\u0026 len(j.LogEntries) \u003e 0 {\n        // Parse as note for last log entry\n        noteText := strings.TrimSpace(strings.TrimPrefix(line, \"  - \"))\n        noteID, text := extractNoteID(noteText)\n        if noteID == \"\" {\n            noteID = xid.New().String()\n        }\n        \n        lastIdx := len(j.LogEntries) - 1\n        note := LogNote{ID: noteID, Text: text, Position: len(j.LogEntries[lastIdx].Notes)}\n        j.LogEntries[lastIdx].Notes = append(j.LogEntries[lastIdx].Notes, note)\n    } else if entry := parseLogEntry(trimmed, j.Date, logPos); entry != nil {\n        j.LogEntries = append(j.LogEntries, *entry)\n        logPos++\n    }\n```\n\nAdd helper at end of file:\n```go\nfunc extractNoteID(text string) (id string, remaining string)\n```\n\n### writer.go (lines 93-106)\nAfter writing log entry, add:\n```go\nif len(entry.Notes) \u003e 0 {\n    // Sort and write notes\n    for _, note := range sortedNotes {\n        sb.WriteString(fmt.Sprintf(\"  - [%s] %s\\n\", note.ID, note.Text))\n    }\n}\n```\n\n## Testing\n- Parse log entry with multiple notes\n- Parse note with/without ID\n- Round-trip: parse → write → parse (idempotency)\n- Handle edge cases: empty notes, special characters","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:20.40873386-05:00","created_by":"chadd","updated_at":"2026-01-06T11:06:20.40873386-05:00","dependencies":[{"issue_id":"reckon-qrw","depends_on_id":"reckon-a21","type":"blocks","created_at":"2026-01-06T11:06:31.12934574-05:00","created_by":"chadd"}]}
{"id":"reckon-r4j","title":"Improve Task Toggle Feedback in TUI (Space Key)","description":"Pressing Space to mark tasks as done shows no visible change due to asynchronous operation. Root cause: No immediate feedback during database round-trip. Solution: Implement optimistic UI updates (toggle checkbox instantly, revert on error); add loading indicator during async toggle; preserve cursor during reload. Files: task_list.go, model.go. Test: Space should show instant visual change, then confirm via reload.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T14:54:50.504002183-05:00","created_by":"chadd","updated_at":"2026-01-10T14:54:50.504002183-05:00"}
{"id":"reckon-r65","title":"Implement TUI integration for log notes","description":"User interface for adding, viewing (collapsible), and deleting notes.\n\n## Files to Modify\n- `internal/tui/components/log_view.go` - Collapsible rendering\n- `internal/tui/components/text_entry_bar.go` - ModeLogNote\n- `internal/tui/model.go` - Keybindings and handlers\n\n## Changes\n\n### log_view.go (lines 20-124)\nUpdate structs:\n```go\ntype LogEntryItem struct {\n    entry  journal.LogEntry\n    isNote bool\n    noteID string\n}\n\ntype LogDelegate struct {\n    collapsedMap map[string]bool\n}\n\ntype LogView struct {\n    list         list.Model\n    collapsedMap map[string]bool\n    logEntries   []journal.LogEntry\n}\n```\n\nAdd functions:\n- `buildLogItems()` - Convert entries to flat list with notes\n- Update `Render()` - Show ▶/▼ indicators, indent notes\n- Update `Update()` - Handle 'enter' for collapse/expand\n- `SelectedLogNote()` - Get selected entry/note\n\n### text_entry_bar.go\nAdd ModeLogNote constant and context field:\n```go\nModeLogNote Mode = \"log_note\"\ncontext     string\nfunc (t *TextEntryBar) SetContext/Context()\n```\n\n### model.go\nAdd message types, keybindings, handlers:\n- Message: logNoteAddedMsg, logNoteDeletedMsg\n- Key 'n': Add note to selected log entry\n- Key 'd': Delete note (if note selected) or entry\n- Key 'enter': Toggle expand/collapse\n- Methods: addLogNote(), deleteLogNote()\n\n## Testing\n- TUI: Add note via 'n' key\n- TUI: Toggle expand/collapse via 'enter'\n- TUI: Delete note via 'd' key\n- TUI: UI updates correctly after operations\n- TUI: Multiple notes display in order","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:20.945534414-05:00","created_by":"chadd","updated_at":"2026-01-06T11:06:20.945534414-05:00","dependencies":[{"issue_id":"reckon-r65","depends_on_id":"reckon-yk5","type":"blocks","created_at":"2026-01-06T11:06:31.369315858-05:00","created_by":"chadd"}]}
{"id":"reckon-re2","title":"TUI: Errors are silently swallowed - no user feedback","description":"When operations fail, errors are completely ignored with no feedback to user.\n\nLocation: internal/tui/model.go:99-101\n\nUser has no way to know when:\n- Journal fails to load\n- Intention toggle fails\n- Adding intentions/wins/logs fails\n\nShould add error display to model and show in View at bottom of screen or as a toast notification.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-22T18:53:43.565190335-05:00","updated_at":"2025-12-22T19:38:05.520793004-05:00","closed_at":"2025-12-22T19:38:05.520793004-05:00","close_reason":"Closed"}
{"id":"reckon-s5z","title":"Cleanup: TaskArchived status is defined but unused","description":"models.go:24 defines TaskArchived but it's never used. task_parser.go:177 explicitly notes it's not supported. Either implement archiving or remove dead constant.","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-10T16:57:24.711301311-05:00","created_by":"chadd","updated_at":"2026-01-10T16:57:24.711301311-05:00"}
{"id":"reckon-s61","title":"Implement tag support in journal task system","status":"closed","priority":3,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-10T12:05:55.232620039-05:00","created_by":"chadd","updated_at":"2026-01-10T12:35:37.501328468-05:00","closed_at":"2026-01-10T12:35:37.501328468-05:00","close_reason":"Completed in PR #55"}
{"id":"reckon-swe","title":"Investigate: Task toggle not working in TUI (focus or event routing issue?)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-10T16:56:10.444544534-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:51.113773961-05:00","closed_at":"2026-01-10T16:56:51.113773961-05:00","close_reason":"Root cause found: Focus starts on Logs section, not Tasks. Space key only works when Tasks pane is focused. User needs to Tab to Tasks first. This is UX issue, not a bug."}
{"id":"reckon-t2g","title":"Implement 40-40-18 layout in TUI model using existing components","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T15:37:46.878258022-05:00","created_by":"chadd","updated_at":"2025-12-28T16:36:05.287825397-05:00","closed_at":"2025-12-28T16:33:29.949799684-05:00","close_reason":"Closed"}
{"id":"reckon-uf8","title":"Ensure all components fill allocated vertical space","description":"Update component rendering to fill allocated vertical space, especially when empty or with minimal content.\n\n**Current behavior:**\n- Components collapse to content size\n- Empty state messages don't fill the pane height\n- Large gaps visible when sections are empty\n\n**Desired behavior:**\n- Each component fills its allocated height regardless of content\n- Empty states show centered in their allocated space\n- Visual consistency maintained across all pane sizes\n\n**Components to update:**\n1. LogView (internal/tui/components/log_view.go)\n2. TaskList (internal/tui/components/task_list.go)\n3. ScheduleView (internal/tui/components/schedule_view.go)\n4. IntentionList (internal/tui/components/intention_list.go)\n5. WinsView (internal/tui/components/wins_view.go)\n\n**Implementation approach:**\nOption A: Update View() methods to pad content to fill height\nOption B: Handle in model.go:renderNewLayout() by using lipgloss.Place() with explicit heights\nOption C: Combination - use Height() styling on the bordered boxes\n\n**Acceptance Criteria:**\n- All components fill their allocated vertical space\n- Empty state messages are visible and properly positioned\n- No visual gaps or collapsed sections\n- Content properly scrolls when exceeds available height","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:21.564616408-05:00","created_by":"chadd","updated_at":"2026-01-02T10:52:03.933057663-05:00","closed_at":"2026-01-02T10:52:03.933057663-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-uf8","depends_on_id":"reckon-8ji","type":"blocks","created_at":"2026-01-02T09:43:32.071080756-05:00","created_by":"chadd"},{"issue_id":"reckon-uf8","depends_on_id":"reckon-no2","type":"blocks","created_at":"2026-01-02T09:43:32.187525324-05:00","created_by":"chadd"}],"pinned":true}
{"id":"reckon-ujt","title":"Create TaskList component with collapse/expand","description":"Create TaskList Bubble Tea component with collapsible notes.\n\n## File to Create\n\n`internal/tui/components/task_list.go`\n\n## Component Structure\n\n```go\ntype TaskItem struct {\n    task     journal.Task\n    isNote   bool\n    noteID   string\n    taskID   string  // parent task ID for notes\n}\n\ntype TaskDelegate struct {\n    collapsedMap map[string]bool  // taskID -\u003e isCollapsed\n}\n\ntype TaskList struct {\n    list         list.Model\n    collapsedMap map[string]bool\n}\n\nfunc NewTaskList(tasks []journal.Task) *TaskList\nfunc (tl *TaskList) Update(msg tea.Msg) (*TaskList, tea.Cmd)\nfunc (tl *TaskList) View() string\nfunc (tl *TaskList) SetSize(width, height int)\nfunc (tl *TaskList) SelectedTask() *journal.Task\nfunc (tl *TaskList) UpdateTasks(tasks []journal.Task)\n```\n\n## Rendering Logic\n\n- Render task: `[ ] Task text` or `[x] Task text` (strikethrough if done)\n- Render notes: `  - Note text` (2-space indent)\n- Only show notes if task is not collapsed\n- Expand/collapse indicator: `▼` (expanded) or `▶` (collapsed)\n\n## Keyboard Handling\n\n- j/k: Navigate up/down (delegate to list.Model)\n- space: Toggle task status (return custom message)\n- enter: Toggle expand/collapse (update collapsedMap)\n\n## Implementation Details\n\n- Use Bubble Tea's `list.Model` with custom `TaskDelegate`\n- Convert tasks to list items (task + notes as separate items)\n- Filter notes based on collapsed state\n- Follow pattern from `internal/tui/components/intention_list.go`\n- Styling: Use lipgloss (consistent with other components)\n\n## Acceptance Criteria\n\n- Displays tasks with checkbox status\n- Shows/hides notes based on collapsed state\n- Space toggles task status (emits message)\n- Enter expands/collapses task\n- Handles tasks with no notes\n- Handles empty task list\n- Proper indentation for notes (2 spaces)\n- Strikethrough for completed tasks\n\n## Dependencies\n\nRequires: Task/TaskNote models\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 3, Step 4.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:47:15.850043832-05:00","updated_at":"2025-12-28T15:25:33.666906071-05:00","closed_at":"2025-12-28T15:25:33.666906071-05:00","close_reason":"TaskList component implemented with collapse/expand functionality, checkbox display, strikethrough styling, keyboard interactions, and comprehensive test coverage. Critical pointer semantics issue identified by code-reviewer and fixed. Grade: A-. PR #17 merged to main.","dependencies":[{"issue_id":"reckon-ujt","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:42.057113443-05:00","created_by":"daemon"}]}
{"id":"reckon-vic","title":"N+1 query problem in ListTasks and FindStaleTasks","description":"In internal/task/repository.go ListTasks (line 152) and FindStaleTasks (line 203), a separate query fetches tags for each task. With 100 tasks, this becomes 101 queries. Fix: Use a JOIN or fetch all tags in a single query with IN clause.","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-03T20:21:14.243697549-05:00","created_by":"chadd","updated_at":"2026-01-03T21:42:10.279126525-05:00"}
{"id":"reckon-vmk","title":"Fix: Task repository query missing tags column","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-10T16:56:04.098768492-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:04.098768492-05:00"}
{"id":"reckon-wi4","title":"TUI: Replace primitive input handling with bubbles/textinput","description":"Current input handling is manual character-by-character string building with no cursor movement, text selection, or mid-string editing. Should use bubbles/textinput component.\n\nLocation: internal/tui/model.go:104-126\n\nIssues:\n- No cursor movement (left/right arrows)\n- No text selection\n- Backspace only deletes from end\n- No copy/paste support\n\nShould replace with bubbles/textinput for proper editing experience.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T18:41:05.856849246-05:00","updated_at":"2025-12-22T19:34:34.511737619-05:00","closed_at":"2025-12-22T19:34:34.511737619-05:00","close_reason":"Fixed: Fully migrated to bubbles/textinput.Model with proper cursor movement, text editing, and selection support."}
{"id":"reckon-y7m","title":"TUI: Add tag support when creating tasks","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-10T16:56:03.897871348-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:03.897871348-05:00"}
{"id":"reckon-y97","title":"TUI and CLI use separate task systems - tasks don't sync between interfaces","description":"## Problem\nTasks added in TUI don't appear in CLI listings (`rk task list`), and tasks added in CLI don't appear in TUI task list. This creates a fractured user experience where the same application has two separate task databases.\n\n## Root Cause\n- TUI uses journal system: stores in `tasks.md` file and `tasks`/`task_notes` DB tables\n- CLI uses legacy system: stores in `phase2_tasks`/`phase2_task_tags`/`phase2_task_log_entries` DB tables + individual `.md` files  \n- No data synchronization between systems\n\n## Evidence\n- TUI loads journal tasks at startup, legacy tasks only on-demand\n- CLI task commands only use `task.Service`, ignore journal tasks\n- Only log entries are dual-written; task creation/deletion not synced\n\n## Proposed Solution\nUnify task systems by migrating everything to the journal system (newer, simpler) as single source of truth. Update CLI to use journal.TaskService instead of legacy task.Service.\n\n## Files Involved\n- `internal/tui/model.go` (loads both but separately)\n- `internal/cli/task.go` (only uses legacy system)\n- `internal/journal/task_service.go` vs `internal/task/service.go`","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T11:20:05.746544423-05:00","created_by":"chadd","updated_at":"2026-01-10T12:10:31.047919002-05:00","closed_at":"2026-01-10T12:10:31.047919002-05:00","close_reason":"Closed"}
{"id":"reckon-yk5","title":"Implement repository and service layers for log notes","description":"Database CRUD operations and business logic for log notes.\n\n## Files to Modify\n- `internal/journal/repository.go` - Database operations\n- `internal/journal/service.go` - Business logic\n\n## Changes\n\n### repository.go\nAdd methods after SaveJournal:\n```go\nfunc (r *Repository) saveLogNotes(tx *sql.Tx, logEntryID string, notes []LogNote) error\nfunc (r *Repository) GetLogNotes(logEntryID string) ([]LogNote, error)\n```\n\nUpdate SaveJournal (lines 57-68):\n- Call saveLogNotes() after each log entry insert\n\nUpdate GetJournalByDate (lines 152-183):\n- Load notes for each log entry after appending\n\nUpdate deleteJournalData (line 256):\n- Add \"log_notes\" to tables array\n\n### service.go\nAdd methods after UpdateLogEntry (line 235):\n```go\nfunc (s *Service) AddLogNote(j *Journal, logEntryID, noteText string) error\nfunc (s *Service) UpdateLogNote(j *Journal, logEntryID, noteID, newText string) error\nfunc (s *Service) DeleteLogNote(j *Journal, logEntryID, noteID string) error\n```\n\n## Testing\n- Repository: SaveJournal with notes\n- Repository: GetJournalByDate loads notes correctly\n- Repository: Cascade deletion works\n- Service: Add/Update/Delete operations\n- Service: Error handling for invalid IDs","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:20.66941486-05:00","created_by":"chadd","updated_at":"2026-01-06T11:06:20.66941486-05:00","dependencies":[{"issue_id":"reckon-yk5","depends_on_id":"reckon-a21","type":"blocks","created_at":"2026-01-06T11:06:31.20991162-05:00","created_by":"chadd"},{"issue_id":"reckon-yk5","depends_on_id":"reckon-qrw","type":"blocks","created_at":"2026-01-06T11:06:31.289233482-05:00","created_by":"chadd"}]}
{"id":"reckon-ywp","title":"General TUI UI Improvements","description":"Enhance TUI robustness for expansion and toggle operations. Solution: Ensure buildTaskItems() and buildLogItems() handle errors gracefully (log to console); add key binding validation for Enter/Space; improve error feedback for invalid operations. Files: task_list.go, log_view.go, model.go. Test: Verify error handling and key bindings work correctly.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T14:54:52.008213357-05:00","created_by":"chadd","updated_at":"2026-01-10T14:54:52.008213357-05:00"}
{"id":"reckon-z08","title":"Make task details easier to view and add in TUI and CLI","description":"## Problem\n\nTask details (descriptions/notes) are difficult to work with:\n\n1. **TUI**: Hints at bottom mention task features but there's no obvious way to view or add details\n   - `enter:expand` only works if notes already exist\n   - No keyboard shortcut to add a description or note to a task\n   - The `n` key for notes is marked TODO in the code\n\n2. **CLI**: Requires verbose `--description` flag\n   - `rk task edit \u003cid\u003e --description \"...\"` is too much typing\n   - No shorthand or interactive mode for adding descriptions\n\n## Current Implementation\n\n### Data Models (two parallel systems)\n- **Legacy** (`internal/task/models.go`): `Task.Description` string field\n- **New** (`internal/journal/models.go`): `Task.Notes` array of `TaskNote` structs\n\n### CLI\n- `internal/cli/task.go` lines 210-256: `task edit` command with `--description` flag\n- Description stored via `internal/task/service.go` `Update()` method\n\n### TUI\n- `internal/tui/components/task_list.go`: Main task list view\n  - Line 82-87: Shows expand/collapse indicators for notes\n  - Line 185-203: Enter key toggles note visibility\n  - Line 467: TODO comment for `n` key note workflow\n- `internal/tui/components/status_bar.go` line 62-76: Hints include `enter:expand` but no add-details hint\n- `internal/tui/components/task_view.go` lines 88-97: Shows description in legacy two-pane mode only\n\n### Storage Format\nTask markdown files have `## Description` and `## Log` sections (see `internal/task/parser.go` lines 88-106)\n\n## Desired Behavior\n\n### TUI Improvements\n1. **Add `n` key** to add a note/detail to the currently selected task\n   - Opens text entry bar in \"note\" mode\n   - On submit, appends note to task\n2. **Add `e` or `d` key** to edit/view full task description\n   - Could open a modal or switch to detail view\n3. **Show indicator** when task has description/notes (even when collapsed)\n4. **Update hints** to reflect actual available actions\n\n### CLI Improvements\n1. **Add shorthand flag**: `-d` for `--description`\n2. **Add interactive mode**: `rk task describe \u003cid\u003e` opens inline prompt (similar to proposed log inline TUI)\n3. **Consider**: `rk task note \u003cid\u003e \"note text\"` for quick note addition\n\n## Acceptance Criteria\n\n### TUI\n- [ ] `n` key adds a note to the selected task\n- [ ] Notes can be viewed by expanding task (Enter key)\n- [ ] Visual indicator shows when task has notes/description\n- [ ] Hints accurately reflect available actions\n\n### CLI\n- [ ] `-d` shorthand works for `--description`\n- [ ] `rk task describe \u003cid\u003e` opens interactive description editor\n- [ ] OR `rk task note \u003cid\u003e \"text\"` adds a quick note\n\n## Files to Modify\n\n- `internal/cli/task.go` - Add shorthand flag, possibly new subcommand\n- `internal/tui/components/task_list.go` - Implement `n` key handler, add visual indicators\n- `internal/tui/model.go` - Handle note entry mode\n- `internal/tui/components/status_bar.go` - Update hints\n- `internal/journal/task_service.go` - May need `AddNote()` method\n\n## Testing\n\n- Test adding note via TUI `n` key\n- Test expanding/collapsing notes with Enter\n- Test CLI shorthand flag works\n- Test notes persist after restart","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T17:19:58.362736705-05:00","created_by":"chadd","updated_at":"2026-01-10T12:09:03.961335072-05:00","closed_at":"2026-01-10T12:09:03.961335072-05:00","close_reason":"Completed in PR #52"}
{"id":"reckon-zx7","title":"Create TextEntryBar component","description":"Create TextEntryBar Bubble Tea component for always-visible input.\n\n## File to Create\n\n`internal/tui/components/text_entry_bar.go`\n\n## Component Structure\n\n```go\ntype EntryMode string\n\nconst (\n    ModeInactive  EntryMode = \"\"\n    ModeTask      EntryMode = \"task\"\n    ModeIntention EntryMode = \"intention\"\n    ModeWin       EntryMode = \"win\"\n    ModeLog       EntryMode = \"log\"\n)\n\ntype TextEntryBar struct {\n    textInput textinput.Model\n    mode      EntryMode\n    width     int\n}\n\nfunc NewTextEntryBar() *TextEntryBar\nfunc (teb *TextEntryBar) Update(msg tea.Msg) (*TextEntryBar, tea.Cmd)\nfunc (teb *TextEntryBar) View() string\nfunc (teb *TextEntryBar) SetWidth(width int)\nfunc (teb *TextEntryBar) SetMode(mode EntryMode)\nfunc (teb *TextEntryBar) GetValue() string\nfunc (teb *TextEntryBar) Clear()\nfunc (teb *TextEntryBar) Focus() tea.Cmd\nfunc (teb *TextEntryBar) Blur()\nfunc (teb *TextEntryBar) IsFocused() bool\n```\n\n## Rendering\n\n**Inactive state:**\n```\n\u003e Press t (task), i (intention), w (win), or L (log) to add entry\n```\n\n**Active state (example for task mode):**\n```\n\u003e Add task: [user input here_]\n```\n\n## Prompt by Mode\n\n- task: \"Add task: \"\n- intention: \"Add intention: \"\n- win: \"Add win: \"\n- log: \"Add log entry: \"\n- inactive: \"Press t (task), i (intention), w (win), or L (log) to add entry\"\n\n## Implementation Details\n\n- Use Bubble Tea's `textinput.Model` (from bubbles package)\n- Always visible (render in all states)\n- Change prompt based on mode\n- Width adjusts to terminal width\n- Use lipgloss for styling (border, colors)\n\n## Keyboard Handling\n\n- Delegate to textinput.Model when focused\n- Parent model handles enter (submit) and esc (cancel/blur)\n\n## Styling\n\n```go\nactiveStyle = lipgloss.NewStyle().\n    BorderStyle(lipgloss.NormalBorder()).\n    BorderForeground(lipgloss.Color(\"39\")).\n    Padding(0, 1)\n\ninactiveStyle = lipgloss.NewStyle().\n    BorderStyle(lipgloss.NormalBorder()).\n    BorderForeground(lipgloss.Color(\"240\")).\n    Padding(0, 1).\n    Foreground(lipgloss.Color(\"240\"))\n```\n\n## Acceptance Criteria\n\n- Always visible (shows in all states)\n- Prompt changes based on mode\n- Accepts text input when focused\n- Blurs on ESC\n- Clear() resets input value\n- SetMode() changes prompt\n- Proper styling for active/inactive states\n\n## Dependencies\n\nRequires: bubbles/textinput package (already in use)\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 3, Step 4.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:48:19.897869478-05:00","updated_at":"2025-12-27T19:47:54.947448157-05:00","closed_at":"2025-12-27T19:47:54.947448157-05:00","close_reason":"Closed"}
