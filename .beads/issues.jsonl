{"id":"reckon-03f","title":"TUI: Align hints with help and add section-specific hints","status":"closed","priority":2,"issue_type":"bug","assignee":"chadd","created_at":"2026-01-02T17:11:19.714884239-05:00","created_by":"chadd","updated_at":"2026-01-03T12:28:27.130153595-05:00","closed_at":"2026-01-03T12:28:27.130153595-05:00","close_reason":"Completed in PR #40"}
{"id":"reckon-06d","title":"CLI task list: use compact tabular format by default","description":"## Problem\n\nThe CLI `rk task list` output takes too much vertical space when there are more than 3-5 tasks. Each task currently consumes 4-5 lines in the default verbose format:\n\n```\n[1] [active] Task Title Here\n  ID: abc123def456\n  Created: 2026-01-04\n  Tags: work, urgent\n\n[2] [done] Another Task\n  ID: xyz789uvw012\n  Created: 2026-01-02\n  Tags: personal\n```\n\nWith 10 tasks, this is 40-50 lines of output - too much scrolling.\n\n## Current Implementation\n\n**File**: `internal/cli/task.go` lines 61-118\n\nThree output modes exist:\n1. **Default (verbose)**: 4-5 lines per task (ID, Created, Tags on separate lines)\n2. **Compact** (`--compact` flag): Single line per task, but loses useful info\n3. **JSON** (`--json` flag): Raw JSON array\n\nThe verbose output is rendered in `taskListCmd.RunE` (lines 105-114) using `fmt.Printf()`.\n\n## Desired Behavior\n\nReplace default output with a columnar/tabular format:\n\n```\nID         STATUS   CREATED     TAGS          TITLE\nabc123de   active   2026-01-04  work,urgent   Task Title Here\nxyz789uv   done     2026-01-02  personal      Another Task\ndef456gh   active   2026-01-03  -             Third task with no tags\n```\n\nFeatures:\n- Column headers for clarity\n- Truncated ID (first 8 chars) to save space\n- Aligned columns for readability\n- Single line per task\n- Tags joined with commas, or `-` if none\n- Title can wrap or truncate based on terminal width\n\n## Implementation Options\n\n1. **Use `text/tabwriter`** from Go stdlib for auto-aligned columns\n2. **Use `tablewriter`** library (github.com/olekukonko/tablewriter) for more features\n3. **Manual formatting** with `fmt.Sprintf` and fixed widths\n\n## Acceptance Criteria\n\n- [ ] Default output is tabular (no `--compact` flag needed)\n- [ ] Column headers are shown\n- [ ] One task per line\n- [ ] All useful fields visible (ID, status, created, tags, title)\n- [ ] Old verbose format available via `--verbose` or `-v` flag (optional)\n- [ ] `--json` output unchanged\n- [ ] Terminal width respected (truncate title if needed)\n\n## Files to Modify\n\n- `internal/cli/task.go`:\n  - Lines 61-118: `taskListCmd` - change default rendering\n  - Add `--verbose` flag if preserving old format\n  - Remove or repurpose `--compact` flag\n\n## Testing\n\n- Test output with 0, 1, 5, 20 tasks\n- Test tasks with no tags\n- Test tasks with long titles\n- Test narrow terminal widths","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T17:55:59.713991268-05:00","created_by":"chadd","updated_at":"2026-01-10T16:29:52.290985654-05:00","closed_at":"2026-01-10T16:29:52.290985654-05:00","close_reason":"Closed"}
{"id":"reckon-0e5","title":"Create TaskRepository for DB operations","description":"Create repository for task database operations.\n\n## File to Create\n\n`internal/journal/task_repository.go`\n\n## Methods to Implement\n\n```go\ntype TaskRepository struct {\n    db *sql.DB\n}\n\nfunc NewTaskRepository(db *sql.DB) *TaskRepository\n\n// SaveTask saves a task and its notes to the database\nfunc (r *TaskRepository) SaveTask(task *Task) error\n\n// SaveTasks saves multiple tasks (bulk operation)\nfunc (r *TaskRepository) SaveTasks(tasks []Task) error\n\n// GetAllTasks retrieves all tasks with their notes\nfunc (r *TaskRepository) GetAllTasks() ([]Task, error)\n\n// GetTaskByID retrieves a single task by ID\nfunc (r *TaskRepository) GetTaskByID(id string) (*Task, error)\n\n// DeleteTask deletes a task and its notes\nfunc (r *TaskRepository) DeleteTask(id string) error\n\n// DeleteTaskNote deletes a specific note\nfunc (r *TaskRepository) DeleteTaskNote(noteID string) error\n```\n\n## Implementation Details\n\n- Use transactions for operations affecting multiple tables\n- When saving task, also save/update notes\n- When loading tasks, join with task_notes and populate Notes slice\n- Sort notes by position when loading\n- Follow existing repository patterns from `internal/journal/repository.go`\n- Use prepared statements where appropriate\n\n## SQL Operations\n\n- INSERT/UPDATE tasks table\n- INSERT/UPDATE task_notes table (with task_id FK)\n- SELECT with JOIN for loading tasks with notes\n- DELETE with CASCADE for task removal\n\n## Acceptance Criteria\n\n- SaveTask persists task and all notes\n- GetAllTasks returns tasks with notes properly nested\n- GetTaskByID returns single task with notes\n- DeleteTask removes task and cascades to notes\n- DeleteTaskNote removes specific note\n- Transactions used for multi-table operations\n\n## Dependencies\n\nRequires: Task/TaskNote models and DB schema\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 2, Step 3.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:46:28.690148201-05:00","updated_at":"2025-12-28T16:36:09.824491611-05:00","closed_at":"2025-12-28T11:52:54.552414492-05:00","close_reason":"TaskRepository implemented with comprehensive CRUD operations, transactions, CASCADE deletes, and full test coverage. Code reviewed and approved. PR #15 merged to main.","dependencies":[{"issue_id":"reckon-0e5","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:41.579731137-05:00","created_by":"daemon"}]}
{"id":"reckon-0oj","title":"Multi-day tasks: TUI cannot expand to show details, CLI list shows no details, task details from CLI not saved to markdown files","description":"User reports that multi-day tasks cannot be expanded in the TUI to show details. The CLI task list command shows no details (only basic metadata). Task details entered via CLI (log entries) do not appear in the markdown files for the tasks. Investigation shows that the code has separate systems for journal tasks (expandable in TUI) and multi-day tasks (accessed via Ctrl+T picker). The CLI task show command outputs the markdown content, and logging should update the files, but user reports it doesn't work.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T12:52:17.652487595-05:00","created_by":"chadd","updated_at":"2026-01-10T13:13:28.435806894-05:00","closed_at":"2026-01-10T13:13:28.435806894-05:00","close_reason":"Closed"}
{"id":"reckon-125","title":"Add visual indicators for task dates and status","description":"Display scheduled dates, deadlines, and status indicators in task rows.\n\n## Visual Elements\n\n### Date Display\n\nShow date information in task rows:\n```\nâ€¢ Fix critical bug            ğŸ”´ overdue (due Jan 10)\nâ€¢ Review PR #123              ğŸ“… today\nâ€¢ Write docs                  ğŸ“… Jan 15  due Jan 17 ğŸŸ¡\nâ€¢ Future work                 ğŸ“… Jan 25\nâ€¢ Unscheduled task\n```\n\n### Status Indicators\n\n**Icons**:\n- ğŸ”´ Red circle - Overdue (deadline passed)\n- ğŸŸ¡ Yellow circle - Due soon (deadline within 2 days)\n- ğŸ“… Calendar - Scheduled date shown\n- (no icon) - No deadline urgency\n\n**Color Coding** (using lipgloss):\n- Overdue: Red text\n- Due today: Yellow text\n- Due this week: Orange text\n- Scheduled: Dim/gray date\n- Normal: Default color\n\n### Format\n\n**With scheduled only**:\n```\nâ€¢ Task name  ğŸ“… Jan 15\n```\n\n**With deadline only**:\n```\nâ€¢ Task name  due Jan 15 ğŸŸ¡\n```\n\n**With both**:\n```\nâ€¢ Task name  ğŸ“… Jan 15  due Jan 17 ğŸŸ¡\n```\n\n**Overdue**:\n```\nâ€¢ Task name  ğŸ”´ overdue (due Jan 10)\n```\n\n## Changes\n\n**File**: `internal/tui/components/task_list.go`\n\nUpdate task row rendering:\n```go\nfunc renderTaskRow(task Task, selected bool) string {\n    // Build: checkbox + text + date info + status icon\n}\n\nfunc formatDateInfo(task Task) string {\n    // Format scheduled/deadline dates\n}\n\nfunc getStatusIndicator(task Task) string {\n    // Return icon based on deadline status\n}\n```\n\n## Date Display Rules\n\n- Show relative dates for recent items (today, tomorrow, yesterday)\n- Show short date for current year (Jan 15)\n- Show full date for other years (Jan 15, 2026)\n- Align dates to right side of task list\n\n## Acceptance Criteria\n\n- Scheduled date displayed with ğŸ“… icon\n- Deadline date displayed with \"due\" prefix\n- Overdue tasks show ğŸ”´ icon and \"overdue\" text\n- Due soon tasks show ğŸŸ¡ icon\n- Color coding applied correctly\n- Dates aligned and formatted consistently\n- Works with task list collapsing/expanding\n\n## Dependencies\n\n- Requires: reckon-mvl (Task model with dates)\n- Requires: reckon-3wq (Time-grouped view to render in)\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T21:32:01.340722567-05:00","created_by":"chadd","updated_at":"2026-01-11T21:32:01.340722567-05:00","dependencies":[{"issue_id":"reckon-125","depends_on_id":"reckon-mvl","type":"blocks","created_at":"2026-01-11T21:32:55.916930908-05:00","created_by":"chadd"},{"issue_id":"reckon-125","depends_on_id":"reckon-3wq","type":"blocks","created_at":"2026-01-11T21:32:56.065608008-05:00","created_by":"chadd"}]}
{"id":"reckon-15k","title":"TTY detection stub always returns true in review.go","description":"The isTerminal() function in internal/cli/review.go:172-176 always returns true, making the interactive mode check meaningless. If someone pipes output or redirects to a file, the program will still try to read from stdin, potentially causing hangs. Fix: Use golang.org/x/term.IsTerminal() or remove the check entirely.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T20:21:13.680400149-05:00","created_by":"chadd","updated_at":"2026-01-08T21:10:39.603391198-05:00","closed_at":"2026-01-08T21:10:39.603391198-05:00","close_reason":"Fixed TTY detection: replaced stub with proper term.IsTerminal(), added nil check, validates both stdin and stdout"}
{"id":"reckon-18e","title":"Remove unused legacy task package (internal/task)","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-10T12:05:55.678135538-05:00","created_by":"chadd","updated_at":"2026-01-10T12:05:55.678135538-05:00"}
{"id":"reckon-1l8","title":"Phase 3: Time Tracking","description":"Track time spent on meetings, breaks, and optionally tasks. Calculate daily time summaries.\n\n**Requires Phase 2**: Uses task infrastructure for task-level time tracking.\n\n**Time Entry Formats** (in log):\n```\n- 10:30 [meeting:standup] 30m       # meeting with duration\n- 12:00 [break] 45m                  # break with duration\n- 14:00 [task:abc123] Started work   # task entry (duration calculated from next entry or end of day)\n```\n\n**Features to Implement**:\n\n1. **Duration Parsing**\n   - Extend log entry parser to extract Xm or Xh duration\n   - Store in duration_minutes field\n\n2. **Time Calculation Service** (internal/time/)\n   - CalculateDaySummary(date): aggregate time by category\n   - For tasks without explicit duration, calculate from timestamps\n   - Categories: meetings, breaks, tasks (by task), untracked\n\n3. **Daily Summary Component** (internal/tui/components/summary.go)\n   - Shows time breakdown at bottom of journal view\n   - Toggle with 's' key\n   - Format: \"Meetings: 1h30m | Tasks: 4h15m | Breaks: 45m | Untracked: 1h30m\"\n\n4. **Optional Start/Stop Timer**\n   - rk start \u003ctask-id\u003e - log \"Started work on [task]\"\n   - rk stop - log \"Stopped\" (duration auto-calculated)\n   - TUI: Ctrl+S to start/stop timer on current task\n\n5. **CLI Commands**:\n   - rk summary - output today's time breakdown\n   - rk summary --week - output week's time breakdown\n   - rk start \u003ctask-id\u003e - start timer on task\n   - rk stop - stop current timer\n\n**Acceptance Criteria**:\n- Log entries with 30m duration are parsed and stored\n- [meeting:name] Xm entries are categorized as meetings\n- [break] Xm entries are categorized as breaks\n- rk summary outputs time breakdown for today\n- TUI shows time summary (toggle with 's')\n- Task time calculated from log entry timestamps\n- Start/stop timer commands work","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T16:48:37.245472509-05:00","updated_at":"2026-01-02T10:47:38.754435733-05:00","closed_at":"2026-01-02T10:47:38.754435733-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-1l8","depends_on_id":"reckon-9cn","type":"blocks","created_at":"2025-12-22T16:49:06.430378979-05:00","created_by":"daemon"}],"pinned":true}
{"id":"reckon-2a9","title":"TUI: Show current date in UI","description":"User can navigate between dates with h/l keys but has no visual confirmation of what date they're viewing.\n\nCurrent state is tracked in m.currentDate but not displayed anywhere.\n\nShould show current date in:\n- Option 1: Status bar (bottom)\n- Option 2: Title area (top)\n- Option 3: Both\n\nConsider also showing if it's 'Today' vs the actual date.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:53:12.522004806-05:00","updated_at":"2025-12-22T19:49:41.09159723-05:00","closed_at":"2025-12-22T19:49:41.09159723-05:00","close_reason":"Implemented date display in TUI status bar. Shows 'Today' or formatted date (Mon, Jan 2, 2006) with smart spacing alongside keyboard hints."}
{"id":"reckon-2gu","title":"Space key does not toggle task completion in TUI","description":"Space key does not toggle task completion in TUI despite being in Tasks section. Enter key works for expanding tasks with notes, but space key has no effect. Code analysis shows the delegation should work, but something is preventing the TaskToggleMsg from being processed or the task status from updating. Debug output added previously showed the message flow, but the issue persists.","status":"closed","priority":1,"issue_type":"bug","assignee":"chadd","created_at":"2026-01-10T16:11:59.312644593-05:00","created_by":"chadd","updated_at":"2026-01-11T19:03:49.935995761-05:00","closed_at":"2026-01-11T19:03:49.935995761-05:00","close_reason":"Fixed by database migrations: tags column (0748d4b) and PRIMARY KEY constraint (1c90bdb)"}
{"id":"reckon-2rs","title":"TUI: Implement task edit functionality (currently disabled)","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-10T16:56:03.698904664-05:00","created_by":"chadd","updated_at":"2026-01-12T10:04:43.914560578-05:00","closed_at":"2026-01-12T10:04:43.914560578-05:00","close_reason":"Closed"}
{"id":"reckon-34m","title":"Implement stale task review for journal task system","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-10T12:05:55.456506696-05:00","created_by":"chadd","updated_at":"2026-01-10T12:05:55.456506696-05:00"}
{"id":"reckon-38a","title":"Implement note parser and writer with link extraction","description":"Parse and write note markdown files with frontmatter and [[slug]] link extraction.\n\n## Note File Format\n\nExample: `~/.reckon/notes/git-interactive-rebase.md`\n\n```markdown\n---\ntitle: Git interactive rebase workflow\ncreated: 2025-01-12\ntags: [git, workflow]\n---\n\nTo squash the last 3 commits:\n    git rebase -i HEAD~3\n\nChange 'pick' to 'squash' for commits to combine.\n\n## See Also\n- [[git-bisect-workflow]]\n- [[git-cherry-pick]]\n```\n\n## Parser\n\n**File**: `internal/note/parser.go`\n\n```go\nfunc ParseNote(filePath string) (*Note, error)\n```\n\n**Features**:\n- Parse YAML frontmatter (title, created, tags)\n- Extract content (everything after frontmatter)\n- Extract [[slug]] references from content\n- Handle missing frontmatter gracefully\n- Validate required fields (title, created)\n\n**Link Extraction**:\n```go\nfunc ExtractLinks(content string) []string {\n    // Find all [[slug]] patterns\n    // Return unique slugs\n    // Example: \"See [[foo]] and [[bar]]\" -\u003e [\"foo\", \"bar\"]\n}\n```\n\n**Slug Generation**:\n```go\nfunc GenerateSlug(title string) string {\n    // Lowercase\n    // Replace spaces/underscores with hyphens\n    // Remove special chars\n    // \"Git Interactive Rebase\" -\u003e \"git-interactive-rebase\"\n}\n```\n\n## Writer\n\n**File**: `internal/note/writer.go`\n\n```go\nfunc WriteNote(note *Note, filePath string) error\n```\n\n**Features**:\n- Serialize to markdown with frontmatter\n- Format tags as YAML array\n- Preserve content exactly (don't modify [[links]])\n- Create parent directories if needed\n\n**Output Format**:\n```markdown\n---\ntitle: {title}\ncreated: {YYYY-MM-DD}\ntags: [{tag1}, {tag2}]\n---\n\n{content}\n```\n\n## Round-Trip Testing\n\nParser and writer must preserve content:\n```\nOriginal file -\u003e Parse -\u003e Write -\u003e Should match original\n```\n\n## Acceptance Criteria\n\n- ParseNote extracts title, created, tags from frontmatter\n- ParseNote extracts content (body after frontmatter)\n- ExtractLinks finds all [[slug]] references\n- GenerateSlug creates valid slugs from titles\n- WriteNote serializes Note to markdown\n- Round-trip preserves all data\n- Parser handles missing optional fields\n- Parser errors on missing required fields (title, created)\n- Unit tests for parsing various note formats\n- Unit tests for link extraction edge cases\n- Unit tests for slug generation\n\n## Test Cases\n\n**Parsing**:\n- Note with all fields\n- Note with empty tags\n- Note with multiple [[links]]\n- Note with nested [[links]] in lists\n- Note without frontmatter (error)\n- Note with invalid YAML (error)\n\n**Link Extraction**:\n- Single link: `[[foo]]` -\u003e [\"foo\"]\n- Multiple links: `[[foo]] and [[bar]]` -\u003e [\"foo\", \"bar\"]\n- Duplicate links: `[[foo]] and [[foo]]` -\u003e [\"foo\"]\n- No links: \"plain text\" -\u003e []\n- Links with hyphens: `[[foo-bar]]` -\u003e [\"foo-bar\"]\n\n**Slug Generation**:\n- \"Simple Title\" -\u003e \"simple-title\"\n- \"Title With CAPS\" -\u003e \"title-with-caps\"\n- \"Special!@# Chars?\" -\u003e \"special-chars\"\n- \"Multiple   Spaces\" -\u003e \"multiple-spaces\"\n\n## Dependencies\n\n- Requires: reckon-plv (Note model)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:37:00.949675305-05:00","created_by":"chadd","updated_at":"2026-01-11T21:37:00.949675305-05:00","dependencies":[{"issue_id":"reckon-38a","depends_on_id":"reckon-plv","type":"blocks","created_at":"2026-01-11T21:42:04.368179624-05:00","created_by":"chadd"}]}
{"id":"reckon-39e","title":"Add TUI keyboard shortcuts for task scheduling","description":"Implement keyboard shortcuts to schedule tasks and set deadlines from TUI.\n\n## Keyboard Shortcuts\n\nWhen task is focused in task list:\n\n**'s' key** - Schedule task\n- Opens date picker component\n- User enters date (absolute or relative)\n- Date saved to task's scheduled_date\n- Task moves to appropriate section (TODAY/THIS WEEK/ALL)\n\n**'D' key** - Set deadline (capital D to avoid conflict)\n- Opens date picker component\n- User enters deadline date\n- Date saved to task's deadline_date\n- Visual indicator updates\n\n**'c' key** - Clear schedule/deadline\n- Show submenu: \"Clear: [S]chedule [D]eadline [B]oth ESC:cancel\"\n- 's' clears scheduled_date\n- 'd' clears deadline_date\n- 'b' clears both\n- ESC cancels\n\n## Integration\n\n**File**: `internal/tui/model.go`\n\nHandle key presses in task list:\n```go\ncase \"s\":\n    if m.focusedSection == SectionTasks \u0026\u0026 taskSelected {\n        m.showDatePicker(DatePickerModeSchedule)\n    }\n\ncase \"D\":\n    if m.focusedSection == SectionTasks \u0026\u0026 taskSelected {\n        m.showDatePicker(DatePickerModeDeadline)\n    }\n\ncase \"c\":\n    if m.focusedSection == SectionTasks \u0026\u0026 taskSelected {\n        m.showClearDateMenu()\n    }\n```\n\n**Date Picker Callbacks**:\n- OnConfirm: Save date to task, refresh view, show success message\n- OnCancel: Close picker, return to task list\n\n**Success Messages**:\n```\nâœ“ Task scheduled for Jan 15\nâœ“ Deadline set to Jan 20\nâœ“ Schedule cleared\n```\n\n## Status Bar Updates\n\n**File**: `internal/tui/components/status_bar.go`\n\nUpdate hints for Tasks section:\n```\nTasks: â†‘â†“:nav  space:toggle  enter:expand  s:schedule  D:deadline  c:clear  d:delete\n```\n\n## View Refresh\n\nAfter scheduling:\n- Task list re-renders\n- Task moves to correct section (if grouping changed)\n- Cursor follows task to new position\n- Success message shown briefly\n\n## Acceptance Criteria\n\n- 's' key opens date picker for scheduling\n- 'D' key opens date picker for deadline\n- 'c' key opens clear menu with options\n- Date picker integration works correctly\n- Tasks move to correct section after scheduling\n- Success messages shown after actions\n- Status bar shows correct hints\n- Works with both keyboard and no mouse needed\n\n## Dependencies\n\n- Requires: reckon-680 (Date picker component)\n- Requires: reckon-mvl (Task model with schedule methods)\n- Requires: reckon-3wq (Time-grouped view for section movement)\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T21:32:20.677513721-05:00","created_by":"chadd","updated_at":"2026-01-11T21:32:20.677513721-05:00","dependencies":[{"issue_id":"reckon-39e","depends_on_id":"reckon-680","type":"blocks","created_at":"2026-01-11T21:32:56.207189982-05:00","created_by":"chadd"},{"issue_id":"reckon-39e","depends_on_id":"reckon-mvl","type":"blocks","created_at":"2026-01-11T21:32:56.340809333-05:00","created_by":"chadd"},{"issue_id":"reckon-39e","depends_on_id":"reckon-3wq","type":"blocks","created_at":"2026-01-11T21:32:56.491857332-05:00","created_by":"chadd"}]}
{"id":"reckon-3dc","title":"Implement integration tests for core functionality","description":"Create comprehensive integration test suite for existing functionality including CLI commands, database operations, file system integration, and TUI workflows.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T09:00:53.529841865-05:00","updated_at":"2025-12-29T14:52:52.472432382-05:00","closed_at":"2025-12-28T16:43:18.407952083-05:00"}
{"id":"reckon-3e9","title":"Phase 1.10: Implement file watcher for external changes","description":"Implement file watching using fsnotify to detect external changes to journal files.\n\n**Features**:\n- Watch ~/.reckon/journal/ directory\n- Debounce changes (100ms)\n- Re-index changed files to SQLite\n- Notify TUI to reload if current journal changed\n\n**Files**:\n- internal/sync/watcher.go\n- Integration with TUI model for live reload","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T17:17:32.866318663-05:00","updated_at":"2025-12-23T20:25:36.703764063-05:00","closed_at":"2025-12-23T20:25:36.703764063-05:00","close_reason":"Closed"}
{"id":"reckon-3kc","title":"Integrate time-grouped view with task details pane positioning","description":"Implement smart positioning for task details pane based on selected task's section.\n\n## Context\n\nWhen the task details pane (reckon-egt) is implemented, it should show details without covering the selected task. The positioning logic depends on which time-grouped section contains the selected task.\n\n## Positioning Rules\n\n**Default behavior**:\n- Details pane covers/replaces the bottom section (ALL TASKS)\n- Works when selected task is in TODAY or THIS WEEK sections\n\n**Exception**:\n- If selected task IS in the ALL TASKS section\n- Details pane shows in the middle section (THIS WEEK area)\n- This keeps the selected task visible\n\n## Layout Examples\n\n### Task in TODAY section (default)\n```\nâ•­â”€ TODAY (3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Fix critical bug â† SELECTED  â”‚\nâ”‚ â€¢ Review PR #123               â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\nâ•­â”€ THIS WEEK (5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Write docs                   â”‚\nâ”‚ â€¢ Code review                  â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\nâ•­â”€ TASK DETAILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â† Replaces ALL TASKS section\nâ”‚ Fix critical bug               â”‚\nâ”‚                                â”‚\nâ”‚ Notes:                         â”‚\nâ”‚ - Broke in production          â”‚\nâ”‚ - Rollback planned             â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n### Task in ALL TASKS section (exception)\n```\nâ•­â”€ TODAY (3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Fix critical bug             â”‚\nâ”‚ â€¢ Review PR #123               â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\nâ•­â”€ TASK DETAILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â† Replaces THIS WEEK section\nâ”‚ Future project planning        â”‚\nâ”‚                                â”‚\nâ”‚ Notes:                         â”‚\nâ”‚ - Research phase               â”‚\nâ”‚ - Due next quarter             â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\nâ•­â”€ ALL TASKS (42) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Future project... â† SELECTED â”‚\nâ”‚ â€¢ Unscheduled task             â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n## Implementation\n\n**File**: `internal/tui/model.go`\n\nAdd field to track detail pane position:\n```go\ntype Model struct {\n    // ... existing fields\n    detailPanePosition DetailPanePosition\n}\n\ntype DetailPanePosition int\n\nconst (\n    DetailPaneBottom DetailPanePosition = iota  // Replace ALL TASKS\n    DetailPaneMiddle                             // Replace THIS WEEK\n)\n```\n\n**Calculate position**:\n```go\nfunc (m *Model) updateDetailPanePosition() {\n    selectedTask := m.getSelectedTask()\n    if selectedTask == nil {\n        return\n    }\n    \n    // Determine which section contains selected task\n    section := m.getTaskSection(selectedTask)\n    \n    if section == SectionAllTasks {\n        m.detailPanePosition = DetailPaneMiddle\n    } else {\n        m.detailPanePosition = DetailPaneBottom\n    }\n}\n```\n\n**Rendering**:\n```go\nfunc (m Model) View() string {\n    // Render TODAY section (always)\n    todayView := m.renderTodaySection()\n    \n    // Render middle section (THIS WEEK or DETAILS)\n    var middleView string\n    if m.showTaskDetails \u0026\u0026 m.detailPanePosition == DetailPaneMiddle {\n        middleView = m.renderTaskDetails()\n    } else {\n        middleView = m.renderThisWeekSection()\n    }\n    \n    // Render bottom section (ALL TASKS or DETAILS)\n    var bottomView string\n    if m.showTaskDetails \u0026\u0026 m.detailPanePosition == DetailPaneBottom {\n        bottomView = m.renderTaskDetails()\n    } else {\n        bottomView = m.renderAllTasksSection()\n    }\n    \n    return lipgloss.JoinVertical(lipgloss.Left, todayView, middleView, bottomView)\n}\n```\n\n## Acceptance Criteria\n\n- When task in TODAY selected, details show in bottom area\n- When task in THIS WEEK selected, details show in bottom area\n- When task in ALL TASKS selected, details show in middle area\n- Selected task always remains visible when details shown\n- Position updates when navigating between tasks\n- Position updates when task moves sections (after scheduling)\n- Smooth transitions between positions\n\n## Dependencies\n\n- Requires: reckon-3wq (Time-grouped task view)\n- Integrates with: reckon-egt (Task details pane - may not be implemented yet)\n\n## Notes\n\nThis ticket sets up the positioning logic. If reckon-egt (task details pane) is not yet implemented, this ticket should:\n1. Create the positioning logic framework\n2. Add placeholder rendering for testing\n3. Make it easy to plug in actual details component later\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T21:32:45.193652637-05:00","created_by":"chadd","updated_at":"2026-01-11T21:32:45.193652637-05:00","dependencies":[{"issue_id":"reckon-3kc","depends_on_id":"reckon-3wq","type":"blocks","created_at":"2026-01-11T21:32:56.641596891-05:00","created_by":"chadd"}]}
{"id":"reckon-3wq","title":"Implement time-grouped task list view (TODAY/THIS WEEK/ALL TASKS)","description":"Refactor task list to organize tasks by temporal proximity.\n\n## Overview\n\nReplace flat task list with three time-based sections:\n1. **TODAY** - scheduled/due today, overdue tasks\n2. **THIS WEEK** - scheduled/due this week (excluding today)\n3. **ALL TASKS** - everything else (unscheduled, future, someday)\n\n## Changes\n\n**File**: `internal/tui/components/task_list.go`\n\n### Data Structure\n\nGroup tasks by timeframe:\n```go\ntype TimeGroupedTasks struct {\n    Today    []Task\n    ThisWeek []Task\n    AllTasks []Task\n}\n\nfunc GroupTasksByTime(tasks []Task) TimeGroupedTasks\n```\n\n### Rendering\n\n```\nâ•­â”€ TODAY (3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Fix critical bug ğŸ”´ overdue  â”‚\nâ”‚ â€¢ Review PR #123 ğŸ“… today      â”‚\nâ”‚ â€¢ Deploy feature ğŸ“… Jan 11     â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\nâ•­â”€ THIS WEEK (5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Write docs (due Jan 15) ğŸŸ¡   â”‚\nâ”‚ â€¢ Code review (Jan 14)         â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\nâ•­â”€ ALL TASKS (42) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Future work (Jan 25)         â”‚\nâ”‚ â€¢ Unscheduled task             â”‚\nâ”‚ â€¢ Someday/maybe                â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n### Section Headers\n\n- Bordered box with title and count\n- Distinct styling from task rows\n- Counts update dynamically as tasks move\n\n### Navigation\n\n- j/k navigate across all sections seamlessly\n- Cursor wraps between sections\n- Current section highlighted\n- Selected task highlighted within section\n\n### Grouping Logic\n\n**TODAY**:\n- scheduled_date = today\n- deadline_date = today\n- deadline_date \u003c today (overdue)\n\n**THIS WEEK**:\n- scheduled_date in current week (excluding today)\n- deadline_date in current week (excluding today)\n- Week = Monday-Sunday (or configurable)\n\n**ALL TASKS**:\n- scheduled_date \u003e this week OR NULL\n- deadline_date \u003e this week OR NULL\n- Tasks with status = someday\n\n## Acceptance Criteria\n\n- Task list shows three distinct sections\n- Tasks automatically grouped based on scheduled/deadline dates\n- Section headers show accurate counts\n- Navigation works seamlessly across sections\n- Cursor position preserved when tasks move between sections\n- Empty sections show helpful message (\"No tasks for today\")\n- Unit tests for grouping logic\n\n## Dependencies\n\n- Requires: reckon-mvl (Task model with dates)\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T21:31:43.941763366-05:00","created_by":"chadd","updated_at":"2026-01-11T21:31:43.941763366-05:00","dependencies":[{"issue_id":"reckon-3wq","depends_on_id":"reckon-mvl","type":"blocks","created_at":"2026-01-11T21:32:55.768182-05:00","created_by":"chadd"}]}
{"id":"reckon-40n","title":"Redesign TUI model for new layout and components","description":"Redesign main TUI model to support 40-40-18 layout with new components.\n\n## File to Modify\n\n`internal/tui/model.go`\n\n## Struct Changes\n\n**Add fields:**\n```go\ntaskService  *journal.TaskService\ntaskList     *components.TaskList\nscheduleView *components.ScheduleView\ntextEntryBar *components.TextEntryBar\ntasks        []journal.Task  // cached tasks\n```\n\n**Remove fields:**\n```go\ninputMode    bool   // REMOVE - replaced by text entry bar focus\ninputType    string // REMOVE - replaced by text entry bar mode\ntextInput    textinput.Model // REMOVE - replaced by text entry bar\n```\n\n**Modify Section enum (add):**\n```go\nSectionTasks    Section = 3\nSectionSchedule Section = 4\n```\n\n## Init() Changes\n\n- Load tasks: Add `loadTasks()` tea.Cmd\n- Initialize text entry bar: `textEntryBar: components.NewTextEntryBar()`\n\n## View() Rewrite\n\n```go\nfunc (m *Model) View() string {\n    // Calculate dimensions\n    dims := layout.CalculatePaneDimensions(m.width, m.height)\n    \n    // Get pane views\n    logsView := m.logView.View()  // existing\n    tasksView := m.taskList.View()  // NEW\n    \n    // Stack right sidebar\n    m.scheduleView.SetSize(dims.RightWidth, dims.ScheduleHeight)\n    m.intentionList.SetSize(dims.RightWidth, dims.IntentionsHeight)\n    m.winsView.SetSize(dims.RightWidth, dims.WinsHeight)\n    \n    rightSidebar := lipgloss.JoinVertical(\n        lipgloss.Top,\n        m.scheduleView.View(),\n        m.intentionList.View(),\n        m.winsView.View(),\n    )\n    \n    // Join main panes horizontally\n    borderStyle := lipgloss.NewStyle().BorderRight(true)\n    content := lipgloss.JoinHorizontal(\n        lipgloss.Top,\n        borderStyle.Render(logsView),\n        borderStyle.Render(tasksView),\n        rightSidebar,\n    )\n    \n    // Add text entry bar\n    textEntry := m.textEntryBar.View()\n    \n    // Add status bar\n    status := m.statusBar.View()\n    \n    return content + \"\\n\" + textEntry + \"\\n\" + status\n}\n```\n\n## Update() Changes\n\n**Remove input mode handling** (lines 132-148)\n\n**Add keyboard shortcuts:**\n- `t`: Set text entry mode to task, focus\n- `n`: Add note to selected task (if in tasks section)\n\n**Modify existing shortcuts:**\n- `i`: Set text entry mode to intention, focus\n- `w`: Set text entry mode to win, focus\n- `L`: Set text entry mode to log, focus\n\n**Handle text entry:**\n- `enter`: Submit based on mode, blur text entry\n- `esc`: Blur text entry, clear mode\n\n**Delegate to components:**\n- When textEntryBar is focused, delegate to it\n- When in Tasks section, delegate to taskList\n\n**Add message handlers:**\n```go\ncase tasksLoadedMsg:\n    m.tasks = msg.tasks\n    m.taskList = components.NewTaskList(msg.tasks)\n    return m, nil\n\ncase taskToggledMsg:\n    return m, m.loadTasks()\n\ncase taskAddedMsg:\n    return m, m.loadTasks()\n```\n\n## New Message Types\n\n```go\ntype tasksLoadedMsg struct {\n    tasks []journal.Task\n}\n\ntype taskToggledMsg struct{}\ntype taskAddedMsg struct{}\ntype noteAddedMsg struct{}\n```\n\n## New Helper Functions\n\n```go\nfunc (m *Model) loadTasks() tea.Cmd {\n    return func() tea.Msg {\n        tasks, err := m.taskService.GetAllTasks()\n        if err != nil {\n            return errMsg{err}\n        }\n        return tasksLoadedMsg{tasks}\n    }\n}\n\nfunc (m *Model) submitTextEntry() tea.Cmd {\n    value := m.textEntryBar.GetValue()\n    if value == \"\" {\n        return nil\n    }\n    \n    mode := m.textEntryBar.mode\n    \n    return func() tea.Msg {\n        var err error\n        switch mode {\n        case components.ModeTask:\n            err = m.taskService.AddTask(value)\n            if err != nil {\n                return errMsg{err}\n            }\n            return taskAddedMsg{}\n        case components.ModeIntention:\n            err = m.service.AddIntention(m.currentJournal, value)\n            // ... existing logic\n        // ... other modes\n        }\n    }\n}\n```\n\n## Acceptance Criteria\n\n- Model uses new components (TaskList, ScheduleView, TextEntryBar)\n- View() renders 40-40-18 layout\n- Keyboard shortcuts focus text entry bar\n- Text entry submits correctly based on mode\n- Tasks load and display\n- Schedule items load and display\n- Removed input mode logic\n- Proper message handling for tasks\n\n## Dependencies\n\nRequires: All UI components (Layout, TaskList, ScheduleView, TextEntryBar)\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 4, Step 5.1-5.5)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:49:20.221850015-05:00","updated_at":"2025-12-29T16:28:52.121926992-05:00","closed_at":"2025-12-29T16:28:52.121926992-05:00","close_reason":"Implemented in PR #27 - TUI model redesigned for 40-40-18 layout with new components","dependencies":[{"issue_id":"reckon-40n","depends_on_id":"reckon-jaq","type":"blocks","created_at":"2025-12-23T19:49:42.153852581-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-ujt","type":"blocks","created_at":"2025-12-23T19:49:42.197948105-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-8id","type":"blocks","created_at":"2025-12-23T19:49:42.243092603-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-zx7","type":"blocks","created_at":"2025-12-23T19:49:42.288120014-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-fcm","type":"blocks","created_at":"2025-12-23T19:49:42.328686036-05:00","created_by":"daemon"},{"issue_id":"reckon-40n","depends_on_id":"reckon-82m","type":"blocks","created_at":"2025-12-23T19:49:42.383409007-05:00","created_by":"daemon"}],"pinned":true}
{"id":"reckon-440","title":"Add task file storage methods","description":"Add file system operations for tasks.md.\n\n## File to Modify\n\n`internal/storage/filesystem.go`\n\n## Methods to Add\n\n1. `GetTasksPath() (string, error)`:\n   - Return path to tasks.md in reckon directory\n   - Pattern: `~/.reckon/tasks.md`\n   - Use existing helper for getting reckon directory\n\n2. `ReadTasksFile() (string, FileInfo, error)`:\n   - Read content from tasks.md\n   - Return content, file info (for last modified), and error\n   - Return empty string if file doesn't exist (not an error)\n\n3. `WriteTasksFile(content string) error`:\n   - Write content to tasks.md\n   - Create file if it doesn't exist\n   - Use atomic write if possible (write to temp, rename)\n\n## Implementation Details\n\n- Follow existing patterns from journal file operations\n- Use `os.UserHomeDir()` to get home directory\n- Handle file not existing gracefully (create on first write)\n- Ensure directory exists before writing\n\n## Acceptance Criteria\n\n- GetTasksPath returns correct path (~/.reckon/tasks.md)\n- ReadTasksFile reads existing file\n- ReadTasksFile returns empty content (no error) if file doesn't exist\n- WriteTasksFile creates file if needed\n- WriteTasksFile overwrites existing file\n\n## Dependencies\n\nNone (just file operations)\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 2.4)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:45:57.302327655-05:00","updated_at":"2025-12-23T21:50:52.194995862-05:00","closed_at":"2025-12-23T21:50:52.194995862-05:00","close_reason":"Closed"}
{"id":"reckon-4ay","title":"Wire up TaskService in main.go","description":"Wire up TaskService in application initialization.\n\n## File to Modify\n\n`cmd/rk/main.go` (or wherever TUI is initialized)\n\n## Changes\n\n**Create TaskService instance:**\n```go\n// After creating journal service...\ntaskRepo := journal.NewTaskRepository(db)\ntaskService := journal.NewTaskService(taskRepo, filesystem)\n```\n\n**Pass to TUI model:**\n```go\n// Modify NewModel call\nmodel := tui.NewModel(journalService, taskService)\n```\n\n**Update TUI NewModel signature:**\nIn `internal/tui/model.go`:\n```go\nfunc NewModel(service *journal.Service, taskService *journal.TaskService) *Model {\n    // ...\n    return \u0026Model{\n        service:     service,\n        taskService: taskService,\n        // ...\n    }\n}\n```\n\n## Implementation Details\n\n- TaskService requires TaskRepository and Filesystem\n- Same DB connection used for both services\n- Initialization order: DB â†’ Filesystem â†’ Repos â†’ Services â†’ TUI\n\n## Acceptance Criteria\n\n- TaskService properly initialized\n- Passed to TUI model\n- TUI can call taskService methods\n- No initialization errors\n\n## Dependencies\n\nRequires: TaskService, TaskRepository, TUI model with taskService field\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 5, Step 6.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:49:20.606271676-05:00","updated_at":"2025-12-28T15:30:18.919006553-05:00","closed_at":"2025-12-28T15:30:18.919006553-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-4ay","depends_on_id":"reckon-fcm","type":"blocks","created_at":"2025-12-23T19:49:42.669218521-05:00","created_by":"daemon"},{"issue_id":"reckon-4ay","depends_on_id":"reckon-40n","type":"blocks","created_at":"2025-12-23T19:49:42.72207231-05:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"reckon-4ay","author":"chadd","text":"Ticket completed successfully. Note: There are two task systems in this codebase: 1) task.Service for CLI commands (Phase 2), 2) journal.TaskService for TUI redesign (Phase 1). This creates complexity when wiring services. Current approach needs refinement to handle dual task systems properly, but for now task functionality works in CLI and TUI redesign dependencies are unblocked.","created_at":"2025-12-28T20:30:09Z"}]}
{"id":"reckon-4l1","title":"Initialize journal.TaskService in CLI to fix task pane not showing tasks","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T11:55:35.319102025-05:00","created_by":"chadd","updated_at":"2026-01-02T11:56:35.574823572-05:00","closed_at":"2026-01-02T11:56:35.574823572-05:00","close_reason":"Closed"}
{"id":"reckon-4o2","title":"Phase 6: Task Scheduling \u0026 Calendar","description":"Add future task scheduling, deadlines, and recurring tasks. Extends the task system from Phase 2 to support time-based planning and organization.\n\n**Requires Phase 2**: Extends task infrastructure with date-based scheduling.\n\n## Core Concepts\n\n1. **Scheduled Date**: When you plan to work on a task (optional)\n2. **Deadline**: When the task must be completed by (optional)\n3. **Recurring Tasks**: Tasks that repeat on a schedule (optional, complex)\n\n## Task File Format Updates\n\nUpdate `tasks/\u003cid\u003e.md` to include scheduling fields:\n\n```markdown\n---\nid: abc123\ntitle: API refactor for v2 endpoints\ncreated: 2025-01-10\nstatus: active\ntags: [backend, api]\nscheduled: 2025-01-15\ndeadline: 2025-01-20\nrecurrence: weekly:monday\n---\n\n## Description\nRefactor the v2 endpoints to use the new middleware pattern.\n\n## Log\n\n### 2025-01-10\n- 14:00 Created task, outlined approach\n```\n\n## SQLite Schema Updates\n\n```sql\n-- Add columns to tasks table\nALTER TABLE tasks ADD COLUMN scheduled_date TEXT; -- YYYY-MM-DD when task is scheduled\nALTER TABLE tasks ADD COLUMN deadline_date TEXT;  -- YYYY-MM-DD when task is due\nALTER TABLE tasks ADD COLUMN recurrence_rule TEXT; -- Format: \"daily\" | \"weekly:monday\" | \"monthly:15\"\n\n-- New table for recurring task instances\nCREATE TABLE task_instances (\n  id TEXT PRIMARY KEY,\n  parent_task_id TEXT,\n  scheduled_date TEXT,\n  status TEXT, -- open, done, skipped\n  FOREIGN KEY (parent_task_id) REFERENCES tasks(id)\n);\n\n-- Index for efficient date queries\nCREATE INDEX idx_tasks_scheduled ON tasks(scheduled_date);\nCREATE INDEX idx_tasks_deadline ON tasks(deadline_date);\nCREATE INDEX idx_task_instances_date ON task_instances(scheduled_date);\n```\n\n## Features to Implement\n\n### 1. Task Scheduling (Core - HIGH PRIORITY)\n\n**Domain Model Updates** (internal/task/):\n- Add `ScheduledDate` and `DeadlineDate` to Task struct\n- Add `RecurrenceRule` to Task struct\n- `TaskService.ScheduleTask(id, date)` - set scheduled date\n- `TaskService.SetDeadline(id, date)` - set deadline\n- `TaskService.GetTasksForDate(date)` - tasks scheduled for specific date\n- `TaskService.GetTasksByTimeframe()` - returns tasks grouped: today, this week, rest\n- `TaskService.GetUpcomingDeadlines(days)` - tasks due within N days\n\n**Parser/Writer Updates** (internal/parser/):\n- Parse `scheduled:` and `deadline:` frontmatter fields\n- Parse `recurrence:` field (if present)\n- Write updated frontmatter when scheduling changes\n\n### 2. Time-Grouped Task List (HIGH PRIORITY)\n\n**Enhanced Task List View** (internal/tui/components/task_list.go):\n\nOrganize tasks into three temporal sections:\n\n1. **TODAY** (top section)\n   - Tasks scheduled for today\n   - Tasks with deadline today\n   - Visual indicator: ğŸ”´ overdue, ğŸŸ¡ due today\n\n2. **THIS WEEK** (middle section)\n   - Tasks scheduled for this week (excluding today)\n   - Tasks with deadline this week\n   - Show scheduled/deadline date next to task\n\n3. **ALL TASKS** (bottom section)\n   - All other tasks (unscheduled, future, someday)\n   - Existing task list behavior\n\n**Section Headers**:\n```\nâ•­â”€ TODAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Fix critical bug ğŸ”´ overdue  â”‚\nâ”‚ â€¢ Review PR #123 ğŸ“… today      â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\nâ•­â”€ THIS WEEK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Deploy feature (Jan 15)      â”‚\nâ”‚ â€¢ Write docs (due Jan 17) ğŸŸ¡   â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\nâ•­â”€ ALL TASKS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ Future work (Jan 25)         â”‚\nâ”‚ â€¢ Unscheduled task             â”‚\nâ”‚ â€¢ Someday/maybe                â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n**Navigation**:\n- j/k navigate across all sections\n- Sections are visually distinct but single scrollable view\n- Count badges on section headers: \"TODAY (3)\", \"THIS WEEK (5)\", \"ALL TASKS (42)\"\n\n**Integration with Task Details Pane** (reckon-egt):\n\nWhen task details pane is implemented, smart positioning:\n- **Default**: Details pane covers/replaces bottom section (ALL TASKS)\n- **Exception**: If selected task IS in bottom section, details show in middle section (THIS WEEK area)\n- This keeps the selected task visible while showing details\n\n### 3. Date Picker Component (HIGH PRIORITY)\n\n**Simple Date Input** (internal/tui/components/date_picker.go):\n- Text input with smart parsing\n- Quick shortcuts: t (today), tm (tomorrow), mon/tue/wed (next weekday), +3d (3 days from now)\n- Format: YYYY-MM-DD or relative expressions\n- Validation and error messages\n\n**TUI Task Scheduling Actions**:\n- When task focused, press 's' to schedule (opens date picker)\n- Press 'd' to set deadline (opens date picker)  \n- Press 'c' to clear schedule/deadline\n- Show scheduled/deadline date in task row\n\n### 4. CLI Commands (HIGH PRIORITY)\n\n**Scheduling**:\n```bash\nrk task schedule \u003cid\u003e \u003cdate\u003e          # Schedule task for date\nrk task schedule \u003cid\u003e tomorrow        # Relative dates\nrk task schedule \u003cid\u003e mon             # Next Monday\nrk task schedule \u003cid\u003e +7d             # 7 days from now\nrk task schedule \u003cid\u003e --clear         # Remove schedule\n\nrk task deadline \u003cid\u003e \u003cdate\u003e          # Set deadline\nrk task deadline \u003cid\u003e +7d             # Relative deadline\nrk task deadline \u003cid\u003e --clear         # Remove deadline\n```\n\n**Viewing Scheduled Tasks**:\n```bash\nrk task list --scheduled=2025-01-15   # Tasks for specific date\nrk task list --scheduled=today        # Tasks for today\nrk task list --scheduled=this-week    # Tasks this week\n\nrk task list --deadline=today         # Due today\nrk task list --deadline=this-week     # Due this week\nrk task list --overdue                # Past deadline\n\nrk task list --grouped                # Show time-grouped view (today/week/all)\n```\n\n### 5. Recurring Tasks (MEDIUM PRIORITY)\n\n**Recurrence Rules**:\n- `daily` - every day\n- `weekly:monday` - every Monday\n- `weekly:monday,friday` - multiple days\n- `monthly:15` - 15th of each month\n- `biweekly:monday` - every other Monday\n\n**Instance Generation** (internal/task/recurrence.go):\n- `GenerateInstances(task, startDate, endDate)` - create instances\n- Run daily (or on demand) to generate upcoming instances\n- Store in `task_instances` table\n\n**TUI Recurring Task Support**:\n- When creating task, option to set recurrence\n- Show recurring tasks with ğŸ”„ icon\n- Complete instance (not parent task)\n- Skip instance option\n\n**CLI Recurring Support**:\n```bash\nrk task recur \u003cid\u003e daily              # Set daily recurrence\nrk task recur \u003cid\u003e weekly:monday      # Weekly on Monday\nrk task recur \u003cid\u003e --clear            # Remove recurrence\n```\n\n### 6. Smart Features (MEDIUM PRIORITY)\n\n**Deadline Warnings**:\n- TUI shows warning icon when deadline approaching\n- Status bar shows overdue count\n- Suggest rescheduling overdue tasks during review\n\n**Daily Journal Integration**:\n- Show today's scheduled tasks in journal sidebar\n- Option to auto-populate Intentions from scheduled tasks\n- Mark tasks complete from journal view\n\n**Review System Integration**:\n- Include overdue tasks in review prompts\n- Include unscheduled active tasks in weekly review\n- Suggest scheduling tasks that have been active but unscheduled\n\n### 7. Calendar View (LOW PRIORITY - OPTIONAL)\n\n**Month Calendar Component** (internal/tui/components/calendar_view.go):\n- Month view showing dates with scheduled tasks\n- Highlight dates with tasks (count badge)\n- Highlight today\n- Navigate with arrow keys\n- Enter on date shows tasks for that day\n\n**TUI Calendar Mode** (Optional):\n- New mode: Calendar (Ctrl+C or 'c' from main)\n- Left pane: Month calendar with task indicators\n- Right pane: Tasks for selected date\n\n**CLI Calendar**:\n```bash\nrk calendar                           # Show current month\nrk calendar 2025-02                   # Show specific month\nrk calendar --upcoming                # Next 7 days with tasks\n```\n\n### 8. Migration Support\n\n**Database Migration** (internal/storage/migrations/):\n- Add new columns to tasks table\n- Create task_instances table\n- Migrate existing tasks (all have NULL scheduled/deadline)\n\n**Backward Compatibility**:\n- Tasks without scheduling work as before\n- Parser handles old format (no scheduled/deadline fields)\n\n## Acceptance Criteria\n\n**Core Scheduling**:\n- Can schedule task for future date via CLI and TUI\n- Can set deadline via CLI and TUI\n- Scheduled/deadline dates persist across restarts\n- Date picker supports relative dates (tomorrow, mon, +3d)\n\n**Time-Grouped Task View**:\n- Task list shows three sections: TODAY, THIS WEEK, ALL TASKS\n- Tasks automatically sort into correct section based on scheduled/deadline date\n- Section headers show count of tasks\n- Navigation works seamlessly across sections\n- Overdue tasks show in TODAY with warning indicator\n\n**CLI**:\n- `rk task schedule \u003cid\u003e \u003cdate\u003e` works with absolute and relative dates\n- `rk task deadline \u003cid\u003e \u003cdate\u003e` works\n- `rk task list --scheduled=today` shows today's tasks\n- `rk task list --overdue` shows overdue tasks\n- `rk task list --grouped` shows time-grouped output\n\n**Recurring Tasks** (if implemented):\n- Can create daily/weekly/monthly recurring tasks\n- Instances generated for next 30 days\n- Can complete/skip individual instances\n- Recurrence rule persists and generates new instances\n\n**Integration**:\n- Time-grouped view integrates with task details pane (reckon-egt)\n- Scheduled tasks appear in journal sidebar for that date\n- Completing task from journal marks it done\n- Review system includes overdue/unscheduled tasks\n\n## Implementation Phases\n\n**Phase 6.1: Basic Scheduling** (Foundational - HIGH PRIORITY)\n- Add scheduled_date and deadline_date fields\n- CLI commands for scheduling\n- Update parser/writer\n- Database migration\n- Date picker component\n\n**Phase 6.2: Time-Grouped Task View** (Major Feature - HIGH PRIORITY)\n- Implement today/week/all sections\n- Section headers with counts\n- Visual indicators for overdue/due soon\n- Integration with task details pane positioning\n\n**Phase 6.3: Recurring Tasks** (Advanced - MEDIUM PRIORITY)\n- Recurrence rule parsing\n- Instance generation\n- TUI recurring task UI\n- CLI recurrence commands\n\n**Phase 6.4: Smart Features** (Polish - MEDIUM PRIORITY)\n- Deadline warnings\n- Journal integration\n- Review system integration\n\n**Phase 6.5: Calendar View** (Optional - LOW PRIORITY)\n- Calendar component\n- TUI calendar mode\n- CLI calendar commands\n\n## Technical Considerations\n\n**Date Handling**:\n- Store dates as YYYY-MM-DD strings (simpler than time.Time)\n- Parse relative dates (tomorrow, +3d, mon, tue, wed)\n- Timezone-aware (use user's local timezone)\n\n**Week Calculation**:\n- \"This week\" = current week (Monday-Sunday or Sunday-Saturday based on locale)\n- Consider user preference for week start day\n\n**Recurrence Complexity**:\n- Start simple (daily, weekly, monthly)\n- Don't implement full iCal RRULE initially\n- Generate instances in advance (next 30-90 days)\n\n**Performance**:\n- Index scheduled_date and deadline_date\n- Efficient queries for time-grouped view\n- Batch instance generation (don't block UI)\n\n## Dependencies\n\n- Phase 2: Task Management (completed) - reckon-9cn\n- Phase 5: Periodic Review (completed) - reckon-92t\n- Integration with: reckon-egt (separate task details pane) - open\n\n## Future Enhancements\n\n- Natural language date parsing (\"next tuesday at 2pm\")\n- Task dependencies with scheduling constraints\n- Multi-day task spans (start date + end date)\n- Time-of-day scheduling (9am meeting vs anytime task)\n- Calendar sync (export to iCal)","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T20:52:06.52565983-05:00","created_by":"chadd","updated_at":"2026-01-11T21:29:30.308442246-05:00","dependencies":[{"issue_id":"reckon-4o2","depends_on_id":"reckon-8lc","type":"blocks","created_at":"2026-01-11T21:33:01.615844058-05:00","created_by":"chadd"},{"issue_id":"reckon-4o2","depends_on_id":"reckon-mvl","type":"blocks","created_at":"2026-01-11T21:33:01.723206108-05:00","created_by":"chadd"},{"issue_id":"reckon-4o2","depends_on_id":"reckon-9gt","type":"blocks","created_at":"2026-01-11T21:33:01.837428435-05:00","created_by":"chadd"},{"issue_id":"reckon-4o2","depends_on_id":"reckon-680","type":"blocks","created_at":"2026-01-11T21:33:01.953502371-05:00","created_by":"chadd"},{"issue_id":"reckon-4o2","depends_on_id":"reckon-kwi","type":"blocks","created_at":"2026-01-11T21:33:02.069360107-05:00","created_by":"chadd"},{"issue_id":"reckon-4o2","depends_on_id":"reckon-3wq","type":"blocks","created_at":"2026-01-11T21:33:02.185486052-05:00","created_by":"chadd"},{"issue_id":"reckon-4o2","depends_on_id":"reckon-125","type":"blocks","created_at":"2026-01-11T21:33:02.297694735-05:00","created_by":"chadd"},{"issue_id":"reckon-4o2","depends_on_id":"reckon-39e","type":"blocks","created_at":"2026-01-11T21:33:02.407604788-05:00","created_by":"chadd"},{"issue_id":"reckon-4o2","depends_on_id":"reckon-3kc","type":"blocks","created_at":"2026-01-11T21:33:02.515492475-05:00","created_by":"chadd"}]}
{"id":"reckon-5aq","title":"Fix tasks not showing in task pane: Initialize journal.TaskService in TUI model","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T12:04:52.862518368-05:00","created_by":"chadd","updated_at":"2026-01-02T12:06:26.147123402-05:00","closed_at":"2026-01-02T12:06:26.147123402-05:00","close_reason":"Closed"}
{"id":"reckon-5q5","title":"Phase 4: Zettelkasten Notes","description":"Implement a knowledge base with searchable notes. Notes use wiki-style [[slug]] links and support full-text search via SQLite FTS5.\n\n**Requires Phase 1**: Uses parser, storage infrastructure. Independent of tasks.\n\n**Note File Format** (notes/\u003cslug\u003e.md):\n```markdown\n---\ntitle: Git interactive rebase workflow\ncreated: 2025-01-12\ntags: [git, workflow]\n---\n\nTo squash the last 3 commits:\n    git rebase -i HEAD~3\n\nChange 'pick' to 'squash' for commits to combine.\n\n## See Also\n- [[git-bisect-workflow]]\n- [[git-cherry-pick]]\n```\n\n**SQLite Additions**:\n```sql\nCREATE TABLE notes (slug TEXT PRIMARY KEY, title TEXT, created TEXT, file_path TEXT);\nCREATE TABLE note_tags (slug TEXT, tag TEXT, PRIMARY KEY (slug, tag));\nCREATE VIRTUAL TABLE notes_fts USING fts5(slug, title, content, tags);\n```\n\n**Features to Implement**:\n\n1. **Note Domain Model** (internal/note/)\n   - Note struct: slug, title, created, tags, content, links (extracted [[slug]] refs)\n   - NoteService: Create, GetBySlug, Search, ListByTag, ListAll\n\n2. **Note Parser/Writer** (internal/parser/)\n   - Parse frontmatter (title, created, tags)\n   - Extract [[slug]] links from content\n   - Slug generation from title (lowercase, hyphenated)\n\n3. **FTS5 Indexing** (internal/storage/)\n   - Index note content in FTS5 table on save/rebuild\n   - Search returns ranked results\n\n4. **Note Search Component** (internal/tui/components/note_search.go)\n   - Text input for search query\n   - Results list with title and snippet\n   - Enter to view note\n\n5. **Note View Component** (internal/tui/components/note_view.go)\n   - Display note content (markdown rendered or plain)\n   - [[slug]] links are navigable (Enter to follow)\n   - 'e' to edit in $EDITOR\n\n6. **Tag Browser** (internal/tui/components/tag_browser.go)\n   - List all tags with note counts\n   - Select tag to filter notes\n\n7. **Note Creation Flow**\n   - TUI: Ctrl+N in notes mode opens creation form\n   - CLI: rk note new \"title\" creates note, opens in $EDITOR\n\n8. **TUI Integration**\n   - New mode: Notes (switch with Ctrl+K or 'n' from main view)\n   - Notes mode shows: search bar, tag filter, note list, note preview\n\n9. **CLI Commands**:\n   - rk note new \"title\" - create note, output path, open in $EDITOR\n   - rk note search \"query\" - full-text search, output matching notes\n   - rk note list - list all notes (--tag filter)\n   - rk note show \u003cslug\u003e - output note content\n\n**Acceptance Criteria**:\n- Can create notes from TUI and CLI\n- Notes are stored as markdown in ~/.reckon/notes/\u003cslug\u003e.md\n- rk note search \"query\" returns FTS5 results\n- TUI has notes mode with search, tag filter, note list\n- [[slug]] links are detected and navigable in TUI\n- Tags are indexed and browsable\n- rk rebuild includes notes in FTS5 index","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-22T16:48:38.366620991-05:00","updated_at":"2026-01-02T10:52:32.143768392-05:00","dependencies":[{"issue_id":"reckon-5q5","depends_on_id":"reckon-a39","type":"blocks","created_at":"2025-12-22T16:49:06.731839147-05:00","created_by":"daemon"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-ee4","type":"blocks","created_at":"2026-01-11T21:42:23.00158711-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-plv","type":"blocks","created_at":"2026-01-11T21:42:23.12465028-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-38a","type":"blocks","created_at":"2026-01-11T21:42:23.244210289-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-7yg","type":"blocks","created_at":"2026-01-11T21:42:23.372534747-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-s0j","type":"blocks","created_at":"2026-01-11T21:42:23.489382918-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-7zj","type":"blocks","created_at":"2026-01-11T21:42:23.599273297-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-6zf","type":"blocks","created_at":"2026-01-11T21:42:23.712805519-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-gz8","type":"blocks","created_at":"2026-01-11T21:42:23.827179468-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-sr7","type":"blocks","created_at":"2026-01-11T21:42:23.947604984-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-j7x","type":"blocks","created_at":"2026-01-11T21:42:24.059049051-05:00","created_by":"chadd"},{"issue_id":"reckon-5q5","depends_on_id":"reckon-7yw","type":"blocks","created_at":"2026-01-11T21:42:24.170248333-05:00","created_by":"chadd"}],"pinned":true}
{"id":"reckon-680","title":"Create date picker component for TUI","description":"Build a reusable date picker component for scheduling tasks.\n\n## Component\n\n**File**: `internal/tui/components/date_picker.go`\n\n**Features**:\n- Text input for date entry\n- Support absolute dates: YYYY-MM-DD, 2025-01-15\n- Support relative dates:\n  - `t` or `today` - today\n  - `tm` or `tomorrow` - tomorrow\n  - `mon`, `tue`, `wed`, `thu`, `fri`, `sat`, `sun` - next occurrence of weekday\n  - `+3d` - 3 days from now\n  - `+2w` - 2 weeks from now\n- Validation with error messages\n- ESC to cancel, Enter to confirm\n- Show preview of parsed date\n\n**UI**:\n```\nâ”Œâ”€ Schedule Task â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Date: +3d                    â”‚\nâ”‚ â†’ 2025-01-14 (3 days)        â”‚\nâ”‚                              â”‚\nâ”‚ ESC: cancel  ENTER: confirm  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Date Parsing\n\n**File**: `internal/tui/components/date_parser.go`\n\nHelper functions:\n```go\nfunc ParseRelativeDate(input string) (time.Time, error)\nfunc FormatDate(t time.Time) string  // YYYY-MM-DD\nfunc NextWeekday(weekday string) (time.Time, error)\n```\n\n## Acceptance Criteria\n\n- Date picker component can be shown/hidden\n- Supports absolute date input (YYYY-MM-DD)\n- Supports relative shortcuts (t, tm, mon-sun, +Nd, +Nw)\n- Shows preview of parsed date\n- Validates input and shows errors\n- Returns selected date or nil if cancelled\n- Unit tests for date parsing logic\n\n## Integration\n\nWill be used by:\n- Task scheduling ('s' key in task list)\n- Task deadline setting ('d' key in task list)\n\n## Dependencies\n\n- None (standalone component)\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T21:31:08.667414174-05:00","created_by":"chadd","updated_at":"2026-01-12T10:16:13.137194285-05:00","closed_at":"2026-01-12T10:16:13.137194285-05:00","close_reason":"Closed"}
{"id":"reckon-6bd","title":"Fix Task Expansion in TUI (Enter Key)","description":"Users cannot expand tasks to view notes when pressing Enter in the task pane. Root cause: Potential issues with key binding not firing, tasks lacking notes, or cursor jumping masking the expansion. Solution: Add logging to confirm Enter key events; verify tasks have notes; fix cursor preservation in UpdateTasks() to prevent selection jumping; ensure buildTaskItems() rebuilds UI properly. Files: task_list.go, model.go. Test: Enter should immediately show/hide notes without cursor movement.","status":"closed","priority":1,"issue_type":"task","assignee":"chadd","created_at":"2026-01-10T14:54:45.925210366-05:00","created_by":"chadd","updated_at":"2026-01-10T15:06:03.473426774-05:00","closed_at":"2026-01-10T15:06:03.473426774-05:00","close_reason":"Completed in PR #60"}
{"id":"reckon-6ql","title":"Log Entry Notes Feature","description":"Add ability to attach notes to log entries for detailed context tracking.\n\n## Overview\nNotes stored inline in journal markdown as nested bullets (following TaskNote pattern). \nTUI supports adding, viewing (collapsible), and deleting notes.\nDesign allows future upgrade to zettelkasten cards.\n\n## User Requirements\n- Hybrid approach: Simple text notes now, structured for future zettelkasten\n- Interface: TUI (press 'n') and manual markdown editing\n- Storage: Inline in journal markdown as nested bullets\n- Independent notes per log entry\n\n## Example Markdown\n```\n- 17:16 Helping Drew with data issue\n  - [note-id] Called Drew about db performance\n  - [note-id] Applied index on email column\n```\n\n## Success Criteria\nâœ… Notes stored inline in journal markdown\nâœ… Notes indexed in SQLite\nâœ… TUI: add ('n'), collapse ('enter'), delete ('d')\nâœ… Manual markdown edits parsed correctly\nâœ… Notes persist across restarts\nâœ… All tests pass\n\n## Plan\nDetailed plan: ~/.claude/plans/swift-soaring-firefly.md","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-06T11:05:42.698223745-05:00","created_by":"chadd","updated_at":"2026-01-10T13:41:46.538019301-05:00","closed_at":"2026-01-10T13:41:46.538019301-05:00","close_reason":"Completed in PR #59"}
{"id":"reckon-6zf","title":"Create NoteSearch component for TUI","description":"Build search interface component for finding notes by full-text query.\n\n## Component\n\n**File**: `internal/tui/components/note_search.go`\n\n### Features\n\n- Text input for search query\n- Live search results as user types (debounced)\n- Results list with title, slug, and snippet\n- Keyboard navigation (j/k or arrows)\n- Enter to view selected note\n- ESC to close/return\n\n### UI Layout\n\n```\nâ•­â”€ Search Notes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ Query: git rebase                                 â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ \u003e git-interactive-rebase                          â”‚\nâ”‚   Git interactive rebase workflow                 â”‚\nâ”‚   ...squash the last 3 commits: git rebase -i...  â”‚\nâ”‚                                                    â”‚\nâ”‚   git-cherry-pick                                 â”‚\nâ”‚   Git cherry-pick workflow                        â”‚\nâ”‚   ...similar to rebase but for single commits...  â”‚\nâ”‚                                                    â”‚\nâ”‚   git-bisect-workflow                             â”‚\nâ”‚   Finding bugs with git bisect                    â”‚\nâ”‚   ...binary search through commits...             â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â†‘â†“:navigate  enter:view  esc:close                â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n### Component Structure\n\n```go\ntype NoteSearch struct {\n    textInput    textinput.Model\n    results      []SearchResult\n    selectedIdx  int\n    noteService  *note.NoteService\n    width        int\n    height       int\n}\n\ntype SearchResult struct {\n    Slug    string\n    Title   string\n    Snippet string\n    Rank    float64\n}\n\nfunc NewNoteSearch(noteService *note.NoteService) NoteSearch\nfunc (m NoteSearch) Update(msg tea.Msg) (NoteSearch, tea.Cmd)\nfunc (m NoteSearch) View() string\n```\n\n### Behavior\n\n**Search Triggers**:\n- Debounce 300ms after typing stops\n- Minimum 2 characters to search\n- Show \"Type to search...\" when empty\n- Show \"No results\" when query returns nothing\n\n**Keyboard Handling**:\n- Type to update query\n- j/k or â†‘â†“ to navigate results\n- Enter to select and emit event\n- ESC to close (emit cancel event)\n- Ctrl+U to clear query\n\n**Result Display**:\n- Max 10 results shown (scroll if more)\n- Selected result highlighted\n- Snippet truncated to 80 chars\n- Show rank score (optional, for debugging)\n\n### Integration\n\n**Messages**:\n```go\ntype NoteSelectedMsg struct {\n    Slug string\n}\n\ntype SearchCancelledMsg struct{}\n```\n\nWhen Enter pressed on result:\n- Emit NoteSelectedMsg with slug\n- Parent component handles viewing note\n\n## Acceptance Criteria\n\n- Text input accepts search queries\n- Search executes after 300ms debounce\n- Results display with slug, title, snippet\n- Navigate results with j/k or arrows\n- Enter emits NoteSelectedMsg\n- ESC emits SearchCancelledMsg\n- Works with empty results\n- Works with no query\n- Responsive to terminal resize\n- Unit tests for search logic\n\n## Dependencies\n\n- Requires: reckon-7yg (FTS5 search implementation)\n- Requires: reckon-plv (NoteService)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:39:22.664450524-05:00","created_by":"chadd","updated_at":"2026-01-11T21:39:22.664450524-05:00","dependencies":[{"issue_id":"reckon-6zf","depends_on_id":"reckon-7yg","type":"blocks","created_at":"2026-01-11T21:42:10.162574292-05:00","created_by":"chadd"},{"issue_id":"reckon-6zf","depends_on_id":"reckon-plv","type":"blocks","created_at":"2026-01-11T21:42:10.284463913-05:00","created_by":"chadd"}]}
{"id":"reckon-7hf","title":"Test backward compatibility and create migration guide","description":"Test backward compatibility with existing journals and document migration.\n\n## Testing Tasks\n\n**1. Test with existing journals:**\n- Open journal files created before this change\n- Verify Intentions, Wins, Logs still parse and display\n- Verify no errors or data loss\n\n**2. Test adding Schedule to old journals:**\n- Open old journal\n- Add schedule item via TUI\n- Verify ## Schedule section added correctly\n- Verify file still readable\n\n**3. Test empty state:**\n- Start with no tasks.md\n- Add first task via TUI\n- Verify tasks.md created correctly\n\n**4. Test database migration:**\n- Verify new tables created automatically\n- No errors on first run with new schema\n\n**5. Test edge cases:**\n- Very long task text\n- Task with many notes\n- Empty schedule section\n- Journal with only some sections\n\n## Create Migration Guide\n\n**File to create:** `docs/migration-tui-redesign.md`\n\n**Content:**\n```markdown\n# TUI Redesign Migration Guide\n\n## What's New\n\n- New 40-40-18 layout (Logs | Tasks | Sidebar)\n- Tasks: General todo list with nested notes\n- Schedule: Upcoming items in daily journals\n- Always-visible text entry bar\n\n## For Existing Users\n\n### Automatic Changes\n\n- New database tables created automatically\n- Existing journals unchanged and fully compatible\n- No data migration needed\n\n### New Files\n\n- `~/.reckon/tasks.md` - Created on first task add\n\n### New Keyboard Shortcuts\n\n- `t` - Add task\n- `n` - Add note to selected task\n- `enter` - Expand/collapse task (in Tasks section)\n\n### Updated Sections\n\nDaily journals now support optional `## Schedule` section:\n\\```markdown\n## Schedule\n\n- 09:00 Morning standup\n- 14:00 Client meeting\n\\```\n\n## Rollback\n\nIf needed, you can roll back without data loss:\n- Old journal files remain valid\n- New tables are separate (won't affect old code)\n- Can delete `tasks.md` if desired\n```\n\n## Acceptance Criteria\n\n- Existing journals open without errors\n- Schedule section can be added to old journals\n- New database schema applies without manual intervention\n- tasks.md created on demand\n- Migration guide documented\n- Edge cases tested\n- No data loss scenarios\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 5, Step 6.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:49:21.263353227-05:00","updated_at":"2025-12-29T14:52:52.474526742-05:00","closed_at":"2025-12-28T16:46:28.247931354-05:00","dependencies":[{"issue_id":"reckon-7hf","depends_on_id":"reckon-4ay","type":"blocks","created_at":"2025-12-23T19:49:42.827359803-05:00","created_by":"daemon"},{"issue_id":"reckon-7hf","depends_on_id":"reckon-95p","type":"blocks","created_at":"2025-12-23T19:49:42.881070621-05:00","created_by":"daemon"}]}
{"id":"reckon-7pa","title":"Make text left-justified in TUI panes: Change centerView alignment from center to left/top","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T12:04:53.231928706-05:00","created_by":"chadd","updated_at":"2026-01-02T12:06:27.404100573-05:00","closed_at":"2026-01-02T12:06:27.404100573-05:00","close_reason":"Closed"}
{"id":"reckon-7yg","title":"Implement FTS5 indexing for note search","description":"Build full-text search indexing and search functionality using SQLite FTS5.\n\n## FTS5 Indexing\n\n**File**: `internal/note/search.go`\n\n### Index Note Content\n\n```go\nfunc IndexNote(db *sql.DB, note *Note) error {\n    // Insert/update in notes_fts table\n    // Index: slug, title, content, tags (space-separated)\n}\n```\n\nWhen a note is created/updated:\n1. Save to notes table\n2. Index in notes_fts table with full content\n\n**Tags Indexing**:\n- Store tags as space-separated string for FTS5\n- Example: tags [\"git\", \"workflow\"] -\u003e \"git workflow\"\n\n### Search Implementation\n\n```go\nfunc SearchNotes(db *sql.DB, query string) ([]SearchResult, error) {\n    // Query notes_fts using FTS5 MATCH\n    // Return results ranked by relevance\n}\n\ntype SearchResult struct {\n    Note    Note\n    Rank    float64  // BM25 relevance score\n    Snippet string   // Matching snippet with highlights\n}\n```\n\n**FTS5 Query**:\n```sql\nSELECT \n    notes.slug,\n    notes.title,\n    notes_fts.rank AS rank,\n    snippet(notes_fts, 2, '\u003cb\u003e', '\u003c/b\u003e', '...', 64) AS snippet\nFROM notes_fts\nJOIN notes ON notes.slug = notes_fts.slug\nWHERE notes_fts MATCH ?\nORDER BY rank\nLIMIT 50\n```\n\n**Query Features**:\n- Phrase search: `\"exact phrase\"`\n- AND: `git rebase`\n- OR: `git OR svn`\n- NOT: `git NOT github`\n- Prefix: `rebas*` matches \"rebase\", \"rebasing\"\n\n### Rebuild Index\n\n```go\nfunc RebuildNotesIndex(db *sql.DB, notesDir string) error {\n    // Clear notes_fts table\n    // Scan all .md files in notes directory\n    // Parse and re-index each note\n}\n```\n\nIntegrate with existing `rk rebuild` command.\n\n## Repository Integration\n\n**File**: `internal/storage/note_repository.go`\n\nUpdate NoteService methods to use FTS5:\n```go\nfunc (s *NoteService) Search(query string) ([]SearchResult, error) {\n    return SearchNotes(s.db, query)\n}\n\nfunc (s *NoteService) Create(title string, tags []string) (*Note, error) {\n    // ... create note\n    // Index in FTS5\n    IndexNote(s.db, note)\n}\n\nfunc (s *NoteService) Update(note *Note) error {\n    // ... update note\n    // Re-index in FTS5\n    IndexNote(s.db, note)\n}\n```\n\n## Acceptance Criteria\n\n- IndexNote inserts/updates note in FTS5 table\n- SearchNotes returns ranked results\n- Search supports phrase queries (\"exact match\")\n- Search supports boolean operators (AND, OR, NOT)\n- Search supports prefix matching (rebas*)\n- Search returns snippets with match context\n- Results ranked by BM25 relevance\n- RebuildNotesIndex re-indexes all notes\n- Integration with `rk rebuild` command\n- Unit tests for indexing\n- Unit tests for search queries\n- Performance test (search on 100+ notes)\n\n## Test Cases\n\n**Indexing**:\n- Index note with tags\n- Update indexed note\n- Delete indexed note\n\n**Search Queries**:\n- Single term: \"git\" -\u003e matches \"git\" in title/content\n- Phrase: \"interactive rebase\" -\u003e exact phrase match\n- Multiple terms: \"git workflow\" -\u003e AND behavior\n- Tag search: \"tag:git\" -\u003e notes tagged with git\n- Prefix: \"rebas*\" -\u003e \"rebase\", \"rebasing\"\n- Boolean: \"git NOT github\" -\u003e git but not github\n\n**Ranking**:\n- Title match ranks higher than content match\n- Multiple term matches rank higher\n- Phrase match in title ranks highest\n\n## Dependencies\n\n- Requires: reckon-ee4 (Database schema with FTS5)\n- Requires: reckon-plv (Note service)\n- Requires: reckon-38a (Parser for note content)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:37:25.340564528-05:00","created_by":"chadd","updated_at":"2026-01-11T21:37:25.340564528-05:00","dependencies":[{"issue_id":"reckon-7yg","depends_on_id":"reckon-ee4","type":"blocks","created_at":"2026-01-11T21:42:04.59040945-05:00","created_by":"chadd"},{"issue_id":"reckon-7yg","depends_on_id":"reckon-plv","type":"blocks","created_at":"2026-01-11T21:42:04.69765374-05:00","created_by":"chadd"},{"issue_id":"reckon-7yg","depends_on_id":"reckon-38a","type":"blocks","created_at":"2026-01-11T21:42:04.803882363-05:00","created_by":"chadd"}]}
{"id":"reckon-7yw","title":"Integrate Notes mode into TUI","description":"Add Notes mode to TUI with search, browse, view, and create functionality.\n\n## Overview\n\nAdd a new mode to Reckon TUI for managing notes. Accessible via Ctrl+K or 'n' key.\n\n## Notes Mode Layout\n\n**File**: `internal/tui/model.go`\n\n```\nâ•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚                    RECKON - NOTES                   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Search: git rebase                              [s] â”‚\nâ”‚ Browse Tags                                     [t] â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                     â”‚\nâ”‚  [Search Results or Tag Browser or Note View]      â”‚\nâ”‚                                                     â”‚\nâ”‚                                                     â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ ctrl+n:new  s:search  t:tags  b:back  q:quit       â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n## Mode States\n\n```go\ntype NotesMode int\n\nconst (\n    NotesModeSearch NotesMode = iota\n    NotesModeTags\n    NotesModeView\n    NotesModeCreate\n)\n```\n\n### State: Search (default)\n- Shows NoteSearch component\n- Type to search, results update\n- Enter on result: switch to View state\n\n### State: Tags\n- Shows TagBrowser component\n- Select tag, browse notes\n- Enter on note: switch to View state\n\n### State: View\n- Shows NoteView component\n- Display note content\n- Follow [[links]]: stay in View (new note)\n- 'b' to go back\n\n### State: Create\n- Shows NoteCreateForm\n- After creation: switch to View state\n\n## Mode Switching\n\n**Enter Notes Mode**:\n- Ctrl+K from any mode: open mode switcher\n- Select \"Notes\": enter NotesModeSearch\n- OR press 'n' key directly (if configured)\n\n**Exit Notes Mode**:\n- 'q' or ESC: return to Journal mode\n- Maintain last position when re-entering\n\n## Keyboard Shortcuts\n\n**Global (in Notes mode)**:\n- **Ctrl+N**: Create new note (any sub-mode)\n- **s**: Switch to Search\n- **t**: Switch to Tags\n- **b**: Back (navigation history)\n- **q**: Quit Notes mode\n\n**Context-specific**:\n- Search: See NoteSearch component\n- Tags: See TagBrowser component\n- View: See NoteView component\n\n## Integration\n\n**File**: `internal/tui/model.go`\n\nAdd to main model:\n```go\ntype Model struct {\n    // ... existing fields\n    \n    // Notes mode\n    notesMode      NotesMode\n    noteSearch     components.NoteSearch\n    tagBrowser     components.TagBrowser\n    noteView       components.NoteView\n    noteCreateForm components.NoteCreateForm\n    noteHistory    []string  // Navigation history\n    noteService    *note.NoteService\n}\n```\n\n**Update function**:\n```go\nfunc (m Model) Update(msg tea.Msg) (Model, tea.Cmd) {\n    switch m.currentMode {\n    case ModeNotes:\n        return m.updateNotesMode(msg)\n    // ... other modes\n    }\n}\n\nfunc (m Model) updateNotesMode(msg tea.Msg) (Model, tea.Cmd) {\n    switch m.notesMode {\n    case NotesModeSearch:\n        // Update noteSearch component\n    case NotesModeTags:\n        // Update tagBrowser component\n    case NotesModeView:\n        // Update noteView component\n    case NotesModeCreate:\n        // Update noteCreateForm component\n    }\n}\n```\n\n**View function**:\n```go\nfunc (m Model) viewNotesMode() string {\n    switch m.notesMode {\n    case NotesModeSearch:\n        return m.noteSearch.View()\n    case NotesModeTags:\n        return m.tagBrowser.View()\n    case NotesModeView:\n        return m.noteView.View()\n    case NotesModeCreate:\n        return m.noteCreateForm.View()\n    }\n}\n```\n\n## Status Bar\n\nUpdate status bar for Notes mode:\n- Show current sub-mode\n- Show relevant shortcuts\n- Show note count\n\nExample: `Notes (42) | Search | ctrl+n:new s:search t:tags q:quit`\n\n## Navigation History\n\nTrack viewed notes:\n```go\ntype NoteHistory struct {\n    stack    []string\n    position int\n}\n\nfunc (h *NoteHistory) Push(slug string)\nfunc (h *NoteHistory) Back() (string, bool)\nfunc (h *NoteHistory) Forward() (string, bool)\n```\n\nBehavior:\n- Viewing note: push to history\n- Following [[link]]: push to history\n- 'b' key: go back in history\n- Max 50 items\n\n## Persistence\n\nSave Notes mode state:\n- Last search query\n- Last viewed note slug\n- Last selected tag\n- Restore on next launch\n\n## Acceptance Criteria\n\n- Ctrl+K or 'n' enters Notes mode\n- Search state shows search interface\n- Tags state shows tag browser\n- View state shows note content\n- Create state shows creation form\n- Can switch between states smoothly\n- Navigation history works (back/forward)\n- All keyboard shortcuts work\n- Status bar shows correct info\n- State persists across sessions\n- 'q' returns to Journal mode\n\n## Integration Testing\n\nTest workflows:\n1. Search â†’ View â†’ Follow link â†’ View â†’ Back\n2. Tags â†’ Select â†’ View â†’ Edit â†’ View (refreshed)\n3. Create â†’ View new note\n4. Search â†’ View â†’ Create â†’ View new note\n5. Mode switch (Notes â†’ Journal â†’ Notes) preserves state\n\n## Dependencies\n\n- Requires: reckon-6zf (NoteSearch component)\n- Requires: reckon-gz8 (NoteView component)\n- Requires: reckon-sr7 (TagBrowser component)\n- Requires: reckon-j7x (NoteCreateForm component)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:41:19.163050336-05:00","created_by":"chadd","updated_at":"2026-01-11T21:41:19.163050336-05:00","dependencies":[{"issue_id":"reckon-7yw","depends_on_id":"reckon-6zf","type":"blocks","created_at":"2026-01-11T21:42:16.218790383-05:00","created_by":"chadd"},{"issue_id":"reckon-7yw","depends_on_id":"reckon-gz8","type":"blocks","created_at":"2026-01-11T21:42:16.324355259-05:00","created_by":"chadd"},{"issue_id":"reckon-7yw","depends_on_id":"reckon-sr7","type":"blocks","created_at":"2026-01-11T21:42:16.435993473-05:00","created_by":"chadd"},{"issue_id":"reckon-7yw","depends_on_id":"reckon-j7x","type":"blocks","created_at":"2026-01-11T21:42:16.554992951-05:00","created_by":"chadd"}]}
{"id":"reckon-7zj","title":"Implement CLI commands for note management","description":"Add CLI commands for creating, searching, listing, and viewing notes.\n\n## Commands\n\n**File**: `internal/cli/note.go`\n\n### Create Note\n```bash\nrk note new \"title\"                   # Create note, open in $EDITOR\nrk note new \"Git Rebase\" --tags=git,workflow\n```\n\n**Behavior**:\n- Generate slug from title\n- Create note file with frontmatter\n- Open in $EDITOR (or vi/nano if not set)\n- After editor closes, parse and index note\n- Output: \"Created note: git-rebase (~/.reckon/notes/git-rebase.md)\"\n\n### Search Notes\n```bash\nrk note search \"query\"                # Full-text search\nrk note search \"git rebase\"           # Multiple terms\nrk note search '\"exact phrase\"'       # Phrase search\n```\n\n**Output**:\n```\ngit-interactive-rebase\n  Git interactive rebase workflow\n  ...squash the last 3 commits: git rebase -i...\n  \ngit-cherry-pick\n  Git cherry-pick workflow\n  ...similar to rebase but for single commits...\n```\n\nFormat: slug, title, snippet (indented)\n\n### List Notes\n```bash\nrk note list                          # List all notes\nrk note list --tag=git                # Filter by tag\nrk note list --tag=git,workflow       # Multiple tags (AND)\n```\n\n**Output**:\n```\ngit-bisect-workflow         Git bisect workflow          [git, debugging]\ngit-cherry-pick            Git cherry-pick workflow      [git]\ngit-interactive-rebase     Git interactive rebase        [git, workflow]\n```\n\nFormat: slug (padded), title (padded), tags\n\n### Show Note\n```bash\nrk note show \u003cslug\u003e                   # Output note content\nrk note show git-rebase               # By slug\n```\n\n**Output**: Full markdown content (without frontmatter, or with --raw flag)\n\n### List Tags\n```bash\nrk note tags                          # List all tags with counts\n```\n\n**Output**:\n```\ngit (12)\nworkflow (8)\ndebugging (3)\nvim (5)\n```\n\n### Delete Note\n```bash\nrk note delete \u003cslug\u003e                 # Delete note\nrk note delete git-rebase --force     # Skip confirmation\n```\n\n**Behavior**:\n- Prompt for confirmation (unless --force)\n- Delete file\n- Remove from database\n- Output: \"Deleted note: git-rebase\"\n\n## Command Registration\n\n**File**: `internal/cli/root.go`\n\nRegister note command:\n```go\nRootCmd.AddCommand(GetNoteCommand())\n```\n\n## Editor Integration\n\n**File**: `internal/cli/editor.go` (if not exists)\n\n```go\nfunc OpenEditor(filePath string) error {\n    // Get $EDITOR environment variable\n    // Default to vi or nano\n    // Open file in editor\n    // Wait for editor to close\n}\n```\n\n## Acceptance Criteria\n\n- `rk note new \"title\"` creates note and opens in editor\n- `rk note new` supports --tags flag\n- `rk note search \"query\"` returns FTS5 results with snippets\n- `rk note list` shows all notes with slugs, titles, tags\n- `rk note list --tag=X` filters by tag\n- `rk note show \u003cslug\u003e` outputs note content\n- `rk note tags` lists all tags with counts\n- `rk note delete \u003cslug\u003e` removes note (with confirmation)\n- Commands handle errors gracefully (note not found, invalid slug)\n- Help text for all commands\n- Tab completion works (if cobra supports)\n\n## Error Handling\n\n**Error Messages**:\n- Note not found: \"Note 'foo' not found\"\n- Slug already exists: \"Note 'git-rebase' already exists. Use different title or edit existing note.\"\n- Editor not found: \"No editor found. Set $EDITOR environment variable.\"\n- Invalid slug: \"Invalid slug format. Use lowercase letters, numbers, and hyphens only.\"\n\n## Output Formatting\n\nUse consistent formatting:\n- Success messages: âœ“ prefix, green color (if terminal supports)\n- Error messages: âœ— prefix, red color\n- Lists: Aligned columns\n- Snippets: Indented, max 2 lines\n\n## Dependencies\n\n- Requires: reckon-plv (NoteService)\n- Requires: reckon-38a (Parser/writer)\n- Requires: reckon-7yg (Search/indexing)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:38:01.418302122-05:00","created_by":"chadd","updated_at":"2026-01-11T21:38:01.418302122-05:00","dependencies":[{"issue_id":"reckon-7zj","depends_on_id":"reckon-plv","type":"blocks","created_at":"2026-01-11T21:42:04.911280157-05:00","created_by":"chadd"},{"issue_id":"reckon-7zj","depends_on_id":"reckon-38a","type":"blocks","created_at":"2026-01-11T21:42:05.023398296-05:00","created_by":"chadd"},{"issue_id":"reckon-7zj","depends_on_id":"reckon-7yg","type":"blocks","created_at":"2026-01-11T21:42:05.130824528-05:00","created_by":"chadd"}]}
{"id":"reckon-82m","title":"Extend JournalService for schedule items","description":"Extend journal service to support schedule items.\n\n## File to Modify\n\n`internal/journal/service.go`\n\n## Methods to Add\n\n```go\n// AddScheduleItem adds a schedule item to the journal\nfunc (s *Service) AddScheduleItem(j *Journal, timeStr string, content string) error\n\n// DeleteScheduleItem removes a schedule item from the journal\nfunc (s *Service) DeleteScheduleItem(j *Journal, itemID string) error\n```\n\n## Method to Modify\n\n`GetByDate(date string) (*Journal, error)`:\n- Load schedule items from DB via repository\n- Populate j.ScheduleItems\n\n`save(j *Journal) error`:\n- Save schedule items to DB via repository\n\n## Implementation Details\n\n**AddScheduleItem:**\n1. Parse timeStr (HH:MM format, or empty)\n2. Create ScheduleItem with generated ID\n3. Set position = len(j.ScheduleItems)\n4. Append to j.ScheduleItems\n5. Call save()\n\n**DeleteScheduleItem:**\n1. Find item in j.ScheduleItems by ID\n2. Remove from slice\n3. Re-index positions\n4. Call save()\n\n**GetByDate modification:**\n- After loading journal, query schedule items from DB\n- Set j.ScheduleItems\n\n**save modification:**\n- After saving file, persist schedule items to DB\n\n## Acceptance Criteria\n\n- AddScheduleItem creates and persists schedule item\n- DeleteScheduleItem removes and updates positions\n- GetByDate loads schedule items from DB\n- save() persists schedule items to DB\n- Integration with existing save/load flow\n\n## Dependencies\n\nRequires: ScheduleItem model, journal parser/writer extensions, repository methods for schedule\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 2, Step 3.2)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:46:29.317097543-05:00","updated_at":"2025-12-29T14:52:52.477276367-05:00","closed_at":"2025-12-28T19:49:33.975421035-05:00","close_reason":"JournalService extended with comprehensive schedule item support including AddScheduleItem, DeleteScheduleItem, repository methods, validation, and optimizations. All critical and high-priority code review issues addressed. 9+ comprehensive tests passing. PR #23 merged to main.","dependencies":[{"issue_id":"reckon-82m","depends_on_id":"reckon-mpn","type":"blocks","created_at":"2025-12-23T19:49:41.764099934-05:00","created_by":"daemon"},{"issue_id":"reckon-82m","depends_on_id":"reckon-aww","type":"blocks","created_at":"2025-12-23T19:49:41.814528668-05:00","created_by":"daemon"}]}
{"id":"reckon-86e","title":"Interactive review ignores reason/note input","description":"In internal/cli/review.go, the 'w' (waiting) and 'n' (note) actions read user input via fmt.Scanln but: 1) Error from Scanln is ignored, 2) The reason variable for 'w' is read but never saved (should be logged), 3) Same for note in 'n' - it's read but AppendLog doesn't receive it.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T21:42:24.548695034-05:00","created_by":"chadd","updated_at":"2026-01-08T21:36:14.385468605-05:00","closed_at":"2026-01-08T21:36:14.385468605-05:00","close_reason":"Closed"}
{"id":"reckon-8fg","title":"CLI: Compact task output + JSON mode","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:19.21736486-05:00","created_by":"chadd","updated_at":"2026-01-03T12:27:26.711220194-05:00","closed_at":"2026-01-03T12:27:26.711220194-05:00","close_reason":"Completed in PR #39","dependencies":[{"issue_id":"reckon-8fg","depends_on_id":"reckon-g1y","type":"blocks","created_at":"2026-01-02T17:11:30.357459398-05:00","created_by":"chadd"}]}
{"id":"reckon-8id","title":"Create ScheduleView component","description":"Create ScheduleView Bubble Tea component for displaying schedule items.\n\n## File to Create\n\n`internal/tui/components/schedule_view.go`\n\n## Component Structure\n\n```go\ntype ScheduleView struct {\n    items  []journal.ScheduleItem\n    width  int\n    height int\n}\n\nfunc NewScheduleView(items []journal.ScheduleItem) *ScheduleView\nfunc (sv *ScheduleView) Update(msg tea.Msg) (*ScheduleView, tea.Cmd)\nfunc (sv *ScheduleView) View() string\nfunc (sv *ScheduleView) SetSize(width, height int)\nfunc (sv *ScheduleView) UpdateSchedule(items []journal.ScheduleItem)\n```\n\n## Rendering\n\n- Title: \"Schedule\" (styled with lipgloss)\n- Format: `HH:MM Content` or just `Content` (if no time)\n- Simple list (no interaction needed initially)\n- Truncate long content with \"...\" if needed\n- Show empty state: \"No schedule items\"\n\n## Implementation Details\n\n- Simpler than TaskList (no selection/interaction)\n- Sort items by time before rendering\n- Use lipgloss for styling (consistent with other components)\n- Handle items with and without time\n- Follow pattern from `internal/tui/components/wins_view.go`\n\n## Styling\n\n```go\nscheduleStyle = lipgloss.NewStyle().\n    Foreground(lipgloss.Color(\"39\")).\n    Bold(true)\n\nitemStyle = lipgloss.NewStyle().\n    Foreground(lipgloss.Color(\"252\"))\n```\n\n## Acceptance Criteria\n\n- Displays schedule items with time (HH:MM format)\n- Displays items without time\n- Shows title \"Schedule\"\n- Handles empty schedule\n- Truncates long text to fit width\n- Sorted by time\n\n## Dependencies\n\nRequires: ScheduleItem model\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 3, Step 4.2)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:47:16.121646485-05:00","updated_at":"2025-12-28T16:31:11.962218688-05:00","closed_at":"2025-12-28T16:31:11.962218688-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-8id","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:42.105679818-05:00","created_by":"daemon"}]}
{"id":"reckon-8ji","title":"Add bordered boxes around main layout panes (Logs, Tasks)","description":"Modify renderNewLayout() in internal/tui/model.go to wrap the Logs and Tasks panes in bordered boxes.\n\n**Current behavior:**\n- Only borderRight styling applied\n- No full boxes around sections\n- Components don't visually fill their space\n\n**Desired behavior:**\n- Each pane (Logs, Tasks) wrapped in lipgloss bordered box\n- Use lipgloss.NewStyle().Border(lipgloss.NormalBorder())\n- Set explicit Width() and Height() on box styles to match calculated pane dimensions\n- Boxes should fill the entire allocated space even when content is minimal\n\n**Implementation:**\n- In model.go:renderNewLayout(), wrap logsView in bordered box with dims.LogsWidth and dims.LogsHeight\n- Wrap tasksView in bordered box with dims.TasksWidth and dims.TasksHeight\n- Use lipgloss.Place() if needed to ensure content is positioned properly within the box\n\n**Acceptance Criteria:**\n- Logs pane has visible border on all sides\n- Tasks pane has visible border on all sides\n- Boxes maintain their dimensions regardless of content","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:20.936554628-05:00","created_by":"chadd","updated_at":"2026-01-02T10:58:23.504817647-05:00","closed_at":"2026-01-02T10:58:23.504817647-05:00","close_reason":"Implemented bordered boxes around Logs and Tasks panes. PR #33 created and ready for merge.","pinned":true}
{"id":"reckon-8kq","title":"Improve CLI log entry UX with inline mini-TUI","description":"## Problem\n\nThe interactive log entry CLI (`rk log` without arguments) has poor UX:\n- No obvious way to complete the interaction\n- User must use Ctrl-D to finish, which is not intuitive\n- Plain stdin input with no visual feedback or guidance\n\n## Desired Behavior\n\nReplace the current stdin-based input with a small-scale inline TUI that:\n1. Does NOT clear or fill the terminal (unlike the full TUI)\n2. Renders a compact input box in the lower portion of the terminal\n3. Shows clear instructions for completing entry (e.g., \"Enter to submit, Esc to cancel\")\n4. Returns to the normal terminal state after completion\n\nThink of it like a mini prompt overlay, not a full-screen takeover.\n\n## Current Implementation\n\n- **CLI command**: `internal/cli/log.go` - currently uses simple stdin for input\n- **TUI text entry**: `internal/tui/components/text_entry_bar.go` - has the text input component using Charmbracelet's textinput library\n- Uses Bubble Tea framework for TUI\n\n## Technical Approach Options\n\n1. **Inline Bubble Tea Program**: Create a minimal Bubble Tea program that only renders 2-3 lines at the bottom of the terminal without clearing existing content. Use `tea.WithAltScreen(false)` to avoid fullscreen mode.\n\n2. **Charmbracelet Huh Forms**: The `huh` library provides inline form inputs that don't take over the terminal. Could use `huh.NewInput()` for a cleaner experience.\n\n3. **Simple ANSI Box**: Use lipgloss to render a styled input box, combined with a custom input handler that shows the box inline.\n\n## Acceptance Criteria\n\n- [ ] `rk log` (no args) opens an inline input prompt\n- [ ] Input box shows at current cursor position or bottom of visible terminal\n- [ ] Clear visual indication of how to submit (Enter) and cancel (Esc)\n- [ ] Terminal content above the input remains visible\n- [ ] After submission, terminal returns to normal state (no clearing)\n- [ ] Existing `rk log \"message\"` non-interactive mode still works\n\n## Files to Modify\n\n- `internal/cli/log.go` - Add inline TUI mode when no message argument provided\n- Possibly create new component in `internal/tui/components/` if reusable\n\n## Testing\n\n- Test inline input appears without clearing terminal\n- Test Enter submits and logs the entry\n- Test Esc cancels without logging\n- Test non-interactive mode (`rk log \"message\"`) still works","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T17:19:58.121826734-05:00","created_by":"chadd","updated_at":"2026-01-10T11:50:01.072903123-05:00","closed_at":"2026-01-10T11:50:01.072903123-05:00","close_reason":"Completed in PR #50"}
{"id":"reckon-8lc","title":"Add scheduled_date and deadline_date to database schema","description":"Add database columns to support task scheduling and deadlines.\n\n## Changes\n\n**File**: `internal/storage/migrations.go` or `internal/storage/database.go`\n\nAdd migration:\n```sql\nALTER TABLE tasks ADD COLUMN scheduled_date TEXT;\nALTER TABLE tasks ADD COLUMN deadline_date TEXT;\nCREATE INDEX idx_tasks_scheduled ON tasks(scheduled_date);\nCREATE INDEX idx_tasks_deadline ON tasks(deadline_date);\n```\n\n**Format**: Store dates as YYYY-MM-DD strings (ISO 8601)\n\n## Acceptance Criteria\n\n- Migration adds scheduled_date column to tasks table\n- Migration adds deadline_date column to tasks table\n- Indexes created for efficient date queries\n- Migration is idempotent (safe to run multiple times)\n- Existing tasks have NULL for new columns\n\n## Testing\n\n- Run migration on fresh database\n- Run migration on database with existing tasks\n- Verify indexes exist\n- Verify existing data preserved\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-11T21:30:34.967923959-05:00","created_by":"chadd","updated_at":"2026-01-12T10:28:01.107591831-05:00"}
{"id":"reckon-8ug","title":"TUI: Status bar hints are context-insensitive","description":"The status bar shows the same hints regardless of current section or mode.\n\nCurrent: All hints shown all the time\n  'q:quit tab:switch i:intention w:win L:log h/l:nav t:today ?:help enter:toggle'\n\nIssues:\n- enter:toggle only works in Intentions section, not Wins or Logs\n- Hints don't change based on focused section\n- Input mode shows separate prompt but could be integrated\n\nImprovements:\n1. Show section-specific hints based on focusedSection\n2. Update hints in input mode to show editing keys\n3. Consider showing section name in status bar\n\nExample for Intentions section:\n  'Intentions | q:quit tab:switch enter:toggle j/k:nav i:add h/l:day t:today'\n\nThis helps users understand context-specific actions.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T19:27:13.560455554-05:00","updated_at":"2025-12-29T14:52:52.478972889-05:00","closed_at":"2025-12-28T16:41:08.442936109-05:00"}
{"id":"reckon-90o","title":"Refactor: Extract shared collapse/expand behavior from task_list and log_view","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T16:56:10.263539023-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:10.263539023-05:00"}
{"id":"reckon-90q","title":"TUI: Remove unused logInput field","description":"Model has an unused field that's never initialized or used.\n\nLocation: internal/tui/model.go:34\n\n\nThis was likely leftover from an earlier implementation approach. Should be removed to clean up the code.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T18:53:21.96824436-05:00","updated_at":"2025-12-22T19:34:34.825145269-05:00","closed_at":"2025-12-22T19:34:34.825145269-05:00","close_reason":"Fixed: Removed unused inputText field, now using textInput throughout."}
{"id":"reckon-92t","title":"Phase 5: Periodic Review","description":"Surface stale tasks and prompt the user to triage them. Helps maintain a clean task list and prevents tasks from being forgotten.\n\n**Requires Phase 2**: Uses task infrastructure to query stale tasks.\n\n**Features to Implement**:\n\n1. **Stale Task Query** (internal/task/)\n   - FindStaleTasks(days int): tasks with no log entries in N days\n   - Default: 7 days for active, 30 days for waiting\n   - Exclude 'someday' tasks from stale detection\n\n2. **Review TUI Mode** (internal/tui/components/review.go)\n   - List of stale tasks with last activity date\n   - For each task, quick actions:\n     - 'd' - mark done\n     - 's' - move to someday\n     - 'w' - mark waiting (prompts for reason)\n     - 'n' - add note/update\n     - 'x' - delete task\n     - Space - skip to next\n   - Batch mode: review all stale tasks in sequence\n\n3. **Weekly Review Prompt**\n   - Track last_review_date in config/db\n   - On first launch of the week (Monday), show prompt: \"You have X stale tasks. Review now? (y/n)\"\n   - 'y' enters review mode, 'n' dismisses until next week\n\n4. **Review Summary**\n   - After review session, show summary: \"Reviewed X tasks: Y done, Z deferred, W deleted\"\n\n5. **CLI Commands**:\n   - rk review - launch review mode (or output stale tasks if not TTY)\n   - rk review --list - just list stale tasks without interactive mode\n\n**Acceptance Criteria**:\n- rk review shows tasks with no activity in 7+ days\n- Can mark tasks done/waiting/someday from review mode\n- Can delete tasks from review mode\n- Weekly prompt appears on first Monday launch\n- Review summary shows what was triaged\n- rk review --list outputs stale tasks for scripting","status":"closed","priority":3,"issue_type":"feature","assignee":"chadd","created_at":"2025-12-22T16:48:50.894281259-05:00","updated_at":"2026-01-03T12:37:40.952574444-05:00","closed_at":"2026-01-03T12:37:40.952574444-05:00","close_reason":"Completed in PR #43","dependencies":[{"issue_id":"reckon-92t","depends_on_id":"reckon-9cn","type":"blocks","created_at":"2025-12-22T16:49:06.988538091-05:00","created_by":"daemon"}]}
{"id":"reckon-95p","title":"Update help view and documentation for new TUI","description":"Update help view to reflect new keyboard shortcuts and layout.\n\n## File to Modify\n\n`internal/tui/model.go` (helpView() function)\n\n## New Help Text\n\n```\nHelp - Key Bindings:\n\nNavigation:\n  h, â†       Previous day\n  l, â†’       Next day\n  t          Jump to today\n  tab        Next section\n  shift+tab  Previous section\n  j, k       Navigate within section\n\nActions:\n  t          Add task\n  i          Add intention\n  w          Add win\n  L          Add log entry\n  n          Add note to selected task (Tasks section)\n  space      Toggle task/intention (Tasks/Intentions section)\n  enter      Expand/collapse task (Tasks section)\n\nText Entry:\n  enter      Submit entry\n  esc        Cancel entry\n  any key    Type character\n\nGeneral:\n  q, ctrl+c  Quit\n  ?          Toggle help\n\nSections:\n  - Logs: Activity log with timestamps\n  - Tasks: General todo list with collapsible notes\n  - Schedule: Upcoming items for the day\n  - Intentions: 1-3 focus tasks for today\n  - Wins: Daily accomplishments\n\nPress ? to exit help.\n```\n\n## Also Update\n\n- README.md: Update screenshots/description if present\n- AGENTS.md: No changes needed (workflow unchanged)\n\n## Acceptance Criteria\n\n- Help text shows all new shortcuts\n- Describes new sections (Tasks, Schedule)\n- Explains text entry bar usage\n- Accurate key bindings\n- Clear section descriptions\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 5)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:49:20.929976834-05:00","updated_at":"2025-12-29T19:45:37.393673874-05:00","closed_at":"2025-12-29T19:45:37.393673874-05:00","close_reason":"Implemented in PR #28 - updated help view and README for new TUI","dependencies":[{"issue_id":"reckon-95p","depends_on_id":"reckon-40n","type":"blocks","created_at":"2025-12-23T19:49:42.772986217-05:00","created_by":"daemon"}],"pinned":true}
{"id":"reckon-9cl","title":"TUI: Replace magic number with constant in section cycling","description":"Section cycling uses magic number 3 that's not obvious or maintainable.\n\nLocation: internal/tui/model.go:134\n\n\nShould either:\n1. Define constant: \n2. Calculate from actual sections\n3. Use an enum/iota-based approach\n\nMakes code more maintainable if sections are added/removed.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T18:53:25.43575798-05:00","updated_at":"2025-12-22T19:34:35.125603476-05:00","closed_at":"2025-12-22T19:34:35.125603476-05:00","close_reason":"Fixed: Now using SectionCount constant instead of magic number 3."}
{"id":"reckon-9cn","title":"Phase 2: Task Management","description":"Add multi-day task tracking. Tasks are separate markdown files with their own log history. Log entries can be linked to tasks and appear in both the task file and daily journal.\n\n**Requires Phase 1**: Uses parser, storage, and TUI infrastructure from Phase 1.\n\n**Task File Format** (tasks/\u003cid\u003e.md):\n```markdown\n---\nid: abc123\ntitle: API refactor for v2 endpoints\ncreated: 2025-01-10\nstatus: active\ntags: [backend, api]\n---\n\n## Description\nRefactor the v2 endpoints to use the new middleware pattern.\n\n## Log\n\n### 2025-01-10\n- 14:00 Created task, outlined approach\n\n### 2025-01-14\n- 09:00 Resumed work\n```\n\n**Task Statuses**: active, done, waiting, someday\n\n**SQLite Additions**:\n```sql\nCREATE TABLE tasks (id TEXT PRIMARY KEY, title TEXT, status TEXT, created TEXT, file_path TEXT);\nCREATE TABLE task_tags (task_id TEXT, tag TEXT, PRIMARY KEY (task_id, tag));\nCREATE TABLE task_log_entries (id TEXT PRIMARY KEY, task_id TEXT, date TEXT, timestamp TEXT, content TEXT);\n```\n\n**Features to Implement**:\n\n1. **Task Domain Model** (internal/task/)\n   - Task struct with id, title, status, created, tags, description, log entries\n   - TaskService: Create, GetByID, List (filter by status/tags), UpdateStatus, AppendLog\n\n2. **Task Parser/Writer** (internal/parser/)\n   - Parse task frontmatter (id, title, created, status, tags array)\n   - Parse description section\n   - Parse log section (grouped by date)\n\n3. **Dual-Write Logic**\n   - When logging to a task, entry goes to BOTH:\n     - Task file under appropriate date header\n     - Daily journal with [task:id] prefix\n   - TaskService coordinates this\n\n4. **Task Picker Component** (internal/tui/components/task_picker.go)\n   - Fuzzy-searchable list of active tasks\n   - Used when starting work on a task or logging to specific task\n\n5. **Two-Pane TUI Layout**\n   - Left pane: daily journal (existing)\n   - Right pane: current task (when selected)\n   - Tab switches between panes\n   - Ctrl+T opens task picker\n\n6. **Task Creation Flow**\n   - From TUI: Ctrl+N opens task creation form (title, tags)\n   - From CLI: rk task new \"title\" --tags=backend,api\n   - Can also promote an intention to a task\n\n7. **CLI Commands**:\n   - rk task new \"title\" - create task, outputs task ID\n   - rk task list - list active tasks (--status, --tag filters)\n   - rk task show \u003cid\u003e - output task details\n   - rk task log \u003cid\u003e \"msg\" - append to task log (also adds to today's journal)\n   - rk task done \u003cid\u003e - mark task complete\n\n**Acceptance Criteria**:\n- Can create tasks from TUI and CLI\n- Task picker allows fuzzy search of active tasks\n- Two-pane view shows journal and current task\n- Logging to task writes to both task file and daily journal\n- rk task list shows active tasks\n- rk task log \u003cid\u003e \"msg\" works from CLI\n- Task status transitions work (active â†’ done/waiting/someday)\n- Can filter tasks by tag","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T16:47:07.626775343-05:00","updated_at":"2025-12-24T09:59:51.742318005-05:00","closed_at":"2025-12-24T09:59:51.742318005-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-9cn","depends_on_id":"reckon-a39","type":"blocks","created_at":"2025-12-22T16:49:06.147251564-05:00","created_by":"daemon"}]}
{"id":"reckon-9cx","title":"CLI: Interactive input mode for log/task commands","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:18.215463516-05:00","created_by":"chadd","updated_at":"2026-01-03T12:22:59.436470387-05:00","closed_at":"2026-01-03T12:22:59.436470387-05:00","close_reason":"Completed in PR #37","dependencies":[{"issue_id":"reckon-9cx","depends_on_id":"reckon-iat","type":"blocks","created_at":"2026-01-02T17:11:30.031312079-05:00","created_by":"chadd"}]}
{"id":"reckon-9gt","title":"Update task parser/writer for scheduled and deadline fields","description":"Extend task file parser and writer to handle scheduling frontmatter fields.\n\n## Changes\n\n**File**: `internal/journal/task_parser.go`\n\nParse new frontmatter fields:\n```markdown\n---\nid: abc123\ntitle: Example task\nstatus: open\nscheduled: 2025-01-15\ndeadline: 2025-01-20\n---\n```\n\n**File**: `internal/journal/task_writer.go`\n\nWrite scheduled/deadline to frontmatter:\n- Only include if non-nil\n- Format as YYYY-MM-DD\n- Preserve other frontmatter fields\n\n## Acceptance Criteria\n\n- Parser extracts scheduled field from frontmatter\n- Parser extracts deadline field from frontmatter\n- Parser handles missing fields (returns nil)\n- Writer includes scheduled in frontmatter if present\n- Writer includes deadline in frontmatter if present\n- Writer omits fields if nil\n- Round-trip preserves scheduling data\n- Unit tests for parsing and writing\n\n## Testing\n\nParse test cases:\n- Task with scheduled only\n- Task with deadline only\n- Task with both\n- Task with neither\n- Invalid date format (should error or skip)\n\nWrite test cases:\n- Write task with scheduled\n- Write task with deadline\n- Write task with both\n- Write task with neither\n\n## Dependencies\n\n- Requires: reckon-mvl (Task model fields)\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T21:30:56.069298073-05:00","created_by":"chadd","updated_at":"2026-01-11T21:30:56.069298073-05:00","dependencies":[{"issue_id":"reckon-9gt","depends_on_id":"reckon-mvl","type":"blocks","created_at":"2026-01-11T21:32:55.299997523-05:00","created_by":"chadd"}]}
{"id":"reckon-9n6","title":"Create task file parser and writer","description":"Create parser and writer for tasks.md file with support for nested notes.\n\n## Files to Create\n\n1. `internal/journal/task_parser.go`:\n   - `ParseTasksFile(content string) ([]Task, error)` - Parse tasks.md content\n   - `WriteTasksFile(tasks []Task) string` - Serialize tasks to markdown\n   \n## File Format\n\n```markdown\n# Tasks\n\n- [ ] task-id-1 Task 1 text\n- [ ] task-id-2 Task 2 text\n  - note-id-1 Note for task 2\n  - note-id-2 Another note\n- [x] task-id-3 Completed task\n```\n\n## Implementation Details\n\n- Parse checkbox status: `[ ]` (open), `[x]` (done)\n- Support nested notes with 2-space indentation\n- Extract task ID from the line (embedded in text for now)\n- Generate IDs using xid (consistent with existing code)\n- Sort by position when writing\n- Follow existing parser patterns from `internal/journal/parser.go`\n\n## Acceptance Criteria\n\n- Parses tasks with checkboxes and status\n- Parses nested notes with 2-space indentation\n- Writes tasks with proper formatting and indentation\n- Handles empty tasks list\n- Handles tasks with no notes\n\n## Dependencies\n\nRequires: Task and TaskNote models from previous ticket\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 2.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:43:46.317036065-05:00","updated_at":"2025-12-27T20:20:04.12685438-05:00","closed_at":"2025-12-27T20:20:04.12685438-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-9n6","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:41.441764884-05:00","created_by":"daemon"}]}
{"id":"reckon-9pr","title":"Fix vertical space filling for bordered panes - content not centering properly within allocated height","description":"## Problem\nThe bordered panes (Logs, Tasks, Schedule, Intentions, Wins) have visible borders but are not filling their full allocated vertical height. Content appears to be floating at the top of each pane with empty space below.\n\nAdditionally, the 3 rightmost panes (Schedule, Intentions, Wins) are not sharing vertical space evenly - they use a 30-35-35 split instead of equal thirds.\n\n## Root Cause\nCurrent implementation in renderNewLayout() has incorrect lipgloss usage:\n- Setting Width/Height on border styles doesn't pad content to fill space\n- Double placement with lipgloss.Place() is redundant and ineffective\n- Content needs to be explicitly centered within the allocated inner dimensions before applying borders\n\n## Solution\nRefactor renderNewLayout() to properly fill vertical space:\n1. For each pane, calculate inner dimensions (allocated_width - 2, allocated_height - 2)\n2. Use lipgloss.Place(inner_width, inner_height, Center, Center, content) to center content within inner space\n3. Apply border style to the placed content: lipgloss.NewStyle().Border().Render(placed_content)\n4. Update right sidebar layout to use equal thirds (33.3% each) for Schedule, Intentions, Wins panes\n\n## Files to Change\n- internal/tui/model.go: renderNewLayout() function\n- internal/tui/layout.go: Update CalculatePaneDimensions() to use equal thirds for right sidebar\n\n## Acceptance Criteria\n- All 5 panes (Logs, Tasks, Schedule, Intentions, Wins) fill their full allocated vertical height\n- Content is centered within each bordered pane\n- No empty space visible below content in any pane\n- Empty state messages are centered in the middle of their panes\n- Borders remain visible and properly sized\n- Right sidebar panes share vertical space evenly (equal thirds: Schedule, Intentions, Wins)","notes":"Depends on reckon-uf8 (Ensure all components fill allocated vertical space)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:31:05.535825764-05:00","created_by":"chadd","updated_at":"2026-01-02T11:40:10.875800551-05:00","closed_at":"2026-01-02T11:40:10.875800551-05:00","close_reason":"Closed"}
{"id":"reckon-9ts","title":"Add Log Expansion in TUI (Enter Key)","description":"Users expect to expand logs like tasks to view notes, but Enter/Space do nothing in log view. Root cause: Expansion logic not implemented for logs. Solution: Add expansion logic similar to tasks: toggle collapsedMap, rebuild items, show notes under expanded entries; update help text. Files: log_view.go. Test: Enter on logs should show/hide notes like tasks.","status":"closed","priority":2,"issue_type":"task","assignee":"chadd","created_at":"2026-01-10T14:54:51.145410384-05:00","created_by":"chadd","updated_at":"2026-01-11T21:54:52.566680119-05:00","closed_at":"2026-01-11T21:54:52.566680119-05:00","close_reason":"Closed"}
{"id":"reckon-a1y","title":"TUI: Inconsistent error handling in date navigation","description":"Date parsing errors in navigation functions are silently ignored.\n\nLocations:\n- internal/tui/model.go:240 (prevDay)\n- internal/tui/model.go:247 (nextDay)\n\nBoth functions use:\n  date, _ := time.Parse(...)\n\nIf m.currentDate is corrupted or invalid, these will fail silently and navigation will break in confusing ways.\n\nShould either:\n1. Return errors to be handled by caller\n2. Log the error\n3. Fall back to today's date\n\nRelated to reckon-re2 (general error handling improvements).","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T19:27:13.206070635-05:00","updated_at":"2025-12-29T14:52:52.482144748-05:00","closed_at":"2025-12-29T14:44:40.127567619-05:00","close_reason":"Fixed in PR #25 - added error handling with fallback to today's date"}
{"id":"reckon-a21","title":"Implement data model and database schema for log notes","description":"Foundation: Add LogNote struct and database schema.\n\n## Files to Modify\n- `internal/journal/models.go` - Add LogNote struct, update LogEntry\n- `internal/storage/database.go` - Add log_notes table and index\n\n## Changes\n\n### models.go (after line 141)\nAdd LogNote struct:\n```go\ntype LogNote struct {\n    ID       string\n    Text     string\n    Position int\n    // Future: NoteSlug string for zettelkasten\n}\n\nfunc NewLogNote(text string, position int) *LogNote\n```\n\nUpdate LogEntry (line 67-75):\n- Add `Notes []LogNote` field\n- Initialize in NewLogEntry constructor\n\n### database.go\nAdd after task_notes table (line 67):\n```sql\nCREATE TABLE IF NOT EXISTS log_notes (\n    id TEXT PRIMARY KEY,\n    log_entry_id TEXT NOT NULL,\n    text TEXT NOT NULL,\n    position INTEGER NOT NULL,\n    FOREIGN KEY (log_entry_id) REFERENCES log_entries(id) ON DELETE CASCADE\n);\n```\n\nAdd index (line 119):\n```sql\nCREATE INDEX IF NOT EXISTS idx_log_notes_entry ON log_notes(log_entry_id);\n```\n\n## Testing\n- Verify LogNote constructor generates unique IDs\n- Verify database schema creates without errors\n- Verify foreign key cascade deletion works","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:20.123553193-05:00","created_by":"chadd","updated_at":"2026-01-06T15:31:23.838588306-05:00","closed_at":"2026-01-06T15:31:23.838588306-05:00","close_reason":"Implemented LogNote struct, database schema, and comprehensive tests. Foundation complete for repository and parser layers."}
{"id":"reckon-a39","title":"Phase 1: Daily Journal MVP","description":"Implement the core daily journaling system - the foundation of Reckon. This creates a TUI for viewing/editing daily journals and CLI commands for scripting.\n\n**Storage Model**:\n- Data directory: ~/.reckon/\n- Journal files: ~/.reckon/journal/YYYY-MM-DD.md\n- SQLite index: ~/.reckon/reckon.db\n- Markdown is source of truth; SQLite is rebuildable via rk rebuild\n\n**Journal File Format** (journal/2025-01-15.md):\n```markdown\n---\ndate: 2025-01-15\n---\n\n## Intentions\n- [ ] Open task (unchecked)\n- [x] Completed task (checked)\n- [\u003e] Carried from previous day\n\n## Wins\n- Something accomplished\n\n## Log\n- 09:00 Started day\n- 10:30 [meeting:standup] 30m\n- 14:00 [task:abc123] Working on feature\n```\n\n**SQLite Schema**:\n```sql\nCREATE TABLE journals (date TEXT PRIMARY KEY, file_path TEXT, last_modified INTEGER);\nCREATE TABLE intentions (id TEXT PRIMARY KEY, journal_date TEXT, text TEXT, status TEXT, carried_from TEXT, position INTEGER);\nCREATE TABLE log_entries (id TEXT PRIMARY KEY, journal_date TEXT, timestamp TEXT, content TEXT, task_id TEXT, entry_type TEXT, duration_minutes INTEGER, position INTEGER);\nCREATE TABLE wins (id TEXT PRIMARY KEY, journal_date TEXT, text TEXT, position INTEGER);\n```\n\n**Features to Implement**:\n\n1. **Project Setup**\n   - Initialize Go module, create directory structure per plan\n   - Dependencies: bubbletea, lipgloss, bubbles, cobra, goldmark, fsnotify, xid, modernc.org/sqlite\n\n2. **Config \u0026 Paths** (internal/config/)\n   - DataDir(), JournalDir(), DatabasePath() helpers\n   - Auto-create directories on first run\n\n3. **Domain Models** (internal/journal/)\n   - Journal, Intention (open/done/carried), LogEntry (log/meeting/break), Win\n   - ID generation using xid\n\n4. **Markdown Parser** (internal/parser/)\n   - Parse YAML frontmatter (date)\n   - Parse sections by H2 headers (Intentions, Wins, Log)\n   - Parse intention markers: [ ], [x], [\u003e]\n   - Parse log entries: timestamp, optional [meeting:name], [task:id], duration 30m\n\n5. **Markdown Writer** (internal/parser/)\n   - Serialize Journal back to markdown format\n   - Round-trip must preserve content\n\n6. **Storage Layer** (internal/storage/)\n   - Filesystem: read/write markdown files\n   - SQLite: connection with WAL mode, migrations, repository pattern\n\n7. **Journal Service** (internal/journal/service.go)\n   - GetToday(), GetByDate(date), AppendLog(content), AddIntention(text), ToggleIntention(id), AddWin(text)\n   - Dual-write: update markdown file AND SQLite\n   - Auto-carry: when opening a new day, copy open intentions from yesterday as [\u003e]\n\n8. **CLI Commands** (internal/cli/)\n   - rk log \"msg\" - append timestamped entry to today's log\n   - rk today - output today's journal to stdout (for LLM piping)\n   - rk week - output last 7 days to stdout\n   - rk rebuild - delete and regenerate SQLite from all markdown files\n\n9. **TUI** (internal/tui/)\n   - Main model with state: currentDate, currentJournal, focusedSection\n   - Components: IntentionList (navigable, Enter to toggle), WinsView, LogView, LogInput (text input)\n   - Statusbar with keybinding hints\n   - Key bindings: Tab (cycle sections), i (add intention), l (add log), w (add win), h/Left (prev day), l/Right (next day, max today), t (jump to today), ? (help), q (quit)\n   - Past days are read-only (no editing)\n\n10. **File Watcher** (internal/sync/)\n    - Watch ~/.reckon/journal/ for external changes\n    - Debounce 100ms, re-index changed files to SQLite\n    - Notify TUI to reload if current journal changed\n\n**Acceptance Criteria**:\n- rk launches TUI showing today's journal (creates empty if none exists)\n- Can navigate sections with Tab, add intentions with 'i', log entries with 'l', wins with 'w'\n- Can toggle intentions done with Enter\n- Can navigate to previous days with h/l (read-only)\n- rk log \"test\" appends to today's journal from CLI\n- rk today outputs journal content to stdout\n- rk rebuild regenerates SQLite from markdown files\n- External file edits are detected and TUI refreshes\n- Opening a new day auto-carries open intentions with [\u003e] marker\n\n**Key Files**:\n- cmd/rk/main.go - entry point\n- internal/journal/service.go - core business logic\n- internal/parser/journal_parser.go - markdown parsing\n- internal/tui/model.go - TUI state management","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T16:47:05.957692427-05:00","updated_at":"2025-12-24T08:39:49.140948786-05:00","closed_at":"2025-12-24T08:39:49.140948786-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-a39","depends_on_id":"reckon-l7d","type":"blocks","created_at":"2025-12-22T17:17:43.596222613-05:00","created_by":"daemon"},{"issue_id":"reckon-a39","depends_on_id":"reckon-3e9","type":"blocks","created_at":"2025-12-22T17:17:43.638904395-05:00","created_by":"daemon"}]}
{"id":"reckon-add","title":"TUI: Implement help mode or remove hint from status bar","description":"Status bar shows help hint but help mode is not implemented.\n\nLocation: internal/tui/model.go:145-147\n\nThe question mark key currently does nothing, but the status bar advertises it.\n\nOptions:\n1. Implement help overlay showing all keybindings\n2. Remove the help hint from status bar\n\nEither way, the current state confuses users who press question mark expecting help.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:53:43.877771907-05:00","updated_at":"2025-12-22T19:42:38.182449664-05:00","closed_at":"2025-12-22T19:42:38.182449664-05:00","close_reason":"Closed"}
{"id":"reckon-ajz","title":"Critical: Implement database schema migrations","description":"Database schema changes (like adding tags column) break existing databases. Need a migration system to:\n1. Track schema version\n2. Run migrations on startup\n3. Handle schema evolution gracefully\n\nCurrent impact: Adding notes fails silently in TUI when tags column is missing. Users must manually run: sqlite3 ~/.reckon/reckon.db 'ALTER TABLE tasks ADD COLUMN tags TEXT'","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-10T17:11:08.416086406-05:00","created_by":"chadd","updated_at":"2026-01-10T18:27:49.667862701-05:00","closed_at":"2026-01-10T18:27:49.667862701-05:00","close_reason":"Implemented simple migration system in storage/database.go that adds missing columns on startup"}
{"id":"reckon-awc","title":"TUI: Fix state mutation bug in submitInput","description":"State reset happens inside the tea.Cmd function instead of in model update, causing potential race conditions.\n\nLocation: internal/tui/model.go:290-293\n\n\n\nThe state changes should happen in the Update() function, not in the command. This violates Bubble Tea's architecture and could cause state corruption.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T18:53:02.329065842-05:00","updated_at":"2025-12-22T19:34:34.186455204-05:00","closed_at":"2025-12-22T19:34:34.186455204-05:00","close_reason":"Fixed: State mutation has been properly moved to Update function. Also completed full migration to bubbles/textinput component, removing hybrid state that would have caused input bugs."}
{"id":"reckon-aww","title":"Extend journal writer for Schedule section","description":"Extend journal writer to output ## Schedule section.\n\n## File to Modify\n\n`internal/journal/writer.go`\n\n## Changes\n\nAdd Schedule section between frontmatter and Intentions (insert after line ~16):\n\n```go\n// Write Schedule section\nsb.WriteString(\"## Schedule\\n\\n\")\nif len(j.ScheduleItems) \u003e 0 {\n    sortedSchedule := make([]ScheduleItem, len(j.ScheduleItems))\n    copy(sortedSchedule, j.ScheduleItems)\n    sort.Slice(sortedSchedule, func(i, j int) bool {\n        return sortedSchedule[i].Position \u003c sortedSchedule[j].Position\n    })\n    \n    for _, item := range sortedSchedule {\n        if !item.Time.IsZero() {\n            timeStr := item.Time.Format(\"15:04\")\n            sb.WriteString(fmt.Sprintf(\"- %s %s\\n\", timeStr, item.Content))\n        } else {\n            sb.WriteString(fmt.Sprintf(\"- %s\\n\", item.Content))\n        }\n    }\n}\nsb.WriteString(\"\\n\")\n```\n\n## Format\n\n```markdown\n## Schedule\n\n- 09:00 Morning standup\n- 14:00 Client meeting\n- Review PR\n\n## Intentions\n...\n```\n\n## Implementation Details\n\n- Sort by position before writing\n- Format time as HH:MM (15:04)\n- Omit time if Time.IsZero()\n- Follow existing patterns (see Intentions/Wins/Log sections)\n- Include section even if empty (with blank line)\n\n## Acceptance Criteria\n\n- Writes ## Schedule section before Intentions\n- Formats time as HH:MM when present\n- Omits time when not set\n- Sorts by position\n- Handles empty schedule list\n\n## Dependencies\n\nRequires: ScheduleItem model and journal parser extension\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 2.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:45:56.859539502-05:00","updated_at":"2025-12-28T16:36:09.966788961-05:00","closed_at":"2025-12-28T16:27:56.535164277-05:00","close_reason":"Schedule section writer implemented with proper time formatting, position sorting, empty handling, and comprehensive test coverage including round-trip verification. Code review grade: 9/10 (Excellent). PR #19 merged to main.","dependencies":[{"issue_id":"reckon-aww","depends_on_id":"reckon-mpn","type":"blocks","created_at":"2025-12-23T19:49:41.534559055-05:00","created_by":"daemon"}]}
{"id":"reckon-bdh","title":"Enable schedule add/delete in CLI and TUI","description":"## Problem\n\nUsers cannot add or delete schedule items despite the feature being fully implemented in the backend.\n\n1. **CLI**: Commands exist in `internal/cli/schedule.go` but are NOT registered in root.go\n2. **TUI**: Schedule section is read-only - can view items but cannot add/edit/delete\n\n## Current Implementation\n\n### Backend (Complete)\n- **Model**: `ScheduleItem` struct with ID, Time, Content, Position\n- **Service**: Full CRUD via `AddScheduleItem()`, `DeleteScheduleItem()`, `GetScheduleItems()`\n- **Database**: SQLite table `schedule_items` with proper schema\n- **Tests**: Comprehensive test coverage in `internal/journal/schedule_test.go`\n\n### CLI (Implemented but Disconnected)\n**File**: `internal/cli/schedule.go`\n\nCommands that exist but aren't accessible:\n- `rk schedule add [time] \u003ccontent\u003e` - Add item (time optional, HH:MM format)\n- `rk schedule list` - Display today's schedule\n- `rk schedule delete \u003cindex\u003e` - Remove item by index\n\n**Why disconnected**: `GetScheduleCommand()` is not called in `internal/cli/root.go`\n\n### TUI (Display Only)\n**File**: `internal/tui/components/schedule_view.go`\n\n- ScheduleView renders items in right sidebar\n- Items sorted by time (timed first, then untimed)\n- Section navigable via Tab key\n- NO keyboard handlers for add/edit/delete\n\n## Desired Behavior\n\n### CLI\n1. Register schedule command in root.go\n2. Users can run:\n   - `rk schedule add 09:00 \"Morning standup\"`\n   - `rk schedule add \"Review PRs\"` (no time)\n   - `rk schedule list`\n   - `rk schedule delete 1`\n\n### TUI\n1. When Schedule section is focused:\n   - `a` or `s` key opens text entry for adding item\n   - `d` key deletes selected item (with confirmation)\n   - `Enter` could edit selected item (optional)\n2. Update status bar hints for Schedule section\n\n## Implementation Details\n\n### CLI Fix (Simple)\n**File**: `internal/cli/root.go` around line 52\n\nAdd:\n```go\nRootCmd.AddCommand(GetScheduleCommand())\n```\n\n### TUI Changes\n**Files to modify**:\n\n1. `internal/tui/model.go`:\n   - Add `ModeSchedule` constant to entry modes\n   - In key handler, when `SectionSchedule` focused and `a` pressed: activate text entry\n   - Add delete handler for schedule items\n   - Wire up submit callback for schedule mode\n\n2. `internal/tui/components/text_entry_bar.go`:\n   - Add `ModeSchedule` to mode enum if not present\n   - Set prompt to \"Add schedule item (HH:MM content): \" or similar\n\n3. `internal/tui/components/status_bar.go`:\n   - Add hints for Schedule section: `a:add d:delete`\n\n### Time Parsing\nThe service already handles time parsing:\n- Accepts \"HH:MM\" or \"HH:MM:SS\" format\n- Empty string for untimed items\n- User could enter \"09:00 Meeting\" or just \"Meeting\"\n\n## Acceptance Criteria\n\n### CLI\n- [ ] `rk schedule add` works with time and content\n- [ ] `rk schedule add` works with content only (no time)\n- [ ] `rk schedule list` shows today's items\n- [ ] `rk schedule delete \u003cindex\u003e` removes item\n\n### TUI\n- [ ] Can add schedule item when Schedule section focused\n- [ ] Can delete schedule item when Schedule section focused\n- [ ] Hints show available commands for Schedule section\n- [ ] Items persist after restart\n\n## Files to Modify\n\n- `internal/cli/root.go` - Register GetScheduleCommand() (1 line)\n- `internal/tui/model.go` - Add keyboard handlers and mode support\n- `internal/tui/components/text_entry_bar.go` - Add ModeSchedule\n- `internal/tui/components/status_bar.go` - Update hints\n\n## Testing\n\n- Test CLI add with time\n- Test CLI add without time  \n- Test CLI delete\n- Test TUI add via keyboard\n- Test TUI delete via keyboard\n- Verify persistence after restart","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T18:22:17.199840219-05:00","created_by":"chadd","updated_at":"2026-01-10T13:21:18.661958525-05:00","closed_at":"2026-01-10T13:21:18.661958525-05:00","close_reason":"Closed"}
{"id":"reckon-bxr","title":"CLI/TUI: View and edit task details","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:20.200364001-05:00","created_by":"chadd","updated_at":"2026-01-03T12:30:49.647414578-05:00","closed_at":"2026-01-03T12:30:49.647414578-05:00","close_reason":"Completed in PR #41","dependencies":[{"issue_id":"reckon-bxr","depends_on_id":"reckon-g1y","type":"blocks","created_at":"2026-01-02T17:11:30.728597899-05:00","created_by":"chadd"}]}
{"id":"reckon-c9u","title":"Journal task_service_test.go tests failing","description":"Multiple tests in internal/journal/task_service_test.go are failing with 'task not found' errors. Tests affected: TestAddTask, TestToggleTask_OpenToDone, TestToggleTask_DoneToOpen, TestAddTaskNote, TestAddTaskNote_MultipleNotes, TestService_DeleteTaskNote.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T21:42:24.284897997-05:00","created_by":"chadd","updated_at":"2026-01-10T11:35:51.710377647-05:00","closed_at":"2026-01-10T11:35:51.710377647-05:00","close_reason":"Fixed failing tests by updating to use new task file format with YAML frontmatter"}
{"id":"reckon-csz","title":"TUI Redesign: Work-Focused Daylog View","description":"Redesign the TUI from 3-column equal layout to work-focused 4-pane layout:\n- Left (40%): Logs\n- Center (40%): Tasks with collapsible notes\n- Right (18%): Stacked Schedule/Intentions/Wins\n\nNew features:\n- Tasks: General todo list with nested notes (global tasks.md file)\n- Schedule: Upcoming items in daily journals (new ## Schedule section)\n- Text entry bar: Always visible at bottom (replaces modal input)\n\nUX decisions:\n- Text entry always visible with context-aware prompt\n- Completed tasks shown with strikethrough\n- Keys (t/i/w/L) focus text entry bar\n\nKeep Bubble Tea framework. Maintain backward compatibility.\n\nDesign reference: docs/daylog_view_sketch_2025-12-23_19-26.png\nImplementation plan: ~/.claude/plans/recursive-strolling-treehouse.md","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-23T19:42:56.156816028-05:00","updated_at":"2025-12-29T19:46:16.304897304-05:00","closed_at":"2025-12-29T19:46:16.304897304-05:00","close_reason":"Epic complete - all sub-tasks done: layout, components, documentation","dependencies":[{"issue_id":"reckon-csz","depends_on_id":"reckon-7hf","type":"blocks","created_at":"2025-12-23T19:49:42.937957968-05:00","created_by":"daemon"}]}
{"id":"reckon-def","title":"TUI: start with Logs section focused instead of Intentions","description":"## Problem\n\nThe TUI currently starts with the Intentions section focused. The Logs section is more frequently used and should be the default focus on startup.\n\n## Current Implementation\n\n**File**: `internal/tui/model.go`\n\nThe initial focused section is set when creating the TUI model. Look for:\n- `activeSection` or `focusedSection` field initialization\n- `SectionIntentions` constant being set as default\n- `New()` or `NewModel()` function that initializes the model\n\nThe section constants are likely defined as:\n```go\nconst (\n    SectionIntentions Section = iota\n    SectionWins\n    SectionTasks\n    SectionSchedule\n    SectionLogs\n)\n```\n\n## Desired Behavior\n\nWhen the TUI starts, the Logs section should be focused instead of Intentions:\n- Log entries visible and navigable immediately\n- Status bar hints show Logs section commands\n- User can immediately add log entries with `L` key\n\n## Implementation\n\nFind where `activeSection` (or similar) is initialized and change from `SectionIntentions` to `SectionLogs`.\n\nLikely a one-line change in `internal/tui/model.go`:\n\n```go\n// Before\nactiveSection: SectionIntentions,\n\n// After\nactiveSection: SectionLogs,\n```\n\n## Acceptance Criteria\n\n- [ ] TUI opens with Logs section focused\n- [ ] Log entries are immediately navigable\n- [ ] Status bar shows Logs section hints on startup\n- [ ] Tab navigation still works to move between sections\n\n## Files to Modify\n\n- `internal/tui/model.go` - Change initial `activeSection` value\n\n## Testing\n\n- Launch TUI and verify Logs section is highlighted/focused\n- Verify Tab key still cycles through sections correctly\n- Verify all section-specific commands work after navigation","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-04T18:24:00.853381173-05:00","created_by":"chadd","updated_at":"2026-01-04T18:24:00.853381173-05:00"}
{"id":"reckon-dqf","title":"Change TaskService to read tasks from individual files in tasks directory","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-02T14:22:26.602957515-05:00","created_by":"chadd","updated_at":"2026-01-02T14:23:58.082357814-05:00","closed_at":"2026-01-02T14:23:58.082357814-05:00","close_reason":"Closed"}
{"id":"reckon-e0f","title":"Add Task, TaskNote, ScheduleItem models and DB schema","description":"Add new data models to support tasks and schedule items.\n\n## Files to Modify\n\n1. `internal/journal/models.go`:\n   - Add `Task` struct: ID, Text, Status (TaskStatus), Notes ([]TaskNote), Position, CreatedAt\n   - Add `TaskNote` struct: ID, Text, Position\n   - Add `ScheduleItem` struct: ID, Time (time.Time), Content, Position\n   - Add `TaskStatus` enum: open, done, archived\n   - Add constructor functions: NewTask, NewTaskNote, NewScheduleItem\n   - Extend `Journal` struct: Add `ScheduleItems []ScheduleItem` field\n\n2. `internal/storage/database.go`:\n   - Add `tasks` table schema: id (PK), text, status, position, created_at\n   - Add `task_notes` table schema: id (PK), task_id (FK), text, position\n   - Add `schedule_items` table schema: id (PK), journal_date (FK), time, content, position\n   - Add indices for performance\n\n## Acceptance Criteria\n\n- Task, TaskNote, ScheduleItem structs defined with all fields\n- TaskStatus enum with open/done/archived values\n- Journal struct includes ScheduleItems field\n- Database schema includes all three new tables with proper foreign keys\n- Constructor functions implemented for all new types\n\n## Context\n\nThis is the foundation for the TUI redesign. Tasks are global (stored in tasks.md), while schedule items are per-journal.\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 1.1-1.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:43:45.949909205-05:00","updated_at":"2025-12-27T19:29:25.321760017-05:00","closed_at":"2025-12-27T19:29:25.321760017-05:00","close_reason":"Implementation already completed - all structs and DB schema in place","comments":[{"id":1,"issue_id":"reckon-e0f","author":"chadd","text":"Completed implementation of Task, TaskNote, ScheduleItem models and database schema. All acceptance criteria met.","created_at":"2025-12-24T01:09:44Z"}]}
{"id":"reckon-e30","title":"CLI/TUI: Add schedule items","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:20.693671559-05:00","created_by":"chadd","updated_at":"2026-01-03T12:35:50.037908857-05:00","closed_at":"2026-01-03T12:35:50.037908857-05:00","close_reason":"Completed in PR #42"}
{"id":"reckon-ee4","title":"Add notes database schema with FTS5 support","description":"Create database tables for notes with full-text search support.\n\n## Schema\n\n**File**: `internal/storage/migrations.go` or `internal/storage/database.go`\n\nAdd tables:\n```sql\n-- Main notes table\nCREATE TABLE notes (\n  slug TEXT PRIMARY KEY,\n  title TEXT NOT NULL,\n  created TEXT NOT NULL,\n  file_path TEXT NOT NULL\n);\n\n-- Note tags (many-to-many)\nCREATE TABLE note_tags (\n  slug TEXT NOT NULL,\n  tag TEXT NOT NULL,\n  PRIMARY KEY (slug, tag),\n  FOREIGN KEY (slug) REFERENCES notes(slug) ON DELETE CASCADE\n);\n\n-- Full-text search index\nCREATE VIRTUAL TABLE notes_fts USING fts5(\n  slug,\n  title,\n  content,\n  tags,\n  content='notes',\n  content_rowid='rowid'\n);\n\n-- Triggers to keep FTS5 in sync\nCREATE TRIGGER notes_fts_insert AFTER INSERT ON notes BEGIN\n  INSERT INTO notes_fts(rowid, slug, title, content, tags)\n  SELECT rowid, slug, title, '', '' FROM notes WHERE slug = new.slug;\nEND;\n\nCREATE TRIGGER notes_fts_delete AFTER DELETE ON notes BEGIN\n  DELETE FROM notes_fts WHERE rowid = old.rowid;\nEND;\n\n-- Indices for performance\nCREATE INDEX idx_note_tags_tag ON note_tags(tag);\nCREATE INDEX idx_note_tags_slug ON note_tags(slug);\n```\n\n## Acceptance Criteria\n\n- Migration creates notes table\n- Migration creates note_tags table\n- Migration creates notes_fts virtual table with FTS5\n- Triggers keep FTS5 in sync with notes table\n- Indices created for efficient queries\n- Migration is idempotent\n- Unit tests verify schema creation\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:35:01.639169336-05:00","created_by":"chadd","updated_at":"2026-01-11T21:35:01.639169336-05:00"}
{"id":"reckon-eg7","title":"TUI: Implement weighted multi-section vertical split view with borders","description":"Replace tabbed interface with vertical panes: Intentions (25%) | Wins (25%) | Logs (50%) with borders between sections. This allows viewing multiple entries from all categories simultaneously, addressing the 'one at a time' display issue.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T20:15:06.269898711-05:00","updated_at":"2025-12-22T20:15:52.863085031-05:00","closed_at":"2025-12-22T20:15:52.863085031-05:00","close_reason":"Closed"}
{"id":"reckon-egt","title":"UX: Explore separate pane for task notes display","description":"Current state: Notes appear as indented items below tasks in the task list. For lengthy notes, this can clutter the task list and make it hard to scan.\n\nProposal: Display notes in a separate pane, potentially splitting the Tasks column vertically - tasks on top, selected task's notes below. This would:\n- Keep task list clean and scannable\n- Give notes more room for longer content\n- Make it clearer which notes belong to which task\n- Allow for better note formatting/wrapping\n\nConsider: How to handle the split when no task is selected, or selected task has no notes.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T17:00:39.522553372-05:00","created_by":"chadd","updated_at":"2026-01-10T17:00:39.522553372-05:00"}
{"id":"reckon-eps","title":"TUI: Implement multi-section split view","description":"Currently only one section (Intentions/Wins/Logs) is visible at a time. User must tab between them.\n\nWould be more useful to see all sections simultaneously in a split-pane layout.\n\nSuggested layout:\n\n\nThis is a bigger UX change - may want user feedback first.","status":"closed","priority":3,"issue_type":"feature","assignee":"chadd","created_at":"2025-12-22T18:53:15.105609805-05:00","updated_at":"2026-01-03T12:39:24.455288929-05:00","closed_at":"2026-01-03T12:39:24.455288929-05:00","close_reason":"Completed in PR #44"}
{"id":"reckon-f4h","title":"Review codebase for simplification and maintainability refactoring opportunities","description":"Perform a comprehensive review of the codebase to identify opportunities for:\n\n1. **Code simplification**\n   - Remove dead code or unused functions\n   - Simplify overly complex logic\n   - Reduce duplication (DRY principle)\n\n2. **Maintainability improvements**\n   - Improve code organization and structure\n   - Ensure consistent patterns across similar components\n   - Identify areas where abstractions could help (or hurt)\n\n3. **Technical debt**\n   - Find TODO/FIXME comments that should be addressed\n   - Identify stub implementations (like isTerminal returning true)\n   - Check for inconsistent error handling patterns\n\n4. **Dependency hygiene**\n   - Verify all imports are necessary\n   - Check for opportunities to reduce dependency footprint\n\nDocument findings and create follow-up tickets for any significant refactoring work identified.","status":"closed","priority":3,"issue_type":"task","assignee":"chadd","created_at":"2026-01-08T22:18:39.069963596-05:00","created_by":"chadd","updated_at":"2026-01-10T12:26:55.69926363-05:00","closed_at":"2026-01-10T12:26:55.69926363-05:00","close_reason":"Completed in PR #54"}
{"id":"reckon-fcm","title":"Create TaskService for task management","description":"Create service layer for task business logic.\n\n## File to Create\n\n`internal/journal/task_service.go`\n\n## Methods to Implement\n\n```go\ntype TaskService struct {\n    repo       *TaskRepository\n    filesystem *storage.Filesystem\n    parser     *TaskParser // or use functions directly\n}\n\nfunc NewTaskService(repo *TaskRepository, fs *storage.Filesystem) *TaskService\n\n// GetAllTasks loads tasks from file and DB (file is source of truth)\nfunc (s *TaskService) GetAllTasks() ([]Task, error)\n\n// AddTask creates a new task\nfunc (s *TaskService) AddTask(text string) error\n\n// ToggleTask toggles task status (open \u003c-\u003e done)\nfunc (s *TaskService) ToggleTask(taskID string) error\n\n// AddTaskNote adds a note to a task\nfunc (s *TaskService) AddTaskNote(taskID, noteText string) error\n\n// DeleteTaskNote removes a note from a task\nfunc (s *TaskService) DeleteTaskNote(taskID, noteID string) error\n\n// save (private) persists tasks to file and DB\nfunc (s *TaskService) save(tasks []Task) error\n```\n\n## Implementation Flow\n\n**GetAllTasks:**\n1. Read tasks.md via filesystem.ReadTasksFile()\n2. Parse content via ParseTasksFile()\n3. Return tasks\n\n**AddTask:**\n1. Load all tasks\n2. Create new Task with generated ID, position = len(tasks)\n3. Append to list\n4. save()\n\n**ToggleTask:**\n1. Load all tasks\n2. Find task by ID\n3. Toggle status (open â†’ done, done â†’ open)\n4. save()\n\n**save (private):**\n1. Write to file: WriteTasksFile() + filesystem.WriteTasksFile()\n2. Write to DB: repo.SaveTasks() (for indexing/querying)\n3. Both must succeed (consider transaction)\n\n## Implementation Details\n\n- File is source of truth, DB is index/cache\n- Always load from file, save to both\n- Use xid for generating IDs (consistent with rest of codebase)\n- Position based on array index\n\n## Acceptance Criteria\n\n- GetAllTasks loads from file and returns parsed tasks\n- AddTask creates task with generated ID and saves\n- ToggleTask flips status and persists\n- AddTaskNote adds note to correct task\n- save() writes to both file and DB\n\n## Dependencies\n\nRequires: TaskRepository, task parser, file storage methods\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 2, Step 3.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:46:28.973211094-05:00","updated_at":"2025-12-28T14:43:59.974091177-05:00","closed_at":"2025-12-28T14:38:01.310252041-05:00","close_reason":"TaskService implemented with file-first architecture, comprehensive CRUD operations, XID format support, and full test coverage (17 tests). Code reviewed and approved (Grade: A-). PR #16 merged to main.","dependencies":[{"issue_id":"reckon-fcm","depends_on_id":"reckon-0e5","type":"blocks","created_at":"2025-12-23T19:49:41.619258416-05:00","created_by":"daemon"},{"issue_id":"reckon-fcm","depends_on_id":"reckon-9n6","type":"blocks","created_at":"2025-12-23T19:49:41.663695107-05:00","created_by":"daemon"},{"issue_id":"reckon-fcm","depends_on_id":"reckon-440","type":"blocks","created_at":"2025-12-23T19:49:41.716188743-05:00","created_by":"daemon"}]}
{"id":"reckon-g1y","title":"CLI/TUI: Human-friendly sequential task IDs","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:18.653711699-05:00","created_by":"chadd","updated_at":"2026-01-03T12:24:48.78880849-05:00","closed_at":"2026-01-03T12:24:48.78880849-05:00","close_reason":"Completed in PR #38"}
{"id":"reckon-gz8","title":"Create NoteView component for TUI","description":"Build note viewing component with wiki-link navigation.\n\n## Component\n\n**File**: `internal/tui/components/note_view.go`\n\n### Features\n\n- Display note title, tags, and content\n- Render markdown or show plain text\n- Highlight [[slug]] links\n- Navigate links with j/k, Enter to follow\n- 'e' key to edit note in $EDITOR\n- 'b' key to go back (navigation history)\n- Show backlinks (what references this note)\n\n### UI Layout\n\n```\nâ•­â”€ git-interactive-rebase â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ Git interactive rebase workflow                   â”‚\nâ”‚ Tags: [git, workflow]                             â”‚\nâ”‚ Created: 2025-01-12                               â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                    â”‚\nâ”‚ To squash the last 3 commits:                     â”‚\nâ”‚     git rebase -i HEAD~3                          â”‚\nâ”‚                                                    â”‚\nâ”‚ Change 'pick' to 'squash' for commits to combine. â”‚\nâ”‚                                                    â”‚\nâ”‚ ## See Also                                       â”‚\nâ”‚ - [[git-bisect-workflow]]                         â”‚\nâ”‚ - [[git-cherry-pick]]                             â”‚\nâ”‚                                                    â”‚\nâ”œâ”€ Backlinks (2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â€¢ 2025-01-11 Log: Learned git rebase              â”‚\nâ”‚ â€¢ Task abc123: API refactoring notes              â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â†‘â†“:scroll  enter:follow link  e:edit  b:back  q   â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n### Component Structure\n\n```go\ntype NoteView struct {\n    note         *note.Note\n    backlinks    []Backlink\n    scrollOffset int\n    selectedLink int  // Index of selected [[link]]\n    width        int\n    height       int\n    noteService  *note.NoteService\n}\n\ntype Backlink struct {\n    SourceType string  // \"log\", \"task\", \"intention\", \"win\"\n    SourceID   string\n    Date       string\n    Preview    string  // Short preview of referencing content\n}\n\nfunc NewNoteView(slug string, noteService *note.NoteService) (NoteView, error)\nfunc (m NoteView) Update(msg tea.Msg) (NoteView, tea.Cmd)\nfunc (m NoteView) View() string\n```\n\n### Rendering\n\n**Markdown Rendering**:\n- Option 1: Use goldmark to render to plain text with ANSI codes\n- Option 2: Simple rendering (headers bold, code blocks indented)\n- Highlight [[slug]] links (blue, underlined, or inverse video)\n\n**Link Navigation**:\n- Extract all [[slug]] from content\n- j/k to move between links\n- Highlight current link\n- Enter to follow (load that note)\n\n**Scrolling**:\n- Viewport shows partial content if note is long\n- j/k scroll when not on a link\n- PgUp/PgDn for page scrolling\n\n### Backlinks\n\n**Query backlinks**:\n```sql\nSELECT source_type, source_id, date, preview\nFROM note_references\nJOIN (logs/tasks/etc) ON source_id\nWHERE note_slug = ?\nORDER BY date DESC\n```\n\n**Display**:\n- Show up to 10 most recent\n- Format: type, date, preview snippet\n- Optional: Click to jump to source\n\n### Editor Integration\n\nWhen 'e' pressed:\n- Open note file in $EDITOR\n- Wait for editor to close\n- Reload note (user may have edited)\n- Re-index if content changed\n\n### Navigation History\n\nTrack viewed notes:\n```go\ntype NoteHistory struct {\n    stack []string  // slug stack\n}\n```\n\n- When following link, push current slug\n- 'b' key pops and loads previous note\n- Max history depth: 50\n\n### Keyboard Shortcuts\n\n- **â†‘â†“ or j/k**: Scroll content / navigate links\n- **Enter**: Follow selected [[link]]\n- **e**: Edit note in $EDITOR\n- **b**: Back to previous note\n- **q or ESC**: Close note view\n- **PgUp/PgDn**: Page scroll\n- **/**: Quick search within note (future)\n\n## Acceptance Criteria\n\n- NoteView displays note content\n- [[slug]] links are highlighted\n- Navigate links with j/k, follow with Enter\n- Backlinks section shows references\n- 'e' opens note in $EDITOR\n- Editor changes reload note automatically\n- 'b' navigates back through history\n- Scrolling works for long notes\n- Responsive to terminal resize\n- Handles note not found gracefully\n\n## Dependencies\n\n- Requires: reckon-plv (NoteService)\n- Requires: reckon-38a (Parser for rendering)\n- Requires: reckon-s0j (Backlinks from wiki-link parsing)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:39:54.624765947-05:00","created_by":"chadd","updated_at":"2026-01-11T21:39:54.624765947-05:00","dependencies":[{"issue_id":"reckon-gz8","depends_on_id":"reckon-plv","type":"blocks","created_at":"2026-01-11T21:42:10.394101974-05:00","created_by":"chadd"},{"issue_id":"reckon-gz8","depends_on_id":"reckon-38a","type":"blocks","created_at":"2026-01-11T21:42:10.500880598-05:00","created_by":"chadd"},{"issue_id":"reckon-gz8","depends_on_id":"reckon-s0j","type":"blocks","created_at":"2026-01-11T21:42:10.622880948-05:00","created_by":"chadd"}]}
{"id":"reckon-hwo","title":"TUI: Add minimum terminal size validation","description":"Components receive size updates but don't validate minimum dimensions.\n\nIf terminal is too small, the UI may break or render incorrectly.\n\nShould:\n1. Define minimum usable dimensions (e.g., 80x24)\n2. Check on WindowSizeMsg\n3. Show 'Terminal too small' message if below minimum\n4. Gracefully handle resize events\n\nLocations: internal/tui/model.go:72-87","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T18:53:27.040093904-05:00","updated_at":"2025-12-23T21:16:45.521766447-05:00","closed_at":"2025-12-23T21:16:45.521766447-05:00","close_reason":"Closed"}
{"id":"reckon-iat","title":"CLI: Add stdin support with - argument","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-02T17:11:17.726868053-05:00","created_by":"chadd","updated_at":"2026-01-03T12:17:44.527525797-05:00","closed_at":"2026-01-03T12:17:44.527525797-05:00","close_reason":"Completed in PR #36"}
{"id":"reckon-j7x","title":"Implement note creation flow in TUI","description":"Add TUI interface for creating new notes with title and tags.\n\n## Feature\n\nWhen in Notes mode, Ctrl+N opens note creation form.\n\n### Creation Form\n\n**File**: `internal/tui/components/note_create_form.go`\n\n```\nâ•­â”€ Create New Note â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚                                                    â”‚\nâ”‚ Title: Git Interactive Rebase Workflow            â”‚\nâ”‚                                                    â”‚\nâ”‚ Tags (comma-separated): git, workflow             â”‚\nâ”‚                                                    â”‚\nâ”‚ [ Create ]  [ Cancel ]                            â”‚\nâ”‚                                                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ enter:create  esc:cancel  tab:next field          â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n### Component Structure\n\n```go\ntype NoteCreateForm struct {\n    titleInput textinput.Model\n    tagsInput  textinput.Model\n    focusIndex int  // 0=title, 1=tags, 2=button\n    width      int\n    height     int\n}\n\nfunc NewNoteCreateForm() NoteCreateForm\nfunc (m NoteCreateForm) Update(msg tea.Msg) (NoteCreateForm, tea.Cmd)\nfunc (m NoteCreateForm) View() string\n```\n\n### Behavior\n\n**Input Fields**:\n- Title: Required, min 3 chars\n- Tags: Optional, comma-separated\n- Tab to move between fields\n\n**Validation**:\n- Title required\n- Slug generated from title (preview below title?)\n- Check for duplicate slug\n- Tags parsed and trimmed\n\n**Creation Flow**:\n1. User fills title and tags\n2. Press Enter or click Create\n3. Validate inputs\n4. Generate slug\n5. Create note file with frontmatter\n6. Open in $EDITOR\n7. After editor closes, parse and index\n8. Show success message\n9. Open NoteView for new note\n\n**Error Handling**:\n- Show error if title empty\n- Show error if slug exists\n- Suggest alternate title if slug conflict\n\n### Editor Integration\n\nAfter form submitted:\n```go\nfunc createNote(title string, tags []string) error {\n    slug := GenerateSlug(title)\n    note := \u0026Note{\n        Slug:    slug,\n        Title:   title,\n        Tags:    tags,\n        Created: time.Now(),\n        Content: \"\", // Empty initially\n    }\n    \n    // Write note file\n    filePath := filepath.Join(notesDir, slug+\".md\")\n    WriteNote(note, filePath)\n    \n    // Open in editor\n    OpenEditor(filePath)\n    \n    // Parse back (user may have edited)\n    note, _ = ParseNote(filePath)\n    \n    // Index in database\n    noteService.Create(note)\n    \n    return nil\n}\n```\n\n### Integration with Notes Mode\n\n**File**: `internal/tui/model.go`\n\nHandle Ctrl+N in Notes mode:\n```go\ncase tea.KeyMsg:\n    if msg.String() == \"ctrl+n\" \u0026\u0026 m.mode == ModeNotes {\n        m.showNoteCreateForm = true\n    }\n```\n\n**Messages**:\n```go\ntype NoteCreatedMsg struct {\n    Slug string\n}\n\ntype NoteCreateCancelledMsg struct{}\n```\n\nAfter creation:\n- Emit NoteCreatedMsg\n- Parent switches to NoteView\n- Show success message: \"Created note: {slug}\"\n\n## Acceptance Criteria\n\n- Ctrl+N in Notes mode opens creation form\n- Form has title and tags inputs\n- Tab navigates between fields\n- Enter submits form\n- ESC cancels form\n- Title validation works (required, min length)\n- Slug conflict detection works\n- Note file created with frontmatter\n- $EDITOR opens with new note\n- Note indexed after editor closes\n- Success message shown\n- Switches to viewing new note\n\n## Error Cases\n\n**Validation Errors**:\n- Empty title: \"Title is required\"\n- Title too short: \"Title must be at least 3 characters\"\n- Slug exists: \"Note '{slug}' already exists. Try different title?\"\n\n**Editor Errors**:\n- $EDITOR not set: Fall back to vi/nano\n- Editor fails: Show error, keep form open\n\n## Dependencies\n\n- Requires: reckon-plv (NoteService.Create)\n- Requires: reckon-38a (Parser/writer)\n- Requires: reckon-gz8 (NoteView to show after creation)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:40:48.269563825-05:00","created_by":"chadd","updated_at":"2026-01-11T21:40:48.269563825-05:00","dependencies":[{"issue_id":"reckon-j7x","depends_on_id":"reckon-plv","type":"blocks","created_at":"2026-01-11T21:42:10.959322958-05:00","created_by":"chadd"},{"issue_id":"reckon-j7x","depends_on_id":"reckon-38a","type":"blocks","created_at":"2026-01-11T21:42:11.075148397-05:00","created_by":"chadd"},{"issue_id":"reckon-j7x","depends_on_id":"reckon-gz8","type":"blocks","created_at":"2026-01-11T21:42:11.181210952-05:00","created_by":"chadd"}]}
{"id":"reckon-jaq","title":"Create Layout manager for pane dimensions","description":"Create layout manager to calculate pane dimensions for 40-40-18 split.\n\n## File to Create\n\n`internal/tui/layout.go`\n\n## Types to Define\n\n```go\ntype PaneDimensions struct {\n    // Left pane (Logs)\n    LogsWidth  int\n    LogsHeight int\n    \n    // Center pane (Tasks)\n    TasksWidth  int\n    TasksHeight int\n    \n    // Right sidebar (total)\n    RightWidth  int\n    RightHeight int\n    \n    // Right sidebar (stacked components)\n    ScheduleHeight    int  // ~30% of right height\n    IntentionsHeight  int  // ~35% of right height\n    WinsHeight        int  // ~35% of right height\n    \n    // Bottom bars\n    TextEntryHeight int  // Fixed: 3 lines\n    StatusHeight    int  // Fixed: 1 line\n}\n```\n\n## Function to Implement\n\n```go\n// CalculatePaneDimensions computes pane sizes based on terminal dimensions\nfunc CalculatePaneDimensions(termWidth, termHeight int) PaneDimensions\n```\n\n## Calculation Logic\n\n```\nAvailable height = termHeight - textEntryHeight(3) - statusHeight(1)\nPane height = available height\n\nLeft width = termWidth * 0.40\nCenter width = termWidth * 0.40\nRight width = termWidth - left - center (remaining ~18%)\n\nRight sidebar vertical split:\n- Schedule: rightHeight * 0.30\n- Intentions: rightHeight * 0.35\n- Wins: rightHeight * 0.35\n```\n\n## Implementation Details\n\n- Handle minimum sizes (don't allow negative dimensions)\n- Round widths appropriately\n- Ensure sum of widths equals termWidth\n- Ensure sum of right sidebar heights equals rightHeight\n\n## Acceptance Criteria\n\n- Returns correct 40-40-18 split for various terminal sizes\n- Right sidebar properly divided into 30-35-35 vertically\n- Handles edge cases (very small terminals)\n- Sum of widths = termWidth\n- Text entry and status bars have fixed heights\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 3, Step 4.4)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:47:15.49382489-05:00","updated_at":"2025-12-27T19:28:34.61723802-05:00","closed_at":"2025-12-27T19:28:34.61723802-05:00","close_reason":"Closed"}
{"id":"reckon-jia","title":"Add keyboard shortcuts to open items in external editor","description":"Add 'e' or 'E' keyboard shortcuts to open journals, tasks, and notes in $EDITOR from TUI.\n\n## Overview\n\nUsers should be able to quickly edit any item in their preferred editor without leaving the TUI. After editor closes, TUI reloads the modified content.\n\n## Keyboard Shortcut\n\n**'e' or 'E' key** when focused on item:\n- Journal view: Opens current day's journal file\n- Task: Opens task markdown file\n- Note: Opens note markdown file\n- Intention/Win/Log: Opens parent journal file with cursor hint\n\n## Implementation\n\n### Editor Helper\n\n**File**: `internal/tui/editor.go`\n\n```go\nfunc OpenInEditor(filePath string) error {\n    // Get $EDITOR env var (default to vi/nano/vim)\n    editor := os.Getenv(\"EDITOR\")\n    if editor == \"\" {\n        editor = findAvailableEditor() // Try vi, nano, vim\n    }\n    \n    // Run editor as subprocess\n    cmd := exec.Command(editor, filePath)\n    cmd.Stdin = os.Stdin\n    cmd.Stdout = os.Stdout\n    cmd.Stderr = os.Stderr\n    \n    // Run and wait\n    return cmd.Run()\n}\n\nfunc findAvailableEditor() string {\n    editors := []string{\"vi\", \"vim\", \"nano\", \"emacs\"}\n    for _, ed := range editors {\n        if _, err := exec.LookPath(ed); err == nil {\n            return ed\n        }\n    }\n    return \"vi\" // Fallback\n}\n```\n\n### TUI Integration\n\n**File**: `internal/tui/model.go`\n\nHandle 'e' key in different contexts:\n\n**Journal View**:\n```go\ncase \"e\", \"E\":\n    if m.focusedSection == SectionJournal {\n        filePath := m.journal.FilePath\n        m.Suspend() // Suspend TUI\n        OpenInEditor(filePath)\n        m.Resume()  // Resume TUI\n        m.ReloadJournal() // Reload after edit\n    }\n```\n\n**Task List**:\n```go\ncase \"e\", \"E\":\n    if m.focusedSection == SectionTasks {\n        task := m.getSelectedTask()\n        filePath := filepath.Join(tasksDir, task.ID + \".md\")\n        m.Suspend()\n        OpenInEditor(filePath)\n        m.Resume()\n        m.ReloadTask(task.ID)\n    }\n```\n\n**Note View**:\n```go\ncase \"e\", \"E\":\n    if m.mode == ModeNotes \u0026\u0026 m.notesMode == NotesModeView {\n        filePath := m.noteView.Note.FilePath\n        m.Suspend()\n        OpenInEditor(filePath)\n        m.Resume()\n        m.ReloadNote(m.noteView.Note.Slug)\n    }\n```\n\n### Suspend/Resume TUI\n\n**File**: `internal/tui/model.go`\n\n```go\nfunc (m *Model) Suspend() tea.Cmd {\n    // Exit alternate screen\n    // Restore cursor\n    // Clear screen\n    return tea.ExitAltScreen\n}\n\nfunc (m *Model) Resume() tea.Cmd {\n    // Re-enter alternate screen\n    // Redraw UI\n    return tea.EnterAltScreen\n}\n```\n\n### Reload After Edit\n\nAfter editor closes, reload the file:\n\n**Journal**:\n```go\nfunc (m *Model) ReloadJournal() {\n    journal, err := m.journalService.GetByDate(m.currentDate)\n    if err != nil {\n        m.showError(\"Failed to reload journal\")\n        return\n    }\n    m.journal = journal\n    m.showMessage(\"Journal reloaded\")\n}\n```\n\n**Task**:\n```go\nfunc (m *Model) ReloadTask(id string) {\n    // Re-parse task file\n    // Update in task list\n    // Re-index if needed\n}\n```\n\n**Note**:\n```go\nfunc (m *Model) ReloadNote(slug string) {\n    note, err := m.noteService.GetBySlug(slug)\n    if err != nil {\n        m.showError(\"Failed to reload note\")\n        return\n    }\n    m.noteView.Note = note\n    m.showMessage(\"Note reloaded\")\n}\n```\n\n## Status Bar Updates\n\nShow 'e' shortcut in relevant contexts:\n\n**Journal mode**:\n```\nâ†‘â†“:nav  l:log  i:intention  w:win  e:edit  h/l:day  q:quit\n```\n\n**Task list**:\n```\nâ†‘â†“:nav  space:toggle  enter:expand  e:edit  d:delete  q:quit\n```\n\n**Note view**:\n```\nâ†‘â†“:scroll  enter:follow  e:edit  b:back  q:quit\n```\n\n## Error Handling\n\n**Editor not found**:\n- Show error: \"No editor found. Set $EDITOR environment variable.\"\n- Provide fallback suggestions\n\n**Editor returns error**:\n- Show error message\n- Don't reload (keep original state)\n\n**File modified externally while editing**:\n- Detect file watcher notification\n- Prompt user: \"File changed. Reload? [y/n]\"\n\n## Acceptance Criteria\n\n- 'e' key opens journal file in $EDITOR\n- 'e' key opens task file in $EDITOR\n- 'e' key opens note file in $EDITOR\n- TUI suspends while editor is open\n- TUI resumes after editor closes\n- Content reloads automatically after edit\n- Works with different editors (vim, nano, emacs)\n- Falls back to vi if $EDITOR not set\n- Status bar shows 'e' hint in relevant contexts\n- Error handling for missing editor\n- Success message after reload\n\n## Configuration (Optional)\n\nAllow editor preference in config:\n```yaml\neditor: vim\neditor_args: [\"-c\", \"set wrap\"]\n```\n\n## Testing\n\nTest with different editors:\n- vim\n- nano\n- emacs\n- code (VS Code - may need special handling)\n- $EDITOR not set\n\nTest editing:\n- Journal file\n- Task file\n- Note file\n- Multiple edits in same session\n\n## Dependencies\n\nNone (standalone feature)\n\n## Related\n\n- Integrates with: reckon-5q5 (Notes mode)\n- Works with existing: Journal, Tasks","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T21:41:51.722269325-05:00","created_by":"chadd","updated_at":"2026-01-11T21:41:51.722269325-05:00"}
{"id":"reckon-k36","title":"UX: Make pane focus more visually obvious in TUI","description":"Current state: Blue border indicates focus but is subtle. Initial focus is on Logs, not Tasks. Users may not realize they need to Tab to Tasks pane before Space/Enter work. Consider: brighter focus color, section title highlighting, or onboarding hint.","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-10T16:56:47.302354174-05:00","created_by":"chadd","updated_at":"2026-01-12T10:38:24.68501324-05:00","closed_at":"2026-01-12T10:38:24.68501324-05:00","close_reason":"Closed"}
{"id":"reckon-k3h","title":"TUI: Add deletion and editing for entries","description":"Currently users can only add intentions/wins/logs, not delete or edit them.\n\nMissing functionality:\n- Delete intentions (d key?)\n- Edit intention text  \n- Delete wins\n- Edit wins\n- Delete log entries\n- Edit log entries\n\nThis is important for fixing typos or removing accidental entries.\n\nConsider keybindings:\n- d: delete selected item (with confirmation)\n- e: edit selected item\n- or use vim-style dd for delete","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-22T18:53:28.306539005-05:00","updated_at":"2025-12-29T16:05:55.873505529-05:00","closed_at":"2025-12-29T16:05:55.873505529-05:00","close_reason":"Implemented in PR #26 - added d/e keys for delete/edit with confirmation","pinned":true}
{"id":"reckon-kwi","title":"Implement CLI commands for task scheduling","description":"Add CLI commands for scheduling tasks and setting deadlines.\n\n## Commands\n\n**File**: `internal/cli/task.go`\n\nAdd subcommands to `rk task`:\n\n### Schedule Command\n```bash\nrk task schedule \u003ctask-id\u003e \u003cdate\u003e     # Set scheduled date\nrk task schedule \u003ctask-id\u003e tomorrow   # Relative date\nrk task schedule \u003ctask-id\u003e mon        # Next Monday\nrk task schedule \u003ctask-id\u003e +3d        # 3 days from now\nrk task schedule \u003ctask-id\u003e --clear    # Remove schedule\n```\n\n### Deadline Command\n```bash\nrk task deadline \u003ctask-id\u003e \u003cdate\u003e     # Set deadline\nrk task deadline \u003ctask-id\u003e +7d        # Relative deadline\nrk task deadline \u003ctask-id\u003e --clear    # Remove deadline\n```\n\n### List Filters\nExtend `rk task list`:\n```bash\nrk task list --scheduled=today        # Tasks scheduled for today\nrk task list --scheduled=this-week    # Tasks scheduled this week\nrk task list --scheduled=2025-01-15   # Tasks scheduled for specific date\n\nrk task list --deadline=today         # Tasks due today\nrk task list --deadline=this-week     # Tasks due this week\nrk task list --overdue                # Past deadline\n\nrk task list --grouped                # Show time-grouped output\n```\n\n## Date Parsing\n\nReuse date parser from date picker component:\n- Absolute dates: YYYY-MM-DD\n- Relative: today, tomorrow, mon-sun, +Nd, +Nw\n\n## Output Format\n\nWhen showing tasks with dates:\n```\nabc123  Fix critical bug                      ğŸ“… today  ğŸ”´ overdue\ndef456  Review PR #123                        ğŸ“… Jan 15\nghi789  Write documentation        due Jan 17 ğŸŸ¡\n```\n\n## Acceptance Criteria\n\n- `rk task schedule \u003cid\u003e \u003cdate\u003e` sets scheduled date\n- `rk task deadline \u003cid\u003e \u003cdate\u003e` sets deadline date\n- Both commands support relative dates\n- `--clear` flag removes date\n- List filters work correctly (--scheduled, --deadline, --overdue)\n- --grouped shows time-grouped output (TODAY, THIS WEEK, ALL TASKS)\n- Error messages for invalid task IDs or dates\n- Success messages confirm changes\n\n## Dependencies\n\n- Requires: reckon-mvl (Task model)\n- Requires: reckon-9gt (Parser/writer)\n- Can share date parser with: reckon-680 (Date picker)\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T21:31:25.21174736-05:00","created_by":"chadd","updated_at":"2026-01-11T21:31:25.21174736-05:00","dependencies":[{"issue_id":"reckon-kwi","depends_on_id":"reckon-mvl","type":"blocks","created_at":"2026-01-11T21:32:55.455838239-05:00","created_by":"chadd"},{"issue_id":"reckon-kwi","depends_on_id":"reckon-9gt","type":"blocks","created_at":"2026-01-11T21:32:55.615831427-05:00","created_by":"chadd"}]}
{"id":"reckon-l7d","title":"Phase 1.9: Build TUI for journal viewing and editing","description":"Implement the interactive TUI using Bubble Tea for viewing and editing daily journals.\n\n**Features**:\n- Main model with state: currentDate, currentJournal, focusedSection\n- Components: IntentionList (navigable, Enter to toggle), WinsView, LogView, LogInput\n- Statusbar with keybinding hints\n- Key bindings:\n  - Tab: cycle sections\n  - i: add intention\n  - l: add log entry  \n  - w: add win\n  - h/Left: prev day (read-only for past)\n  - l/Right: next day (max today)\n  - t: jump to today\n  - ?: help\n  - q: quit\n\n**Files**:\n- internal/tui/model.go - main TUI state\n- internal/tui/components/ - individual components\n- Update cmd/rk/main.go to launch TUI by default","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T17:17:32.642850579-05:00","updated_at":"2025-12-22T18:21:06.065014288-05:00","closed_at":"2025-12-22T18:21:06.065014288-05:00","close_reason":"Closed"}
{"id":"reckon-llr","title":"Cleanup: Remove duplicate cursor restoration logic in UpdateTasks","description":"task_list.go UpdateTasks has duplicate cursor restoration at lines 275-283 and 289-297. Consolidate into single block.","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-10T16:58:04.546272232-05:00","created_by":"chadd","updated_at":"2026-01-10T16:58:04.546272232-05:00"}
{"id":"reckon-m82","title":"Cleanup: Remove stale TODO comments about tags implementation","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-10T16:57:14.336095865-05:00","created_by":"chadd","updated_at":"2026-01-10T16:57:14.336095865-05:00"}
{"id":"reckon-mjn","title":"TUI: Add note count badge to collapsed tasks","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:56:03.511028012-05:00","created_by":"chadd","updated_at":"2026-01-12T09:40:10.229055294-05:00","closed_at":"2026-01-12T09:40:10.229055294-05:00","close_reason":"Closed"}
{"id":"reckon-mpn","title":"Extend journal parser for Schedule section","description":"Extend journal parser to handle new ## Schedule section.\n\n## File to Modify\n\n`internal/journal/parser.go`\n\n## Changes\n\n1. Add `SectionSchedule` to Section enum (line ~44-51)\n2. Update section header matching in ParseJournal (line ~88-101):\n   - Add case for \"schedule\" â†’ SectionSchedule\n3. Add parseScheduleItem function:\n   - Pattern: `- HH:MM Content` OR `- Content` (time optional)\n   - Return *ScheduleItem with ID, Time, Content, Position\n   - Use existing time parsing helper (parseTime)\n4. Add schedule parsing in main loop (line ~109-128):\n   - case SectionSchedule: parse schedule items\n\n## Format Examples\n\n```markdown\n## Schedule\n\n- 09:00 Morning standup\n- 14:00 Client meeting\n- Review PR (no time)\n```\n\n## Implementation Details\n\n- Time is optional (may be empty)\n- Follow existing parsing patterns (see parseIntention, parseLogEntry)\n- Handle empty Schedule section gracefully\n- Use xid for IDs (consistent with rest of codebase)\n\n## Acceptance Criteria\n\n- Parses ## Schedule section header\n- Parses schedule items with time (HH:MM format)\n- Parses schedule items without time\n- Handles empty Schedule section\n- Backward compatible: journals without Schedule section still parse\n\n## Dependencies\n\nRequires: ScheduleItem model from models ticket\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 1, Step 2.2)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:43:46.721829762-05:00","updated_at":"2025-12-28T16:36:05.385263344-05:00","closed_at":"2025-12-28T16:00:20.555530421-05:00","close_reason":"Schedule section parser implemented with support for timed/untimed items, comprehensive edge case handling, package-level regex optimization, and detailed documentation. Initial grade A-, improved to A after applying code review recommendations. PR #18 merged to main.","dependencies":[{"issue_id":"reckon-mpn","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:41.485883279-05:00","created_by":"daemon"}]}
{"id":"reckon-mvl","title":"Add ScheduledDate and DeadlineDate to Task model","description":"Update Task domain model to support scheduling fields.\n\n## Changes\n\n**File**: `internal/journal/models.go`\n\nUpdate Task struct:\n```go\ntype Task struct {\n    ID            string\n    Text          string\n    Status        TaskStatus\n    Notes         []TaskNote\n    Position      int\n    CreatedAt     time.Time\n    ScheduledDate *string  // NEW: YYYY-MM-DD format, nil if unscheduled\n    DeadlineDate  *string  // NEW: YYYY-MM-DD format, nil if no deadline\n}\n```\n\n**File**: `internal/journal/service.go`\n\nAdd methods:\n```go\nfunc (s *JournalService) ScheduleTask(taskID string, date string) error\nfunc (s *JournalService) SetTaskDeadline(taskID string, date string) error\nfunc (s *JournalService) ClearTaskSchedule(taskID string) error\nfunc (s *JournalService) ClearTaskDeadline(taskID string) error\nfunc (s *JournalService) GetTasksByTimeframe() (today, thisWeek, rest []Task, error)\n```\n\n**Date Validation**:\n- Validate YYYY-MM-DD format\n- Reject invalid dates\n- Allow nil/empty to clear\n\n## Acceptance Criteria\n\n- Task struct has ScheduledDate and DeadlineDate fields\n- Service methods can set/clear scheduled date\n- Service methods can set/clear deadline date\n- GetTasksByTimeframe returns tasks grouped by time\n- Date validation works correctly\n- Unit tests for new methods\n\n## Dependencies\n\n- Requires: reckon-8lc (database schema)\n\n**Part of**: reckon-4o2 (Phase 6: Task Scheduling \u0026 Calendar)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T21:30:45.256874543-05:00","created_by":"chadd","updated_at":"2026-01-11T21:30:45.256874543-05:00","dependencies":[{"issue_id":"reckon-mvl","depends_on_id":"reckon-8lc","type":"blocks","created_at":"2026-01-11T21:32:55.134881492-05:00","created_by":"chadd"}]}
{"id":"reckon-nnt","title":"SQL injection vulnerability in FindStaleTasks using fmt.Sprintf","description":"In internal/task/repository.go:189, FindStaleTasks uses fmt.Sprintf(query, days) to inject the days parameter into SQL. While days is an int (low risk), this is a dangerous pattern. Fix: Use parameterized query with date('now', '-' || ? || ' days') syntax.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T20:21:13.954628742-05:00","created_by":"chadd","updated_at":"2026-01-04T18:58:59.421119104-05:00","closed_at":"2026-01-04T18:58:59.421119104-05:00","close_reason":"Fixed SQL injection vulnerability by replacing fmt.Sprintf with parameterized query. Code reviewed and approved. PR #45 merged."}
{"id":"reckon-no2","title":"Add bordered boxes to right sidebar subsections (Schedule, Intentions, Wins)","description":"Modify renderNewLayout() in internal/tui/model.go to wrap each right sidebar subsection in bordered boxes.\n\n**Current behavior:**\n- Schedule, Intentions, and Wins are simply joined vertically\n- No visual separation between subsections\n- Difficult to distinguish where one section ends and another begins\n\n**Desired behavior:**\n- Each subsection (Schedule, Intentions, Wins) wrapped in its own bordered box\n- Use lipgloss.NewStyle().Border(lipgloss.NormalBorder())\n- Set explicit dimensions: dims.RightWidth for width, respective heights for each\n- Clear visual separation between all three subsections\n\n**Implementation:**\n- In model.go:renderNewLayout(), wrap scheduleView in box with dims.RightWidth x dims.ScheduleHeight\n- Wrap intentionsView in box with dims.RightWidth x dims.IntentionsHeight\n- Wrap winsView in box with dims.RightWidth x dims.WinsHeight\n- Stack the three bordered boxes vertically\n\n**Acceptance Criteria:**\n- Schedule subsection has visible border on all sides\n- Intentions subsection has visible border on all sides\n- Wins subsection has visible border on all sides\n- Each box maintains its calculated height\n- Three boxes stack cleanly in the right column","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:21.252862203-05:00","created_by":"chadd","updated_at":"2026-01-02T11:16:45.835259095-05:00","closed_at":"2026-01-02T11:16:45.835259095-05:00","close_reason":"Implemented bordered boxes for right sidebar (Schedule, Intentions, Wins) as part of merge resolution for reckon-8ji. Used simple border wrapping without double subtraction.","pinned":true}
{"id":"reckon-nxa","title":"TUI: Add empty state messages for sections","description":"When sections are empty, users see blank screens with no guidance.\n\nShould show helpful messages like:\n- Intentions: 'No intentions yet - press i to add one'\n- Wins: 'No wins yet - press w to add one'  \n- Logs: 'No log entries yet - press L to add one'\n\nThis helps new users understand how to interact with the app.\n\nLocations:\n- internal/tui/components/intention_list.go\n- internal/tui/components/wins_view.go\n- internal/tui/components/log_view.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:53:15.606800377-05:00","updated_at":"2025-12-23T16:53:36.10283095-05:00","closed_at":"2025-12-23T16:53:36.10283095-05:00","close_reason":"Closed"}
{"id":"reckon-ob9","title":"Write tests for log notes feature","description":"Comprehensive unit and integration tests for log notes.\n\n## Test Files to Create/Update\n- `internal/journal/models_test.go`\n- `internal/journal/parser_test.go`\n- `internal/journal/writer_test.go`\n- `internal/journal/repository_test.go`\n- `internal/journal/service_test.go`\n\n## Test Cases\n\n### Unit Tests\n- LogNote constructor generates unique IDs\n- Parse log entry with multiple notes\n- Parse note with ID: `[abc123] Note text`\n- Parse note without ID: `Note text` (auto-generate)\n- Write log entry with notes to markdown\n- Round-trip: parse â†’ write â†’ parse maintains data\n- extractNoteID() handles edge cases\n\n### Integration Tests\n- Create journal with log entry\n- Add note via service\n- Save to markdown file\n- Read back from markdown\n- Verify notes preserved with correct IDs\n- Delete log entry â†’ cascade delete notes\n- Multiple notes maintain position/order\n\n### Edge Cases\n- Log entry with no notes\n- Empty note text\n- Special characters in notes\n- Very long note text\n- Note ID collision (XIDs prevent this)\n\n## Manual Testing Checklist\n- [ ] Add log entry, add note via TUI\n- [ ] Toggle expand/collapse\n- [ ] Delete note\n- [ ] Manually edit markdown, restart app\n- [ ] Multiple notes per entry\n- [ ] Notes persist across restarts","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:21.273307613-05:00","created_by":"chadd","updated_at":"2026-01-06T11:06:21.273307613-05:00","dependencies":[{"issue_id":"reckon-ob9","depends_on_id":"reckon-r65","type":"blocks","created_at":"2026-01-06T11:06:31.446740837-05:00","created_by":"chadd"}]}
{"id":"reckon-oky","title":"CLI task new: add interactive mode with title and description prompts","description":"## Problem\n\nThe CLI `rk task new` command is non-interactive and only accepts title as positional argument. Adding a description requires a separate `rk task edit \u003cid\u003e --description \"...\"` command, which is cumbersome.\n\nCurrent usage:\n```bash\nrk task new \"My task\"           # Creates task, no description\nrk task edit abc123 --description \"Details here\"  # Separate command needed\n```\n\n## Current Implementation\n\n**File**: `internal/cli/task.go` lines 31-58\n\n```go\nvar taskNewCmd = \u0026cobra.Command{\n    Use:   \"new [title]\",\n    Short: \"Create a new task\",\n    Args:  cobra.MinimumNArgs(1),\n    RunE: func(cmd *cobra.Command, args []string) error {\n        title := strings.Join(args, \" \")\n        task, err := taskService.Create(title, taskNewTagsFlag)\n        // ... outputs success message\n    },\n}\n```\n\n**Flags**: Only `--tags` supported at creation time\n\n**Service**: `internal/task/service.go` - `Create()` accepts title and tags, not description\n\n## Desired Behavior\n\nAdd an interactive mode when `rk task new` is run without arguments:\n\n```bash\n$ rk task new\nTask title: Build user authentication\nDescription (optional, Enter to skip): \n\u003e Implement JWT-based auth with refresh tokens.\n\u003e Include password reset flow.\n\u003e (blank line to finish)\n\nâœ“ Created task: abc123def456\n  Title: Build user authentication\n```\n\nFeatures:\n1. **Title prompt**: Single-line input (required)\n2. **Description prompt**: Multi-line input (optional, blank line or Ctrl-D to finish)\n3. **Same inline TUI style** as proposed for `rk log` (reckon-8kq) - compact, doesn't clear terminal\n\n## Implementation Options\n\n### Option 1: Charmbracelet Huh Forms\nUse the `huh` library for inline forms:\n```go\nform := huh.NewForm(\n    huh.NewGroup(\n        huh.NewInput().Title(\"Task title\").Value(\u0026title),\n        huh.NewText().Title(\"Description (optional)\").Value(\u0026description),\n    ),\n)\n```\n\n### Option 2: Bubble Tea Mini-Program\nSimilar approach to reckon-8kq (log inline TUI):\n- Small Bubble Tea program that doesn't clear terminal\n- Title input followed by multi-line description input\n- Enter on empty line finishes description\n\n### Option 3: Simple Stdin Prompts\nBasic `fmt.Print`/`bufio.Scanner` approach:\n- Less polished but simpler\n- Could work as MVP\n\n## Acceptance Criteria\n\n- [ ] `rk task new` (no args) enters interactive mode\n- [ ] Title prompt shown and required\n- [ ] Description prompt shown and optional\n- [ ] Multi-line description supported (blank line or Ctrl-D to finish)\n- [ ] Task created with both title and description\n- [ ] `rk task new \"title\"` still works (non-interactive, no description)\n- [ ] `rk task new \"title\" --tags \"a,b\"` still works\n- [ ] Terminal content above prompt remains visible (inline, not fullscreen)\n\n## Files to Modify\n\n- `internal/cli/task.go`:\n  - Modify `taskNewCmd` to detect no-args case\n  - Add interactive prompt logic\n  - Call service with title and description\n\n- `internal/task/service.go`:\n  - Modify `Create()` to accept optional description parameter\n  - OR add new `CreateWithDescription()` method\n\n- Potentially create shared inline-prompt component if implementing for both this and reckon-8kq\n\n## Related Tickets\n\n- **reckon-8kq**: Improve CLI log entry UX with inline mini-TUI (same UX pattern)\n- **reckon-z08**: Make task details easier to view and add (related but different scope)\n\nConsider implementing a shared inline-prompt component that both tickets can use.\n\n## Testing\n\n- Test interactive mode creates task with title only\n- Test interactive mode creates task with title and description\n- Test multi-line description input\n- Test empty description (just Enter)\n- Test Ctrl-D/Ctrl-C cancellation\n- Test non-interactive mode still works\n- Test with --tags flag in non-interactive mode","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T18:22:22.225459873-05:00","created_by":"chadd","updated_at":"2026-01-10T11:37:37.281968213-05:00","closed_at":"2026-01-10T11:37:37.281968213-05:00","close_reason":"Completed in PR #48"}
{"id":"reckon-oy6","title":"Fix: UpdateTask accepts tags parameter but never saves them","description":"task_service.go:264 - UpdateTask accepts tags []string but line 281 has stale TODO and tags are never assigned to the task. Tags parameter is validated but discarded.","status":"closed","priority":2,"issue_type":"bug","assignee":"chadd","created_at":"2026-01-10T16:57:14.17459034-05:00","created_by":"chadd","updated_at":"2026-01-11T19:06:34.9202786-05:00","closed_at":"2026-01-11T19:06:34.9202786-05:00","close_reason":"Fixed in commit 9a1ddc1 - tags are now properly assigned when updating tasks"}
{"id":"reckon-plv","title":"Create Note domain model and NoteService","description":"Implement domain model and service layer for notes.\n\n## Domain Model\n\n**File**: `internal/note/models.go`\n\nCreate Note struct:\n```go\ntype Note struct {\n    Slug      string    // URL-safe identifier (lowercase, hyphenated)\n    Title     string    // Display title\n    Created   time.Time // Creation timestamp\n    Tags      []string  // List of tags\n    Content   string    // Markdown content (body only, no frontmatter)\n    Links     []string  // Extracted [[slug]] references from content\n    FilePath  string    // Path to markdown file\n}\n```\n\n## Service Layer\n\n**File**: `internal/note/service.go`\n\n```go\ntype NoteService interface {\n    Create(title string, tags []string) (*Note, error)\n    GetBySlug(slug string) (*Note, error)\n    Search(query string) ([]Note, error)\n    ListByTag(tag string) ([]Note, error)\n    ListAll() ([]Note, error)\n    Update(note *Note) error\n    Delete(slug string) error\n}\n```\n\n**Key Methods**:\n- `Create()` - Generate slug from title, create markdown file, insert to DB\n- `GetBySlug()` - Load from DB, read markdown file, parse content\n- `Search()` - Query FTS5 for full-text search\n- `ListByTag()` - Query notes by tag\n- `Update()` - Write markdown file, update DB\n- `Delete()` - Remove file and DB records\n\n**Slug Generation**:\n```go\nfunc GenerateSlug(title string) string {\n    // Convert to lowercase\n    // Replace spaces with hyphens\n    // Remove non-alphanumeric (keep hyphens)\n    // Example: \"Git Interactive Rebase\" -\u003e \"git-interactive-rebase\"\n}\n```\n\n## Configuration\n\n**File**: `internal/config/config.go`\n\nAdd notes directory helper:\n```go\nfunc NotesDir() string {\n    // Returns: ~/.reckon/notes/\n    // Auto-create if doesn't exist\n}\n```\n\n## Acceptance Criteria\n\n- Note struct defined with all fields\n- NoteService interface defined\n- NoteService implementation with all methods\n- Slug generation works correctly\n- Create method generates slug and creates file\n- GetBySlug loads note from DB and file\n- Search queries FTS5 (returns ranked results)\n- ListByTag filters by tag\n- Update saves changes to file and DB\n- Delete removes file and DB records\n- Unit tests for all service methods\n- Unit tests for slug generation\n\n## Dependencies\n\n- Requires: reckon-ee4 (Database schema)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:35:16.484066995-05:00","created_by":"chadd","updated_at":"2026-01-11T21:35:16.484066995-05:00","dependencies":[{"issue_id":"reckon-plv","depends_on_id":"reckon-ee4","type":"blocks","created_at":"2026-01-11T21:42:04.258400051-05:00","created_by":"chadd"}]}
{"id":"reckon-px1","title":"Add color indication for focused pane in TUI","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T14:22:28.073610501-05:00","created_by":"chadd","updated_at":"2026-01-02T14:24:00.325632972-05:00","closed_at":"2026-01-02T14:24:00.325632972-05:00","close_reason":"Closed"}
{"id":"reckon-qrw","title":"Implement markdown parser and writer for log notes","description":"Parse and write log notes as nested bullets in journal markdown.\n\n## Files to Modify\n- `internal/journal/parser.go` - Parse nested note bullets\n- `internal/journal/writer.go` - Write notes as nested bullets\n\n## Changes\n\n### parser.go (lines 131-135)\nUpdate log section parsing to detect 2-space indented bullets:\n```go\ncase SectionLog:\n    if strings.HasPrefix(line, \"  - \") \u0026\u0026 len(j.LogEntries) \u003e 0 {\n        // Parse as note for last log entry\n        noteText := strings.TrimSpace(strings.TrimPrefix(line, \"  - \"))\n        noteID, text := extractNoteID(noteText)\n        if noteID == \"\" {\n            noteID = xid.New().String()\n        }\n        \n        lastIdx := len(j.LogEntries) - 1\n        note := LogNote{ID: noteID, Text: text, Position: len(j.LogEntries[lastIdx].Notes)}\n        j.LogEntries[lastIdx].Notes = append(j.LogEntries[lastIdx].Notes, note)\n    } else if entry := parseLogEntry(trimmed, j.Date, logPos); entry != nil {\n        j.LogEntries = append(j.LogEntries, *entry)\n        logPos++\n    }\n```\n\nAdd helper at end of file:\n```go\nfunc extractNoteID(text string) (id string, remaining string)\n```\n\n### writer.go (lines 93-106)\nAfter writing log entry, add:\n```go\nif len(entry.Notes) \u003e 0 {\n    // Sort and write notes\n    for _, note := range sortedNotes {\n        sb.WriteString(fmt.Sprintf(\"  - [%s] %s\\n\", note.ID, note.Text))\n    }\n}\n```\n\n## Testing\n- Parse log entry with multiple notes\n- Parse note with/without ID\n- Round-trip: parse â†’ write â†’ parse (idempotency)\n- Handle edge cases: empty notes, special characters","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:20.40873386-05:00","created_by":"chadd","updated_at":"2026-01-06T11:06:20.40873386-05:00","dependencies":[{"issue_id":"reckon-qrw","depends_on_id":"reckon-a21","type":"blocks","created_at":"2026-01-06T11:06:31.12934574-05:00","created_by":"chadd"}]}
{"id":"reckon-r4j","title":"Improve Task Toggle Feedback in TUI (Space Key)","description":"Pressing Space to mark tasks as done shows no visible change due to asynchronous operation. Root cause: No immediate feedback during database round-trip. Solution: Implement optimistic UI updates (toggle checkbox instantly, revert on error); add loading indicator during async toggle; preserve cursor during reload. Files: task_list.go, model.go. Test: Space should show instant visual change, then confirm via reload.","status":"closed","priority":1,"issue_type":"task","assignee":"chadd","created_at":"2026-01-10T14:54:50.504002183-05:00","created_by":"chadd","updated_at":"2026-01-11T21:56:34.346355316-05:00","closed_at":"2026-01-11T21:56:34.346355316-05:00","close_reason":"Closed"}
{"id":"reckon-r65","title":"Implement TUI integration for log notes","description":"User interface for adding, viewing (collapsible), and deleting notes.\n\n## Files to Modify\n- `internal/tui/components/log_view.go` - Collapsible rendering\n- `internal/tui/components/text_entry_bar.go` - ModeLogNote\n- `internal/tui/model.go` - Keybindings and handlers\n\n## Changes\n\n### log_view.go (lines 20-124)\nUpdate structs:\n```go\ntype LogEntryItem struct {\n    entry  journal.LogEntry\n    isNote bool\n    noteID string\n}\n\ntype LogDelegate struct {\n    collapsedMap map[string]bool\n}\n\ntype LogView struct {\n    list         list.Model\n    collapsedMap map[string]bool\n    logEntries   []journal.LogEntry\n}\n```\n\nAdd functions:\n- `buildLogItems()` - Convert entries to flat list with notes\n- Update `Render()` - Show â–¶/â–¼ indicators, indent notes\n- Update `Update()` - Handle 'enter' for collapse/expand\n- `SelectedLogNote()` - Get selected entry/note\n\n### text_entry_bar.go\nAdd ModeLogNote constant and context field:\n```go\nModeLogNote Mode = \"log_note\"\ncontext     string\nfunc (t *TextEntryBar) SetContext/Context()\n```\n\n### model.go\nAdd message types, keybindings, handlers:\n- Message: logNoteAddedMsg, logNoteDeletedMsg\n- Key 'n': Add note to selected log entry\n- Key 'd': Delete note (if note selected) or entry\n- Key 'enter': Toggle expand/collapse\n- Methods: addLogNote(), deleteLogNote()\n\n## Testing\n- TUI: Add note via 'n' key\n- TUI: Toggle expand/collapse via 'enter'\n- TUI: Delete note via 'd' key\n- TUI: UI updates correctly after operations\n- TUI: Multiple notes display in order","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:20.945534414-05:00","created_by":"chadd","updated_at":"2026-01-06T11:06:20.945534414-05:00","dependencies":[{"issue_id":"reckon-r65","depends_on_id":"reckon-yk5","type":"blocks","created_at":"2026-01-06T11:06:31.369315858-05:00","created_by":"chadd"}]}
{"id":"reckon-re2","title":"TUI: Errors are silently swallowed - no user feedback","description":"When operations fail, errors are completely ignored with no feedback to user.\n\nLocation: internal/tui/model.go:99-101\n\nUser has no way to know when:\n- Journal fails to load\n- Intention toggle fails\n- Adding intentions/wins/logs fails\n\nShould add error display to model and show in View at bottom of screen or as a toast notification.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-22T18:53:43.565190335-05:00","updated_at":"2025-12-22T19:38:05.520793004-05:00","closed_at":"2025-12-22T19:38:05.520793004-05:00","close_reason":"Closed"}
{"id":"reckon-s0j","title":"Add wiki-link parsing to log and task parsers","description":"Extend parsers to extract [[slug]] note references from logs, tasks, and journals.\n\n## Context\n\nNotes use wiki-style `[[slug]]` links to reference other notes. These same links should work in logs, tasks, and journal entries, creating a unified linking system across Reckon.\n\n## Changes\n\n### Log Parser\n\n**File**: `internal/journal/parser.go`\n\nExtract links from log entry content:\n```go\ntype LogEntry struct {\n    // ... existing fields\n    NoteLinks []string  // NEW: extracted [[slug]] references\n}\n\nfunc ExtractWikiLinks(content string) []string {\n    // Find all [[slug]] patterns\n    // Return unique slugs\n    // Example: \"Used [[vim-macros]] and [[git-rebase]]\" -\u003e [\"vim-macros\", \"git-rebase\"]\n}\n```\n\nWhen parsing log entries:\n```markdown\n- 14:00 Reviewed [[git-rebase]] workflow\n```\nParse as:\n- Timestamp: 14:00\n- Content: \"Reviewed [[git-rebase]] workflow\"\n- NoteLinks: [\"git-rebase\"]\n\n### Task Parser\n\n**File**: `internal/journal/task_parser.go`\n\nExtract links from task descriptions and notes:\n```go\ntype Task struct {\n    // ... existing fields\n    NoteLinks []string  // NEW: [[slug]] references from description/notes\n}\n```\n\nParse links from:\n- Task description section\n- Task notes\n- Task log entries\n\n### Journal Parser\n\n**File**: `internal/journal/parser.go`\n\nExtract links from:\n- Intention text\n- Win text\n- Any other journal sections\n\n### Shared Utility\n\n**File**: `internal/parser/wikilinks.go`\n\nCreate shared link extraction utility:\n```go\nfunc ExtractWikiLinks(text string) []string {\n    // Regex: \\[\\[([a-z0-9-]+)\\]\\]\n    // Return unique slugs\n    // Handle edge cases (nested brackets, malformed links)\n}\n\nfunc ReplaceWikiLinks(text string, replacer func(slug string) string) string {\n    // Replace [[slug]] with result of replacer function\n    // Useful for rendering links in TUI\n}\n```\n\n## Database Schema\n\nAdd note link tracking:\n\n```sql\n-- Track which entries reference which notes\nCREATE TABLE note_references (\n  source_type TEXT NOT NULL,     -- 'log', 'task', 'intention', 'win'\n  source_id TEXT NOT NULL,       -- ID of the log/task/etc\n  note_slug TEXT NOT NULL,       -- Referenced note slug\n  PRIMARY KEY (source_type, source_id, note_slug),\n  FOREIGN KEY (note_slug) REFERENCES notes(slug) ON DELETE CASCADE\n);\n\nCREATE INDEX idx_note_references_slug ON note_references(note_slug);\n```\n\nThis enables:\n- Finding all places that reference a note (backlinks)\n- Validating note links (detecting broken links)\n\n## Writer Updates\n\n**Files**: `internal/journal/writer.go`, `internal/journal/task_writer.go`\n\nWriters should preserve `[[slug]]` links in content:\n- Don't modify link format\n- Write them exactly as stored\n\n## Acceptance Criteria\n\n- ExtractWikiLinks finds all [[slug]] patterns in text\n- Log parser extracts NoteLinks from entries\n- Task parser extracts NoteLinks from description/notes\n- Journal parser extracts NoteLinks from intentions/wins\n- note_references table tracks all references\n- References inserted when parsing logs/tasks\n- References deleted when logs/tasks deleted\n- Writers preserve [[slug]] format\n- Unit tests for link extraction\n- Unit tests for edge cases (malformed links, nested brackets)\n\n## Test Cases\n\n**Link Extraction**:\n- Single link: \"See [[foo]]\" -\u003e [\"foo\"]\n- Multiple: \"Check [[foo]] and [[bar]]\" -\u003e [\"foo\", \"bar\"]\n- Duplicates: \"[[foo]] and [[foo]]\" -\u003e [\"foo\"]\n- None: \"plain text\" -\u003e []\n- Mixed: \"[task:123] and [[note]]\" -\u003e [\"note\"]\n- Invalid: \"[[FOO]]\" or \"[[foo bar]]\" -\u003e [] (only lowercase, hyphens)\n\n**Parser Integration**:\n- Log with note link parses correctly\n- Task description with links parses correctly\n- Links stored in database\n- Links preserved when writing back\n\n## Dependencies\n\n- Requires: reckon-ee4 (Database schema for notes table)\n- Works with: reckon-38a (Note parser already has ExtractLinks)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:38:57.929534506-05:00","created_by":"chadd","updated_at":"2026-01-11T21:38:57.929534506-05:00","dependencies":[{"issue_id":"reckon-s0j","depends_on_id":"reckon-ee4","type":"blocks","created_at":"2026-01-11T21:42:04.477968109-05:00","created_by":"chadd"}]}
{"id":"reckon-s5z","title":"Cleanup: TaskArchived status is defined but unused","description":"models.go:24 defines TaskArchived but it's never used. task_parser.go:177 explicitly notes it's not supported. Either implement archiving or remove dead constant.","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-10T16:57:24.711301311-05:00","created_by":"chadd","updated_at":"2026-01-10T16:57:24.711301311-05:00"}
{"id":"reckon-s61","title":"Implement tag support in journal task system","status":"closed","priority":3,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-10T12:05:55.232620039-05:00","created_by":"chadd","updated_at":"2026-01-10T12:35:37.501328468-05:00","closed_at":"2026-01-10T12:35:37.501328468-05:00","close_reason":"Completed in PR #55"}
{"id":"reckon-sr7","title":"Create TagBrowser component for filtering notes","description":"Build tag browsing interface for exploring notes by topic.\n\n## Component\n\n**File**: `internal/tui/components/tag_browser.go`\n\n### Features\n\n- List all tags with note counts\n- Select tag to filter notes\n- Show notes for selected tag\n- Combine with search (tag + query)\n- Navigate with j/k\n\n### UI Layout\n\n```\nâ•­â”€ Browse by Tag â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ Tags                          â”‚ Notes (git: 12)   â”‚\nâ”‚                               â”‚                   â”‚\nâ”‚ \u003e git (12)                    â”‚ \u003e git-rebase      â”‚\nâ”‚   workflow (8)                â”‚   git-bisect      â”‚\nâ”‚   debugging (3)               â”‚   git-cherry-pick â”‚\nâ”‚   vim (5)                     â”‚   git-hooks       â”‚\nâ”‚   testing (7)                 â”‚   ...             â”‚\nâ”‚   architecture (4)            â”‚                   â”‚\nâ”‚   ...                         â”‚                   â”‚\nâ”‚                               â”‚                   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â†‘â†“:navigate  enter:view  tab:switch pane  q:close â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n```\n\n### Component Structure\n\n```go\ntype TagBrowser struct {\n    tags         []TagCount\n    notes        []note.Note\n    selectedTag  int\n    selectedNote int\n    focusedPane  Pane  // tags or notes\n    width        int\n    height       int\n    noteService  *note.NoteService\n}\n\ntype TagCount struct {\n    Tag   string\n    Count int\n}\n\ntype Pane int\nconst (\n    PaneTags Pane = iota\n    PaneNotes\n)\n\nfunc NewTagBrowser(noteService *note.NoteService) TagBrowser\nfunc (m TagBrowser) Update(msg tea.Msg) (TagBrowser, tea.Cmd)\nfunc (m TagBrowser) View() string\n```\n\n### Behavior\n\n**Tag List** (left pane):\n- Sorted alphabetically or by count (configurable)\n- Show count in parentheses\n- Highlight selected tag\n\n**Note List** (right pane):\n- Show notes for selected tag\n- Display slug or title\n- Sorted alphabetically\n\n**Navigation**:\n- j/k to move within pane\n- Tab to switch between panes\n- Enter in tags pane: focus notes\n- Enter in notes pane: view note (emit event)\n\n**Tag Filtering**:\nWhen tag selected:\n```go\nnotes, err := noteService.ListByTag(selectedTag)\n```\n\n### Multi-Tag Filtering (Optional)\n\nSupport selecting multiple tags:\n- Space to toggle tag selection\n- Notes match ALL selected tags (AND)\n- Visual indicator for selected tags\n\n```\nâ•­â”€ Browse by Tag â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ Tags                          â”‚ Notes (2)         â”‚\nâ”‚                               â”‚                   â”‚\nâ”‚ â˜‘ git (12)                    â”‚ \u003e git-workflow    â”‚\nâ”‚ â˜‘ workflow (8)                â”‚   git-team-setup  â”‚\nâ”‚ â˜ debugging (3)               â”‚                   â”‚\n```\n\n### Integration\n\n**Messages**:\n```go\ntype TagNoteSelectedMsg struct {\n    Slug string\n}\n```\n\nWhen Enter on note:\n- Emit TagNoteSelectedMsg\n- Parent loads NoteView\n\n## Acceptance Criteria\n\n- TagBrowser lists all tags with counts\n- Selecting tag loads notes for that tag\n- Two-pane layout (tags | notes)\n- Tab switches focus between panes\n- j/k navigate within focused pane\n- Enter emits note selection event\n- Empty tags show helpful message\n- Tag with no notes shows empty state\n- Responsive to terminal resize\n- (Optional) Multi-tag filtering works\n\n## Test Cases\n\n**Tag Listing**:\n- Shows all unique tags\n- Counts are accurate\n- Sorted correctly\n\n**Note Filtering**:\n- Selecting tag shows correct notes\n- Notes with multiple tags appear in each tag\n- Empty tag shows \"No notes with this tag\"\n\n**Navigation**:\n- Tab switches panes correctly\n- j/k wrap at list boundaries\n- Enter in tags focuses notes\n- Enter in notes emits event\n\n## Dependencies\n\n- Requires: reckon-plv (NoteService.ListByTag)\n- Requires: reckon-ee4 (note_tags table)\n\n**Part of**: reckon-5q5 (Phase 4: Zettelkasten Notes)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T21:40:22.026575293-05:00","created_by":"chadd","updated_at":"2026-01-11T21:40:22.026575293-05:00","dependencies":[{"issue_id":"reckon-sr7","depends_on_id":"reckon-plv","type":"blocks","created_at":"2026-01-11T21:42:10.73861862-05:00","created_by":"chadd"},{"issue_id":"reckon-sr7","depends_on_id":"reckon-ee4","type":"blocks","created_at":"2026-01-11T21:42:10.845772012-05:00","created_by":"chadd"}]}
{"id":"reckon-swe","title":"Investigate: Task toggle not working in TUI (focus or event routing issue?)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-10T16:56:10.444544534-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:51.113773961-05:00","closed_at":"2026-01-10T16:56:51.113773961-05:00","close_reason":"Root cause found: Focus starts on Logs section, not Tasks. Space key only works when Tasks pane is focused. User needs to Tab to Tasks first. This is UX issue, not a bug."}
{"id":"reckon-t2g","title":"Implement 40-40-18 layout in TUI model using existing components","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T15:37:46.878258022-05:00","created_by":"chadd","updated_at":"2025-12-28T16:36:05.287825397-05:00","closed_at":"2025-12-28T16:33:29.949799684-05:00","close_reason":"Closed"}
{"id":"reckon-uf8","title":"Ensure all components fill allocated vertical space","description":"Update component rendering to fill allocated vertical space, especially when empty or with minimal content.\n\n**Current behavior:**\n- Components collapse to content size\n- Empty state messages don't fill the pane height\n- Large gaps visible when sections are empty\n\n**Desired behavior:**\n- Each component fills its allocated height regardless of content\n- Empty states show centered in their allocated space\n- Visual consistency maintained across all pane sizes\n\n**Components to update:**\n1. LogView (internal/tui/components/log_view.go)\n2. TaskList (internal/tui/components/task_list.go)\n3. ScheduleView (internal/tui/components/schedule_view.go)\n4. IntentionList (internal/tui/components/intention_list.go)\n5. WinsView (internal/tui/components/wins_view.go)\n\n**Implementation approach:**\nOption A: Update View() methods to pad content to fill height\nOption B: Handle in model.go:renderNewLayout() by using lipgloss.Place() with explicit heights\nOption C: Combination - use Height() styling on the bordered boxes\n\n**Acceptance Criteria:**\n- All components fill their allocated vertical space\n- Empty state messages are visible and properly positioned\n- No visual gaps or collapsed sections\n- Content properly scrolls when exceeds available height","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:21.564616408-05:00","created_by":"chadd","updated_at":"2026-01-02T10:52:03.933057663-05:00","closed_at":"2026-01-02T10:52:03.933057663-05:00","close_reason":"Closed","dependencies":[{"issue_id":"reckon-uf8","depends_on_id":"reckon-8ji","type":"blocks","created_at":"2026-01-02T09:43:32.071080756-05:00","created_by":"chadd"},{"issue_id":"reckon-uf8","depends_on_id":"reckon-no2","type":"blocks","created_at":"2026-01-02T09:43:32.187525324-05:00","created_by":"chadd"}],"pinned":true}
{"id":"reckon-ujt","title":"Create TaskList component with collapse/expand","description":"Create TaskList Bubble Tea component with collapsible notes.\n\n## File to Create\n\n`internal/tui/components/task_list.go`\n\n## Component Structure\n\n```go\ntype TaskItem struct {\n    task     journal.Task\n    isNote   bool\n    noteID   string\n    taskID   string  // parent task ID for notes\n}\n\ntype TaskDelegate struct {\n    collapsedMap map[string]bool  // taskID -\u003e isCollapsed\n}\n\ntype TaskList struct {\n    list         list.Model\n    collapsedMap map[string]bool\n}\n\nfunc NewTaskList(tasks []journal.Task) *TaskList\nfunc (tl *TaskList) Update(msg tea.Msg) (*TaskList, tea.Cmd)\nfunc (tl *TaskList) View() string\nfunc (tl *TaskList) SetSize(width, height int)\nfunc (tl *TaskList) SelectedTask() *journal.Task\nfunc (tl *TaskList) UpdateTasks(tasks []journal.Task)\n```\n\n## Rendering Logic\n\n- Render task: `[ ] Task text` or `[x] Task text` (strikethrough if done)\n- Render notes: `  - Note text` (2-space indent)\n- Only show notes if task is not collapsed\n- Expand/collapse indicator: `â–¼` (expanded) or `â–¶` (collapsed)\n\n## Keyboard Handling\n\n- j/k: Navigate up/down (delegate to list.Model)\n- space: Toggle task status (return custom message)\n- enter: Toggle expand/collapse (update collapsedMap)\n\n## Implementation Details\n\n- Use Bubble Tea's `list.Model` with custom `TaskDelegate`\n- Convert tasks to list items (task + notes as separate items)\n- Filter notes based on collapsed state\n- Follow pattern from `internal/tui/components/intention_list.go`\n- Styling: Use lipgloss (consistent with other components)\n\n## Acceptance Criteria\n\n- Displays tasks with checkbox status\n- Shows/hides notes based on collapsed state\n- Space toggles task status (emits message)\n- Enter expands/collapses task\n- Handles tasks with no notes\n- Handles empty task list\n- Proper indentation for notes (2 spaces)\n- Strikethrough for completed tasks\n\n## Dependencies\n\nRequires: Task/TaskNote models\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 3, Step 4.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:47:15.850043832-05:00","updated_at":"2025-12-28T15:25:33.666906071-05:00","closed_at":"2025-12-28T15:25:33.666906071-05:00","close_reason":"TaskList component implemented with collapse/expand functionality, checkbox display, strikethrough styling, keyboard interactions, and comprehensive test coverage. Critical pointer semantics issue identified by code-reviewer and fixed. Grade: A-. PR #17 merged to main.","dependencies":[{"issue_id":"reckon-ujt","depends_on_id":"reckon-e0f","type":"blocks","created_at":"2025-12-23T19:49:42.057113443-05:00","created_by":"daemon"}]}
{"id":"reckon-vic","title":"N+1 query problem in ListTasks and FindStaleTasks","description":"In internal/task/repository.go ListTasks (line 152) and FindStaleTasks (line 203), a separate query fetches tags for each task. With 100 tasks, this becomes 101 queries. Fix: Use a JOIN or fetch all tags in a single query with IN clause.","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-03T20:21:14.243697549-05:00","created_by":"chadd","updated_at":"2026-01-03T21:42:10.279126525-05:00"}
{"id":"reckon-vmk","title":"Fix: Task repository query missing tags column","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T16:56:04.098768492-05:00","created_by":"chadd","updated_at":"2026-01-11T19:03:49.932523216-05:00","closed_at":"2026-01-11T19:03:49.932523216-05:00","close_reason":"Fixed by database migrations: tags column (0748d4b) and PRIMARY KEY constraint (1c90bdb)"}
{"id":"reckon-wi4","title":"TUI: Replace primitive input handling with bubbles/textinput","description":"Current input handling is manual character-by-character string building with no cursor movement, text selection, or mid-string editing. Should use bubbles/textinput component.\n\nLocation: internal/tui/model.go:104-126\n\nIssues:\n- No cursor movement (left/right arrows)\n- No text selection\n- Backspace only deletes from end\n- No copy/paste support\n\nShould replace with bubbles/textinput for proper editing experience.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T18:41:05.856849246-05:00","updated_at":"2025-12-22T19:34:34.511737619-05:00","closed_at":"2025-12-22T19:34:34.511737619-05:00","close_reason":"Fixed: Fully migrated to bubbles/textinput.Model with proper cursor movement, text editing, and selection support."}
{"id":"reckon-y7m","title":"TUI: Add tag support when creating tasks","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-10T16:56:03.897871348-05:00","created_by":"chadd","updated_at":"2026-01-10T16:56:03.897871348-05:00"}
{"id":"reckon-y97","title":"TUI and CLI use separate task systems - tasks don't sync between interfaces","description":"## Problem\nTasks added in TUI don't appear in CLI listings (`rk task list`), and tasks added in CLI don't appear in TUI task list. This creates a fractured user experience where the same application has two separate task databases.\n\n## Root Cause\n- TUI uses journal system: stores in `tasks.md` file and `tasks`/`task_notes` DB tables\n- CLI uses legacy system: stores in `phase2_tasks`/`phase2_task_tags`/`phase2_task_log_entries` DB tables + individual `.md` files  \n- No data synchronization between systems\n\n## Evidence\n- TUI loads journal tasks at startup, legacy tasks only on-demand\n- CLI task commands only use `task.Service`, ignore journal tasks\n- Only log entries are dual-written; task creation/deletion not synced\n\n## Proposed Solution\nUnify task systems by migrating everything to the journal system (newer, simpler) as single source of truth. Update CLI to use journal.TaskService instead of legacy task.Service.\n\n## Files Involved\n- `internal/tui/model.go` (loads both but separately)\n- `internal/cli/task.go` (only uses legacy system)\n- `internal/journal/task_service.go` vs `internal/task/service.go`","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T11:20:05.746544423-05:00","created_by":"chadd","updated_at":"2026-01-10T12:10:31.047919002-05:00","closed_at":"2026-01-10T12:10:31.047919002-05:00","close_reason":"Closed"}
{"id":"reckon-yk5","title":"Implement repository and service layers for log notes","description":"Database CRUD operations and business logic for log notes.\n\n## Files to Modify\n- `internal/journal/repository.go` - Database operations\n- `internal/journal/service.go` - Business logic\n\n## Changes\n\n### repository.go\nAdd methods after SaveJournal:\n```go\nfunc (r *Repository) saveLogNotes(tx *sql.Tx, logEntryID string, notes []LogNote) error\nfunc (r *Repository) GetLogNotes(logEntryID string) ([]LogNote, error)\n```\n\nUpdate SaveJournal (lines 57-68):\n- Call saveLogNotes() after each log entry insert\n\nUpdate GetJournalByDate (lines 152-183):\n- Load notes for each log entry after appending\n\nUpdate deleteJournalData (line 256):\n- Add \"log_notes\" to tables array\n\n### service.go\nAdd methods after UpdateLogEntry (line 235):\n```go\nfunc (s *Service) AddLogNote(j *Journal, logEntryID, noteText string) error\nfunc (s *Service) UpdateLogNote(j *Journal, logEntryID, noteID, newText string) error\nfunc (s *Service) DeleteLogNote(j *Journal, logEntryID, noteID string) error\n```\n\n## Testing\n- Repository: SaveJournal with notes\n- Repository: GetJournalByDate loads notes correctly\n- Repository: Cascade deletion works\n- Service: Add/Update/Delete operations\n- Service: Error handling for invalid IDs","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T11:06:20.66941486-05:00","created_by":"chadd","updated_at":"2026-01-06T11:06:20.66941486-05:00","dependencies":[{"issue_id":"reckon-yk5","depends_on_id":"reckon-a21","type":"blocks","created_at":"2026-01-06T11:06:31.20991162-05:00","created_by":"chadd"},{"issue_id":"reckon-yk5","depends_on_id":"reckon-qrw","type":"blocks","created_at":"2026-01-06T11:06:31.289233482-05:00","created_by":"chadd"}]}
{"id":"reckon-ywp","title":"General TUI UI Improvements","description":"Enhance TUI robustness for expansion and toggle operations. Solution: Ensure buildTaskItems() and buildLogItems() handle errors gracefully (log to console); add key binding validation for Enter/Space; improve error feedback for invalid operations. Files: task_list.go, log_view.go, model.go. Test: Verify error handling and key bindings work correctly.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T14:54:52.008213357-05:00","created_by":"chadd","updated_at":"2026-01-10T14:54:52.008213357-05:00"}
{"id":"reckon-z08","title":"Make task details easier to view and add in TUI and CLI","description":"## Problem\n\nTask details (descriptions/notes) are difficult to work with:\n\n1. **TUI**: Hints at bottom mention task features but there's no obvious way to view or add details\n   - `enter:expand` only works if notes already exist\n   - No keyboard shortcut to add a description or note to a task\n   - The `n` key for notes is marked TODO in the code\n\n2. **CLI**: Requires verbose `--description` flag\n   - `rk task edit \u003cid\u003e --description \"...\"` is too much typing\n   - No shorthand or interactive mode for adding descriptions\n\n## Current Implementation\n\n### Data Models (two parallel systems)\n- **Legacy** (`internal/task/models.go`): `Task.Description` string field\n- **New** (`internal/journal/models.go`): `Task.Notes` array of `TaskNote` structs\n\n### CLI\n- `internal/cli/task.go` lines 210-256: `task edit` command with `--description` flag\n- Description stored via `internal/task/service.go` `Update()` method\n\n### TUI\n- `internal/tui/components/task_list.go`: Main task list view\n  - Line 82-87: Shows expand/collapse indicators for notes\n  - Line 185-203: Enter key toggles note visibility\n  - Line 467: TODO comment for `n` key note workflow\n- `internal/tui/components/status_bar.go` line 62-76: Hints include `enter:expand` but no add-details hint\n- `internal/tui/components/task_view.go` lines 88-97: Shows description in legacy two-pane mode only\n\n### Storage Format\nTask markdown files have `## Description` and `## Log` sections (see `internal/task/parser.go` lines 88-106)\n\n## Desired Behavior\n\n### TUI Improvements\n1. **Add `n` key** to add a note/detail to the currently selected task\n   - Opens text entry bar in \"note\" mode\n   - On submit, appends note to task\n2. **Add `e` or `d` key** to edit/view full task description\n   - Could open a modal or switch to detail view\n3. **Show indicator** when task has description/notes (even when collapsed)\n4. **Update hints** to reflect actual available actions\n\n### CLI Improvements\n1. **Add shorthand flag**: `-d` for `--description`\n2. **Add interactive mode**: `rk task describe \u003cid\u003e` opens inline prompt (similar to proposed log inline TUI)\n3. **Consider**: `rk task note \u003cid\u003e \"note text\"` for quick note addition\n\n## Acceptance Criteria\n\n### TUI\n- [ ] `n` key adds a note to the selected task\n- [ ] Notes can be viewed by expanding task (Enter key)\n- [ ] Visual indicator shows when task has notes/description\n- [ ] Hints accurately reflect available actions\n\n### CLI\n- [ ] `-d` shorthand works for `--description`\n- [ ] `rk task describe \u003cid\u003e` opens interactive description editor\n- [ ] OR `rk task note \u003cid\u003e \"text\"` adds a quick note\n\n## Files to Modify\n\n- `internal/cli/task.go` - Add shorthand flag, possibly new subcommand\n- `internal/tui/components/task_list.go` - Implement `n` key handler, add visual indicators\n- `internal/tui/model.go` - Handle note entry mode\n- `internal/tui/components/status_bar.go` - Update hints\n- `internal/journal/task_service.go` - May need `AddNote()` method\n\n## Testing\n\n- Test adding note via TUI `n` key\n- Test expanding/collapsing notes with Enter\n- Test CLI shorthand flag works\n- Test notes persist after restart","status":"closed","priority":2,"issue_type":"feature","assignee":"chadd","created_at":"2026-01-04T17:19:58.362736705-05:00","created_by":"chadd","updated_at":"2026-01-10T12:09:03.961335072-05:00","closed_at":"2026-01-10T12:09:03.961335072-05:00","close_reason":"Completed in PR #52"}
{"id":"reckon-zx7","title":"Create TextEntryBar component","description":"Create TextEntryBar Bubble Tea component for always-visible input.\n\n## File to Create\n\n`internal/tui/components/text_entry_bar.go`\n\n## Component Structure\n\n```go\ntype EntryMode string\n\nconst (\n    ModeInactive  EntryMode = \"\"\n    ModeTask      EntryMode = \"task\"\n    ModeIntention EntryMode = \"intention\"\n    ModeWin       EntryMode = \"win\"\n    ModeLog       EntryMode = \"log\"\n)\n\ntype TextEntryBar struct {\n    textInput textinput.Model\n    mode      EntryMode\n    width     int\n}\n\nfunc NewTextEntryBar() *TextEntryBar\nfunc (teb *TextEntryBar) Update(msg tea.Msg) (*TextEntryBar, tea.Cmd)\nfunc (teb *TextEntryBar) View() string\nfunc (teb *TextEntryBar) SetWidth(width int)\nfunc (teb *TextEntryBar) SetMode(mode EntryMode)\nfunc (teb *TextEntryBar) GetValue() string\nfunc (teb *TextEntryBar) Clear()\nfunc (teb *TextEntryBar) Focus() tea.Cmd\nfunc (teb *TextEntryBar) Blur()\nfunc (teb *TextEntryBar) IsFocused() bool\n```\n\n## Rendering\n\n**Inactive state:**\n```\n\u003e Press t (task), i (intention), w (win), or L (log) to add entry\n```\n\n**Active state (example for task mode):**\n```\n\u003e Add task: [user input here_]\n```\n\n## Prompt by Mode\n\n- task: \"Add task: \"\n- intention: \"Add intention: \"\n- win: \"Add win: \"\n- log: \"Add log entry: \"\n- inactive: \"Press t (task), i (intention), w (win), or L (log) to add entry\"\n\n## Implementation Details\n\n- Use Bubble Tea's `textinput.Model` (from bubbles package)\n- Always visible (render in all states)\n- Change prompt based on mode\n- Width adjusts to terminal width\n- Use lipgloss for styling (border, colors)\n\n## Keyboard Handling\n\n- Delegate to textinput.Model when focused\n- Parent model handles enter (submit) and esc (cancel/blur)\n\n## Styling\n\n```go\nactiveStyle = lipgloss.NewStyle().\n    BorderStyle(lipgloss.NormalBorder()).\n    BorderForeground(lipgloss.Color(\"39\")).\n    Padding(0, 1)\n\ninactiveStyle = lipgloss.NewStyle().\n    BorderStyle(lipgloss.NormalBorder()).\n    BorderForeground(lipgloss.Color(\"240\")).\n    Padding(0, 1).\n    Foreground(lipgloss.Color(\"240\"))\n```\n\n## Acceptance Criteria\n\n- Always visible (shows in all states)\n- Prompt changes based on mode\n- Accepts text input when focused\n- Blurs on ESC\n- Clear() resets input value\n- SetMode() changes prompt\n- Proper styling for active/inactive states\n\n## Dependencies\n\nRequires: bubbles/textinput package (already in use)\n\nReference: ~/.claude/plans/recursive-strolling-treehouse.md (Phase 3, Step 4.3)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:48:19.897869478-05:00","updated_at":"2025-12-27T19:47:54.947448157-05:00","closed_at":"2025-12-27T19:47:54.947448157-05:00","close_reason":"Closed"}
